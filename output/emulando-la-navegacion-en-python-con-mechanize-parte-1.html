<!doctype html>
<html lang="es" itemscope itemtype="http://schema.org/Person">
<head>
            <meta charset="utf-8">
        <!-- Site Meta Data -->
        <title>Emulando la navegación en python con mechanize (parte 1)</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="Ernesto Crespo">

        <link rel="shortcut icon" href="">

        <!-- schema.org -->
        <meta itemprop="name" content="Página de Seraph">
        <meta itemprop="image" content="">
        <meta itemprop="description" content="">

        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
        <!-- Style Meta Data -->
        <link rel="stylesheet" href="https://ecrespo.github.io/theme/css/style.css" type="text/css"/>
        <link rel="stylesheet" href="https://ecrespo.github.io/theme/css/pygments.css" type="text/css"/>

        <!-- Feed Meta Data -->
            <link href="https://ecrespo.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
                  title="Página de Seraph ATOM Feed"/>

        <!-- Twitter Feed -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="">
        <meta name="twitter:image" content="">

    <meta name="twitter:creator" content="">
    <meta name="twitter:url" content="https://ecrespo.github.io/emulando-la-navegacion-en-python-con-mechanize-parte-1.html">
    <meta name="twitter:title" content="Página de Seraph ~ Emulando la navegación en python con mechanize (parte 1)">
    <meta name="twitter:description" content="En estos días me ha tocado programar una aplicación que permita interactuar de manera automática con otra, para ello utilicé la librería python-mechanize. Está librería permite la interacción con aplicaciones web para automatizar dicha interacción o cuando se quiere realizar pruebas de estrés a una aplicación se usa multi-mechanize. La …">

    <!-- Facebook Meta Data -->
    <meta property="og:title" content="Página de Seraph ~ Emulando la navegación en python con mechanize (parte 1)"/>
    <meta property="og:description" content="En estos días me ha tocado programar una aplicación que permita interactuar de manera automática con otra, para ello utilicé la librería python-mechanize. Está librería permite la interacción con aplicaciones web para automatizar dicha interacción o cuando se quiere realizar pruebas de estrés a una aplicación se usa multi-mechanize. La …"/>
    <meta property="og:image" content=""/>
</head>

<body>
<!-- Sidebar -->
<aside>
    <!--<center><a href="https://ecrespo.github.io"><img id="avatar" src=""></a></center>-->
    <h1>Página de Seraph</h1>
    <br>


    <nav class="nav">
        <ul class="list-bare">

                <li><a class="nav__link" href="/archives.html">Archives</a></li>
                <li><a class="nav__link" href="/categories.html">Categories</a></li>
                <li><a class="nav__link" href="/tags.html">Tags</a></li>

                <li><a class="nav__link" href="https://ecrespo.github.io/pages/About.html">Acerca</a></li>
                <li><a class="nav__link" href="https://ecrespo.github.io/pages/Contacto.html">Contacto</a></li>

        </ul>
    </nav>

    <p class="social">
                <a href="https://medium.com/@_seraph1" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/medium.png"></a>
                <a href="http://ve.linkedin.com/in/ernestocrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/linkedin.png"></a>
                <a href="https://github.com/ecrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/github.png"></a>
                <a href="https://google.com/+ErnestoCrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/google.png"></a>
                <a href="https://twitter.com/_seraph1" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/twitter.png"></a>
                <a href="https://www.facebook.com/ernesto.crespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/facebook.png"></a>
                <a href="https://gitlab.com/ecrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/gitlab.png"></a>
                <a href="https://soundcloud.com/ernesto-crespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/soundcloud.png"></a>
                <a href="//www.seraph.to/feeds/all.atom.xml" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/rss.png"></a>
            <a href="https://ecrespo.github.io/feeds/all.atom.xml" rel="alternate">
                <img src="https://ecrespo.github.io/theme/images/icons/rss.png"></a>
    </p>

        <h2>Categories</h2>
        <ul class="navbar">
                <li><a
                        href="https://ecrespo.github.io/category/accesibilidad.html">Accesibilidad</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/anuncio.html">Anuncio</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/anuncios.html">Anuncios</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/aplicacion-android.html">Aplicación Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/asterisk-debian-linux.html">Asterisk, Debian, Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/charla.html">Charla</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/charla-python.html">Charla Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/debian-linux-mac-book.html">Debian, Linux, Mac Book</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/debian-maemo-nokia-n810-python.html">Debian, maemo, Nokia N810, Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/demostracion-aplicacion-para-android.html">Demostración Aplicación para Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/desarrollomovil.html">Desarrollo,Movil</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/evento.html">Evento</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/general.html">General</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linux.html">Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxdebian.html">Linux,Debian</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxdesarrollo.html">Linux,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxempaquetado.html">Linux,Empaquetado</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxofimaticadesarrollo.html">Linux,Ofimatica,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/movil-nokia.html">Movil, Nokia</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/nokia-n810.html">Nokia N810</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/nokia-n810-debian-maemo.html">Nokia N810 Debian Maemo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/posts.html">posts</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/resumen-2010.html">Resumen 2010</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/sistemas-operativos.html">Sistemas Operativos</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial.html">Tutorial</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-android.html">Tutorial Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-arduino.html">Tutorial de Arduino</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-data-science.html">Tutorial de Data Science</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-docker.html">Tutorial de Docker</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-integracion-continua.html">Tutorial de integración continua</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-linux.html">Tutorial de Linux</a></li>
                <li class="active"><a
                        href="https://ecrespo.github.io/category/tutorial-de-python.html">Tutorial de Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-en-android.html">Tutorial de Python en Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-y-linux.html">Tutorial de Python y Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-y-pyqt.html">Tutorial de Python y PyQt</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-debian-bsd-y-python.html">Tutorial Debian BSD y Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-linux.html">Tutorial Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-linux-y-python.html">Tutorial Linux y Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-python.html">Tutorial Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-python-en-android.html">Tutorial Python en Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-python-y-linux.html">Tutorial Python y Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorialdesarrollo.html">Tutorial,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/xml-rpcpython.html">XML-RPC,Python</a></li>
        </ul>


</aside>

<!-- Content -->
<article>
    <section id="content">
        <article>
            <h2 class="post_title post_detail"><a href="https://ecrespo.github.io/emulando-la-navegacion-en-python-con-mechanize-parte-1.html" rel="bookmark"
                                                  title="Permalink to Emulando la navegación en python con mechanize (parte 1)">Emulando la navegación en python con mechanize (parte 1)</a></h2>
            <div class="entry-content blog-post">
                <p>En estos días me ha tocado programar una aplicación que permita interactuar de manera automática con otra, para ello utilicé la librería <code>python-mechanize</code>.</p>
<p>Está librería permite la interacción con aplicaciones web para automatizar dicha interacción o cuando se quiere realizar pruebas de estrés a una aplicación se usa <code>multi-mechanize</code>.</p>
<p>La página de mechanize la pueden revisar en el siguiente <a href="http://wwwsearch.sourceforge.net/mechanize/">enlace</a>. Hay una guía en <a href="http://stockrt.github.io/p/emulating-a-browser-in-python-with-mechanize/">Inglés</a>.</p>
<p>En estos día he estado practicando con django (framework de desarrollo web en python) donde espero pronto poder publicar artículos al respecto.</p>
<p>La aplicación en Django es la de manejo de bookmarks, se tiene un inicio de sesión, una página de bienvenida al usuario registrado, luego se puede listar los bookmarks y cerrar la sesión (aplicación en desarrollo).</p>
<p>Pues todo esos pasos se van a automatizar con <code>python-mechanize</code>.</p>
<p>Para instalar mechanize se puede hacer a lo Debian:  </p>
<div class="highlight"><pre><span></span><code><span class="err">#apt-get install python-mechanize</span>
</code></pre></div>

<p>La siguiente figura muestra la aplicación en django sin mucho adorno.  </p>
<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-1.png"> </p>
<p>Al darle click en sesión o Inicio de Sesión aparece la solicitud de usuario y clave como lo muestra la figura:  </p>
<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-2.png"> </p>
<p>Al darle botón derecho sobre la entrada de Usuario selecciona Inspeccionar elemento (esto en google chrome o chromium) y aparece una sección donde se muestra el código del formulario.  </p>
<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-3.png"> </p>
<p>De esa forma se puede averiguar los nombres de los elementos del formulario para luego utilizarlo en el código python con <code>mechanize</code>.</p>
<p>Se inicia el interprete de comandos de python:  </p>
<div class="highlight"><pre><span></span><code><span class="err">ecrespo@jewel:~$ python</span>
<span class="err">Python 2.7.2+ (default, Dec  1 2011, 01:55:02)</span>
<span class="err">[GCC 4.6.2] on linux2</span>
<span class="err">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="err">&gt;&gt;&gt; </span>
</code></pre></div>

<p>Se importa mechanize y el manejo de cookies:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">mechanize</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">cookielib</span>
</code></pre></div>

<p>Se crea la instancia browser de <code>mechanize</code>:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">br</span> <span class="o">=</span> <span class="n">mechanize</span><span class="o">.</span><span class="n">Browser</span><span class="p">()</span>
</code></pre></div>

<p>Se crea la instancia del cookie:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">cj</span> <span class="o">=</span> <span class="n">cookielib</span><span class="o">.</span><span class="n">LWPCookieJar</span><span class="p">()</span>
</code></pre></div>

<p>Se asocia la instancia del cookie con el navegador:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">br</span><span class="o">.</span><span class="n">set_cookiejar</span><span class="p">(</span><span class="n">cj</span><span class="p">)</span>
</code></pre></div>

<p>Se define que no se maneja robots:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">br</span><span class="o">.</span><span class="n">set_handle_robots</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>

<p>Se define el tiempo de refrescamiento:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">br</span><span class="o">.</span><span class="n">set_handle_refresh</span><span class="p">(</span><span class="n">mechanize</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">HTTPRefreshProcessor</span><span class="p">(),</span> <span class="n">max_time</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>

<p>Se define las cabeceras del navegador, en este caso se le está diciendo que el navegador es un firefox desde Linux Debian:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">br</span><span class="o">.</span><span class="n">addheaders</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;User-agent&#39;</span><span class="p">,</span> <span class="s1">&#39;Mozilla/5.0 (X11; U; Linux i686; es-VE; rv:1.9.0.1)Gecko/2008071615 Debian/6.0 Firefox/9&#39;</span><span class="p">)]</span>
</code></pre></div>

<p>Se abre la aplicación web que se encuentra en localhost y puerto 8050:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">r</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;http://localhost:8050/&#39;</span><span class="p">)</span>
</code></pre></div>

<p>Se muestra el resultado de la página:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="nb">print</span> <span class="n">r</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</code></pre></div>

<p>En la siguiente figura se muestra el resultado (el código html de la página) del comando anterior:  </p>
<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-4.png"> </p>
<p>Ahora se revisarán los links que maneja la página para darle click a sesión o Inicio de sesión para ingresar el usuario y clave:</p>
<p>Se crea un ciclo con los enlaces existentes en la página, luego se consulta el texto de cada enlace, si es sesión se abre el enlace pasado el url del mismo, luego finaliza el ciclo.  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">br</span><span class="o">.</span><span class="n">links</span><span class="p">():</span>
<span class="o">...</span>     <span class="k">if</span> <span class="n">link</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;sesion&quot;</span><span class="p">:</span>
<span class="o">...</span>         <span class="n">r</span><span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span><span class="n">link</span><span class="o">.</span><span class="n">absolute_url</span><span class="p">)</span>
<span class="o">...</span>         <span class="k">break</span>
<span class="o">...</span>     <span class="k">else</span><span class="p">:</span>
<span class="o">...</span>         <span class="k">continue</span>
</code></pre></div>

<p>Ya en este momento se encuentra en la página de ingreso de usuario y clave:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span> <span class="n">br</span><span class="o">.</span><span class="n">geturl</span><span class="p">()</span>
<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8050</span><span class="o">/</span><span class="n">sesion</span><span class="o">/</span>
</code></pre></div>

<p>Se puede mostrar el código html de la página de Inicio de sesión con el comando <code>br.response().read()</code>:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="nb">print</span> <span class="n">br</span><span class="o">.</span><span class="n">response</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</code></pre></div>

<p>En la figura se muestra el resultado del comando:  </p>
<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-5.png"> </p>
<p>Se puede mostrar los campos del formulario con el comando <code>br.forms()</code>:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">form</span> <span class="ow">in</span> <span class="n">br</span><span class="o">.</span><span class="n">forms</span><span class="p">():</span>
<span class="o">...</span>     <span class="nb">print</span> <span class="n">form</span>
<span class="o">...</span>
<span class="o">&lt;</span><span class="n">POST</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8050</span><span class="o">/</span><span class="n">sesion</span><span class="o">/</span> <span class="n">application</span><span class="o">/</span><span class="n">x</span><span class="o">-</span><span class="n">www</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">urlencoded</span>
  <span class="o">&lt;</span><span class="n">HiddenControl</span><span class="p">(</span><span class="n">csrfmiddlewaretoken</span><span class="o">=</span><span class="n">d3c9e6c2e06f5014647a1711ee3d4908</span><span class="p">)</span> <span class="p">(</span><span class="n">readonly</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TextControl</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PasswordControl</span><span class="p">(</span><span class="n">password</span><span class="o">=</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">SubmitControl</span><span class="p">(</span><span class="o">&lt;</span><span class="kc">None</span><span class="o">&gt;=</span><span class="n">login</span><span class="p">)</span> <span class="p">(</span><span class="n">readonly</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HiddenControl</span><span class="p">(</span><span class="nb">next</span><span class="o">=/</span><span class="p">)</span> <span class="p">(</span><span class="n">readonly</span><span class="p">)</span><span class="o">&gt;&gt;</span>
</code></pre></div>

<p>Se nota que se tienen dos campos de entrada de datos username y password y el botón de login para enviar los datos.</p>
<p>Como se tiene un sólo formulario se usa el parámetro <code>nr=0</code>, en el caso que existan varios formularios en dicha página sigue con los números consecutivos o se le pasa el nombre del formulario si existe <code>name="nombre"</code>:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">br</span><span class="o">.</span><span class="n">select_form</span><span class="p">(</span><span class="n">nr</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>

<p>Ahora se le pasa los datos de usuario y clave, luego se le da click al botón de envío:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;usuario&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;clave&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
<span class="o">&lt;</span><span class="n">response_seek_wrapper</span> <span class="n">at</span> <span class="mh">0xb6f0a06c</span><span class="n">L</span> <span class="n">whose</span> <span class="n">wrapped</span> <span class="nb">object</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">closeable_response</span> <span class="n">at</span> <span class="mh">0xb6f0d4cc</span><span class="n">L</span> <span class="n">whose</span> <span class="n">fp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">socket</span><span class="o">.</span><span class="n">_fileobject</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0xb6eff5ac</span><span class="o">&gt;&gt;&gt;</span>
</code></pre></div>

<p>Al ejecutar <code>response().read()</code> se mostrará la página de bienvenida del usuario que ingreso a la aplicación:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="nb">print</span> <span class="n">br</span><span class="o">.</span><span class="n">response</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</code></pre></div>

<p>En la siguiente figura se muestra el resultado del comando:  </p>
<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-6.png"> </p>
<p>Se muestran los enlaces disponibles y se selecciona el de publicar:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">enlace</span> <span class="ow">in</span> <span class="n">br</span><span class="o">.</span><span class="n">links</span><span class="p">():</span>
<span class="o">...</span>     <span class="k">if</span> <span class="n">enlace</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Publicar&quot;</span><span class="p">:</span>
<span class="o">...</span>         <span class="n">s</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span><span class="n">enlace</span><span class="o">.</span><span class="n">absolute_url</span><span class="p">)</span>
<span class="o">...</span>         <span class="k">break</span>
<span class="o">...</span>     <span class="k">else</span><span class="p">:</span>
<span class="o">...</span>         <span class="k">continue</span>
</code></pre></div>

<p>Se muestra el url de la página:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span> <span class="n">br</span><span class="o">.</span><span class="n">geturl</span><span class="p">()</span>
<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8050</span><span class="o">/</span><span class="n">salvar</span><span class="o">/</span>
</code></pre></div>

<p>Ahora se ingresará un URL de un sitio, por ejemplo www.python.org:</p>
<p>Primero se despliega el formulario:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">form</span> <span class="ow">in</span> <span class="n">br</span><span class="o">.</span><span class="n">forms</span><span class="p">():</span>
<span class="o">...</span>     <span class="nb">print</span> <span class="n">form</span>
<span class="o">...</span>
<span class="o">&lt;</span><span class="n">POST</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8050</span><span class="o">/</span><span class="n">salvar</span><span class="o">/</span> <span class="n">application</span><span class="o">/</span><span class="n">x</span><span class="o">-</span><span class="n">www</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">urlencoded</span>
  <span class="o">&lt;</span><span class="n">HiddenControl</span><span class="p">(</span><span class="n">csrfmiddlewaretoken</span><span class="o">=</span><span class="n">d3c9e6c2e06f5014647a1711ee3d4908</span><span class="p">)</span> <span class="p">(</span><span class="n">readonly</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TextControl</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TextControl</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TextControl</span><span class="p">(</span><span class="n">tags</span><span class="o">=</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">SubmitControl</span><span class="p">(</span><span class="o">&lt;</span><span class="kc">None</span><span class="o">&gt;=</span><span class="n">save</span><span class="p">)</span> <span class="p">(</span><span class="n">readonly</span><span class="p">)</span><span class="o">&gt;&gt;</span>
</code></pre></div>

<p>Se tiene que pasar el url, luego el título del url y etiquetas:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">select_form</span><span class="p">(</span><span class="n">nr</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;www.python.org&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Python&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;tags&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Python Programacion&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
<span class="o">&lt;</span><span class="n">response_seek_wrapper</span> <span class="n">at</span> <span class="mh">0xb6efee0c</span><span class="n">L</span> <span class="n">whose</span> <span class="n">wrapped</span> <span class="nb">object</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">closeable_response</span> <span class="n">at</span> <span class="mh">0xb6f12aac</span><span class="n">L</span> <span class="n">whose</span> <span class="n">fp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">socket</span><span class="o">.</span><span class="n">_fileobject</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0xb6eff86c</span><span class="o">&gt;&gt;&gt;</span>
</code></pre></div>

<p>Se muestra el contenido de la página luego de ingresar los datos:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span> <span class="n">br</span><span class="o">.</span><span class="n">response</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</code></pre></div>

<p>En la siguiente figura se muestra el resultado:  </p>
<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-7.png"> </p>
<p>Para finalizar se presenta los enlaces disponibles para luego cerrar la sesión del usuario:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">br</span><span class="o">.</span><span class="n">links</span><span class="p">():</span>
<span class="o">...</span>     <span class="k">if</span>  <span class="n">link</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Cerrar Sesion&quot;</span><span class="p">:</span>
<span class="o">...</span>         <span class="n">r</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span><span class="n">link</span><span class="o">.</span><span class="n">absolute_url</span><span class="p">)</span>
<span class="o">...</span>         <span class="k">break</span>
<span class="o">...</span>     <span class="k">else</span><span class="p">:</span>
<span class="o">...</span>         <span class="k">continue</span>
</code></pre></div>

<p>Se muestra el código html de la página resultante luego de dar click en cerrar sesión y la figura donde aparece dicho código:  </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="nb">print</span> <span class="n">br</span><span class="o">.</span><span class="n">response</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</code></pre></div>

<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-8.png"> </p>
<p>En el siguiente artículo sobre <code>mechanize</code> se explicará el uso de formularios más complejos que sólo entrar datos.  </p>
<h2></h2>
<p>¡Haz tu donativo!
Si te gustó el artículo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
dirección: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el código QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"></p>
            </div>
            <div class="post_list">
                <span>By </span>
                <a href="https://ecrespo.github.io/author/ernesto-crespo.html">@Ernesto Crespo</a>
                <span> in </span>
                <span class="post_category"><a href="https://ecrespo.github.io/category/tutorial-de-python.html" rel="bookmark"
                                               title="Permalink to Tutorial de Python">[ Tutorial de Python ]</a></span>
                <span class="post_date">sáb 10 marzo 2012</span>
                <div><span>Tags : </span>
                </div>

                <div class="entry-social">
                    <span class="twitter"><a target="_blank" rel="nofollow"
                                             onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=700');return false;"
                                             title="Twitter"
                                             href="https://twitter.com/share?url=https://ecrespo.github.io/emulando-la-navegacion-en-python-con-mechanize-parte-1.html&text=Emulando la navegación en python con mechanize (parte 1)&via="><img
                            src="https://ecrespo.github.io/theme/images/icons/twitter-s.png"></a></span>

                    <span class="gplus"><a target="_blank" title="Google +"
                                           href="https://plus.google.com/share?url=https://ecrespo.github.io/emulando-la-navegacion-en-python-con-mechanize-parte-1.html&hl=fr"
                                           rel="nofollow"
                                           onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img
                            src="https://ecrespo.github.io/theme/images/icons/google-s.png"></a></span>

                    <span class="facebook"><a target="_blank" title="Facebook" rel="nofollow"
                                              onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=700');return false;"
                                              href="https://www.facebook.com/sharer.php?u=https://ecrespo.github.io/emulando-la-navegacion-en-python-con-mechanize-parte-1.html&t=Emulando la navegación en python con mechanize (parte 1)"><img
                            src="https://ecrespo.github.io/theme/images/icons/facebook-s.png"></a></span>

                    <a target="_blank" title="Linkedin"
                       href="https://www.linkedin.com/shareArticle?mini=true&url=https://ecrespo.github.io/emulando-la-navegacion-en-python-con-mechanize-parte-1.html&title=Emulando la navegación en python con mechanize (parte 1)"
                       rel="nofollow"
                       onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img
                            src="https://ecrespo.github.io/theme/images/icons/linkedin-s.png"></a>

                    <span class="mail"><a
                            href="mailto:?subject=Emulando la navegación en python con mechanize (parte 1)&amp;body=Viens découvrir un article à propos de [Emulando la navegación en python con mechanize (parte 1)] sur le site de Ernesto Crespo. https://ecrespo.github.io/emulando-la-navegacion-en-python-con-mechanize-parte-1.html"
                            title="Share by Email" target="_blank"><img
                            src="https://ecrespo.github.io/theme/images/icons/mail-s.png"></a></span>
                </div>
            </div>
                <div class="comments">
                    <h2>Comments !</h2>
                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                        var disqus_identifier = "emulando-la-navegacion-en-python-con-mechanize-parte-1.html";
                        (function () {
                            var dsq = document.createElement('script');
                            dsq.type = 'text/javascript';
                            dsq.async = true;
                            dsq.src = 'https://https://seraphto.disqus.com.disqus.com/embed.js';
                            (document.getElementsByTagName('head')[0] ||
                            document.getElementsByTagName('body')[0]).appendChild(dsq);
                        })();
                    </script>
                </div>
        </article>
    </section>
</article>

<!-- Footer -->
    <footer>
        <p>
            Blog powered by <a href="http://getpelican.com/">Pelican</a>,
            which takes great advantage of <a href="http://python.org">Python</a>.
            Theme <a href="https://github.com/parbhat/pelican-blue">Pelican-Blue</a> by <a
                href="https://parbhatpuri.com/">@parbhat</a>.
        </p>
    </footer>

    <!-- Analytics -->
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-131517246-1']);
        _gaq.push(['_trackPageview']);
        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>

</body>
</html>