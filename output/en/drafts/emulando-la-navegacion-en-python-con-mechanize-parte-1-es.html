
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/en/../theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="https://ecrespo.github.io/en/../theme/pygments/monokai.min.css">


  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/en/../theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/en/../theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/en/../theme/font-awesome/css/solid.css">


    <link href="https://ecrespo.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Seraph's Blog Atom">



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131517246-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#e5e5ff">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#e5e5ff">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#e5e5ff">

<meta name="author" content="Ernesto Crespo" />
<meta name="description" content="En estos días me ha tocado programar una aplicación que permita interactuar de manera automática con otra, para ello utilicé la librería python-mechanize. Está librería permite la interacción con aplicaciones web para automatizar dicha interacción o cuando se quiere realizar pruebas de estrés a una aplicación se usa multi-mechanize. La …" />
<meta name="keywords" content="">


<meta property="og:site_name" content="Seraph's Blog"/>
<meta property="og:title" content="Emulando la navegación en python con mechanize (parte 1)"/>
<meta property="og:description" content="En estos días me ha tocado programar una aplicación que permita interactuar de manera automática con otra, para ello utilicé la librería python-mechanize. Está librería permite la interacción con aplicaciones web para automatizar dicha interacción o cuando se quiere realizar pruebas de estrés a una aplicación se usa multi-mechanize. La …"/>
<meta property="og:locale" content="es_VE"/>
<meta property="og:url" content="https://ecrespo.github.io/en/drafts/emulando-la-navegacion-en-python-con-mechanize-parte-1-es.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2012-03-10 09:00:00-04:30"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://ecrespo.github.io/en/author/ernesto-crespo.html">
<meta property="article:section" content="Tutorial de Python"/>
<meta property="og:image" content="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120">

  <title>Seraph's Blog &ndash; Emulando la navegación en python con mechanize (parte 1)</title>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "pub-0261001661746989",
      enable_page_level_ads: true
    });
  </script>
</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="https://ecrespo.github.io/en">
        <img src="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120" alt="Ernesto Crespo" title="Ernesto Crespo">
      </a>

      <h1>
        <a href="https://ecrespo.github.io/en">Ernesto Crespo</a>
      </h1>

<p>Data Scientist </p>

      <nav>
        <ul class="list">


              <li>
                <a target="_self"
                   href="https://ecrespo.github.io/en/pages/About.html#About">
                  Acerca
                </a>
              </li>
              <li>
                <a target="_self"
                   href="https://ecrespo.github.io/en/pages/Contacto.html#Contacto">
                  Contacto
                </a>
              </li>

        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-medium" href="https://medium.com/@_seraph1" target="_blank">
              <i class="fab fa-medium"></i>
            </a>
          </li>
          <li>
            <a  class="sc-linkedin" href="http://ve.linkedin.com/in/ernestocrespo" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a  class="sc-github" href="https://github.com/ecrespo" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-google" href="https://google.com/+ErnestoCrespo" target="_blank">
              <i class="fab fa-google"></i>
            </a>
          </li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/_seraph1" target="_blank">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
          <li>
            <a  class="sc-facebook" href="https://www.facebook.com/ernesto.crespo" target="_blank">
              <i class="fab fa-facebook"></i>
            </a>
          </li>
          <li>
            <a  class="sc-gitlab" href="https://gitlab.com/ecrespo" target="_blank">
              <i class="fab fa-gitlab"></i>
            </a>
          </li>
          <li>
            <a  class="sc-soundcloud" href="https://soundcloud.com/ernesto-crespo" target="_blank">
              <i class="fab fa-soundcloud"></i>
            </a>
          </li>
          <li>
            <a  class="sc-rss" href="//www.seraph.to/feeds/all.atom.xml" target="_blank">
              <i class="fas fa-rss"></i>
            </a>
          </li>
      </ul>
    </div>

      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-aside"
           data-ad-client="pub-0261001661746989"
           data-ad-slot="1234561"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
  </aside>
  <main>
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-responsive"
           data-ad-client="pub-0261001661746989"
           data-ad-slot="1234562"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>

    <nav>
      <a href="https://ecrespo.github.io/en">Home</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="https://ecrespo.github.io/feeds/all.atom.xml">Atom</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="emulando-la-navegacion-en-python-con-mechanize-parte-1">Emulando la navegación en python con mechanize (parte 1)</h1>
    <p>
      Posted on sáb 10 marzo 2012 in <a href="https://ecrespo.github.io/en/category/tutorial-de-python.html">Tutorial de Python</a>

        &#8226; 4 min read
    </p>
  </header>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234565"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

  <div>
    <p>En estos días me ha tocado programar una aplicación que permita interactuar de manera automática con otra, para ello utilicé la librería <code>python-mechanize</code>.</p>
<p>Está librería permite la interacción con aplicaciones web para automatizar dicha interacción o cuando se quiere realizar pruebas de estrés a una aplicación se usa <code>multi-mechanize</code>.</p>
<p>La página de mechanize la pueden revisar en el siguiente <a href="http://wwwsearch.sourceforge.net/mechanize/">enlace</a>. Hay una guía en <a href="http://stockrt.github.io/p/emulating-a-browser-in-python-with-mechanize/">Inglés</a>.</p>
<p>En estos día he estado practicando con django (framework de desarrollo web en python) donde espero pronto poder publicar artículos al respecto.</p>
<p>La aplicación en Django es la de manejo de bookmarks, se tiene un inicio de sesión, una página de bienvenida al usuario registrado, luego se puede listar los bookmarks y cerrar la sesión (aplicación en desarrollo).</p>
<p>Pues todo esos pasos se van a automatizar con <code>python-mechanize</code>.</p>
<p>Para instalar mechanize se puede hacer a lo Debian:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span>#apt-get install python-mechanize</span></span>
</pre></div>


<p>La siguiente figura muestra la aplicación en django sin mucho adorno.  </p>
<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-1.png"> </p>
<p>Al darle click en sesión o Inicio de Sesión aparece la solicitud de usuario y clave como lo muestra la figura:  </p>
<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-2.png"> </p>
<p>Al darle botón derecho sobre la entrada de Usuario selecciona Inspeccionar elemento (esto en google chrome o chromium) y aparece una sección donde se muestra el código del formulario.  </p>
<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-3.png"> </p>
<p>De esa forma se puede averiguar los nombres de los elementos del formulario para luego utilizarlo en el código python con <code>mechanize</code>.</p>
<p>Se inicia el interprete de comandos de python:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="n">ecrespo</span><span class="nv">@jewel</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">python</span><span class="w"></span></span></span>
<span class="code-line"><span class="code-line"><span class="n">Python</span><span class="w"> </span><span class="mf">2.7.2</span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="k">default</span><span class="p">,</span><span class="w"> </span><span class="k">Dec</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="mi">2011</span><span class="p">,</span><span class="w"> </span><span class="mi">01</span><span class="err">:</span><span class="mi">55</span><span class="err">:</span><span class="mi">02</span><span class="p">)</span><span class="w"></span></span></span>
<span class="code-line"><span class="code-line"><span class="o">[</span><span class="n">GCC 4.6.2</span><span class="o">]</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">linux2</span><span class="w"></span></span></span>
<span class="code-line"><span class="code-line"><span class="n">Type</span><span class="w"> </span><span class="ss">&quot;help&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;copyright&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;credits&quot;</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ss">&quot;license&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="p">.</span><span class="w"></span></span></span>
<span class="code-line"><span class="code-line"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span></span></span>
</pre></div>


<p>Se importa mechanize y el manejo de cookies:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">mechanize</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">cookielib</span></span></span>
</pre></div>


<p>Se crea la instancia browser de <code>mechanize</code>:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span><span class="n">br</span> <span class="o">=</span> <span class="n">mechanize</span><span class="o">.</span><span class="n">Browser</span><span class="p">()</span></span></span>
</pre></div>


<p>Se crea la instancia del cookie:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span><span class="n">cj</span> <span class="o">=</span> <span class="n">cookielib</span><span class="o">.</span><span class="n">LWPCookieJar</span><span class="p">()</span></span></span>
</pre></div>


<p>Se asocia la instancia del cookie con el navegador:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span><span class="n">br</span><span class="o">.</span><span class="n">set_cookiejar</span><span class="p">(</span><span class="n">cj</span><span class="p">)</span></span></span>
</pre></div>


<p>Se define que no se maneja robots:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span><span class="n">br</span><span class="o">.</span><span class="n">set_handle_robots</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></span></span>
</pre></div>


<p>Se define el tiempo de refrescamiento:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span><span class="n">br</span><span class="o">.</span><span class="n">set_handle_refresh</span><span class="p">(</span><span class="n">mechanize</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">HTTPRefreshProcessor</span><span class="p">(),</span> <span class="n">max_time</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></span></span>
</pre></div>


<p>Se define las cabeceras del navegador, en este caso se le está diciendo que el navegador es un firefox desde Linux Debian:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span><span class="n">br</span><span class="o">.</span><span class="n">addheaders</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;User-agent&#39;</span><span class="p">,</span> <span class="s1">&#39;Mozilla/5.0 (X11; U; Linux i686; es-VE; rv:1.9.0.1)Gecko/2008071615 Debian/6.0 Firefox/9&#39;</span><span class="p">)]</span></span></span>
</pre></div>


<p>Se abre la aplicación web que se encuentra en localhost y puerto 8050:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span><span class="n">r</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;http://localhost:8050/&#39;</span><span class="p">)</span></span></span>
</pre></div>


<p>Se muestra el resultado de la página:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span><span class="nb">print</span> <span class="n">r</span><span class="o">.</span><span class="n">read</span><span class="p">()</span></span></span>
</pre></div>


<p>En la siguiente figura se muestra el resultado (el código html de la página) del comando anterior:  </p>
<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-4.png"> </p>
<p>Ahora se revisarán los links que maneja la página para darle click a sesión o Inicio de sesión para ingresar el usuario y clave:</p>
<p>Se crea un ciclo con los enlaces existentes en la página, luego se consulta el texto de cada enlace, si es sesión se abre el enlace pasado el url del mismo, luego finaliza el ciclo.  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">br</span><span class="o">.</span><span class="n">links</span><span class="p">():</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>     <span class="k">if</span> <span class="n">link</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;sesion&quot;</span><span class="p">:</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>         <span class="n">r</span><span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span><span class="n">link</span><span class="o">.</span><span class="n">absolute_url</span><span class="p">)</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>         <span class="k">break</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>     <span class="k">else</span><span class="p">:</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>         <span class="k">continue</span></span></span>
</pre></div>


<p>Ya en este momento se encuentra en la página de ingreso de usuario y clave:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span> <span class="n">br</span><span class="o">.</span><span class="n">geturl</span><span class="p">()</span></span></span>
<span class="code-line"><span class="code-line"><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8050</span><span class="o">/</span><span class="n">sesion</span><span class="o">/</span></span></span>
</pre></div>


<p>Se puede mostrar el código html de la página de Inicio de sesión con el comando <code>br.response().read()</code>:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span><span class="nb">print</span> <span class="n">br</span><span class="o">.</span><span class="n">response</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span></span></span>
</pre></div>


<p>En la figura se muestra el resultado del comando:  </p>
<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-5.png"> </p>
<p>Se puede mostrar los campos del formulario con el comando <code>br.forms()</code>:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">form</span> <span class="ow">in</span> <span class="n">br</span><span class="o">.</span><span class="n">forms</span><span class="p">():</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>     <span class="nb">print</span> <span class="n">form</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">&lt;</span><span class="n">POST</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8050</span><span class="o">/</span><span class="n">sesion</span><span class="o">/</span> <span class="n">application</span><span class="o">/</span><span class="n">x</span><span class="o">-</span><span class="n">www</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">urlencoded</span></span></span>
<span class="code-line"><span class="code-line">  <span class="o">&lt;</span><span class="n">HiddenControl</span><span class="p">(</span><span class="n">csrfmiddlewaretoken</span><span class="o">=</span><span class="n">d3c9e6c2e06f5014647a1711ee3d4908</span><span class="p">)</span> <span class="p">(</span><span class="n">readonly</span><span class="p">)</span><span class="o">&gt;</span></span></span>
<span class="code-line"><span class="code-line">  <span class="o">&lt;</span><span class="n">TextControl</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="p">)</span><span class="o">&gt;</span></span></span>
<span class="code-line"><span class="code-line">  <span class="o">&lt;</span><span class="n">PasswordControl</span><span class="p">(</span><span class="n">password</span><span class="o">=</span><span class="p">)</span><span class="o">&gt;</span></span></span>
<span class="code-line"><span class="code-line">  <span class="o">&lt;</span><span class="n">SubmitControl</span><span class="p">(</span><span class="o">&lt;</span><span class="kc">None</span><span class="o">&gt;=</span><span class="n">login</span><span class="p">)</span> <span class="p">(</span><span class="n">readonly</span><span class="p">)</span><span class="o">&gt;</span></span></span>
<span class="code-line"><span class="code-line">  <span class="o">&lt;</span><span class="n">HiddenControl</span><span class="p">(</span><span class="nb">next</span><span class="o">=/</span><span class="p">)</span> <span class="p">(</span><span class="n">readonly</span><span class="p">)</span><span class="o">&gt;&gt;</span></span></span>
</pre></div>


<p>Se nota que se tienen dos campos de entrada de datos username y password y el botón de login para enviar los datos.</p>
<p>Como se tiene un sólo formulario se usa el parámetro <code>nr=0</code>, en el caso que existan varios formularios en dicha página sigue con los números consecutivos o se le pasa el nombre del formulario si existe <code>name="nombre"</code>:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span><span class="n">br</span><span class="o">.</span><span class="n">select_form</span><span class="p">(</span><span class="n">nr</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></span></span>
</pre></div>


<p>Ahora se le pasa los datos de usuario y clave, luego se le da click al botón de envío:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;usuario&#39;</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;clave&#39;</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">&lt;</span><span class="n">response_seek_wrapper</span> <span class="n">at</span> <span class="mh">0xb6f0a06c</span><span class="n">L</span> <span class="n">whose</span> <span class="n">wrapped</span> <span class="nb">object</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">closeable_response</span> <span class="n">at</span> <span class="mh">0xb6f0d4cc</span><span class="n">L</span> <span class="n">whose</span> <span class="n">fp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">socket</span><span class="o">.</span><span class="n">_fileobject</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0xb6eff5ac</span><span class="o">&gt;&gt;&gt;</span></span></span>
</pre></div>


<p>Al ejecutar <code>response().read()</code> se mostrará la página de bienvenida del usuario que ingreso a la aplicación:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span><span class="nb">print</span> <span class="n">br</span><span class="o">.</span><span class="n">response</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span></span></span>
</pre></div>


<p>En la siguiente figura se muestra el resultado del comando:  </p>
<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-6.png"> </p>
<p>Se muestran los enlaces disponibles y se selecciona el de publicar:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">enlace</span> <span class="ow">in</span> <span class="n">br</span><span class="o">.</span><span class="n">links</span><span class="p">():</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>     <span class="k">if</span> <span class="n">enlace</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Publicar&quot;</span><span class="p">:</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>         <span class="n">s</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span><span class="n">enlace</span><span class="o">.</span><span class="n">absolute_url</span><span class="p">)</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>         <span class="k">break</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>     <span class="k">else</span><span class="p">:</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>         <span class="k">continue</span></span></span>
</pre></div>


<p>Se muestra el url de la página:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span> <span class="n">br</span><span class="o">.</span><span class="n">geturl</span><span class="p">()</span></span></span>
<span class="code-line"><span class="code-line"><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8050</span><span class="o">/</span><span class="n">salvar</span><span class="o">/</span></span></span>
</pre></div>


<p>Ahora se ingresará un URL de un sitio, por ejemplo www.python.org:</p>
<p>Primero se despliega el formulario:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">form</span> <span class="ow">in</span> <span class="n">br</span><span class="o">.</span><span class="n">forms</span><span class="p">():</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>     <span class="nb">print</span> <span class="n">form</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">&lt;</span><span class="n">POST</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8050</span><span class="o">/</span><span class="n">salvar</span><span class="o">/</span> <span class="n">application</span><span class="o">/</span><span class="n">x</span><span class="o">-</span><span class="n">www</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">urlencoded</span></span></span>
<span class="code-line"><span class="code-line">  <span class="o">&lt;</span><span class="n">HiddenControl</span><span class="p">(</span><span class="n">csrfmiddlewaretoken</span><span class="o">=</span><span class="n">d3c9e6c2e06f5014647a1711ee3d4908</span><span class="p">)</span> <span class="p">(</span><span class="n">readonly</span><span class="p">)</span><span class="o">&gt;</span></span></span>
<span class="code-line"><span class="code-line">  <span class="o">&lt;</span><span class="n">TextControl</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="p">)</span><span class="o">&gt;</span></span></span>
<span class="code-line"><span class="code-line">  <span class="o">&lt;</span><span class="n">TextControl</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="p">)</span><span class="o">&gt;</span></span></span>
<span class="code-line"><span class="code-line">  <span class="o">&lt;</span><span class="n">TextControl</span><span class="p">(</span><span class="n">tags</span><span class="o">=</span><span class="p">)</span><span class="o">&gt;</span></span></span>
<span class="code-line"><span class="code-line">  <span class="o">&lt;</span><span class="n">SubmitControl</span><span class="p">(</span><span class="o">&lt;</span><span class="kc">None</span><span class="o">&gt;=</span><span class="n">save</span><span class="p">)</span> <span class="p">(</span><span class="n">readonly</span><span class="p">)</span><span class="o">&gt;&gt;</span></span></span>
</pre></div>


<p>Se tiene que pasar el url, luego el título del url y etiquetas:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">select_form</span><span class="p">(</span><span class="n">nr</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;www.python.org&quot;</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Python&quot;</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;tags&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Python Programacion&quot;</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">&gt;&gt;&gt;</span> <span class="n">br</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">&lt;</span><span class="n">response_seek_wrapper</span> <span class="n">at</span> <span class="mh">0xb6efee0c</span><span class="n">L</span> <span class="n">whose</span> <span class="n">wrapped</span> <span class="nb">object</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">closeable_response</span> <span class="n">at</span> <span class="mh">0xb6f12aac</span><span class="n">L</span> <span class="n">whose</span> <span class="n">fp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">socket</span><span class="o">.</span><span class="n">_fileobject</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0xb6eff86c</span><span class="o">&gt;&gt;&gt;</span></span></span>
</pre></div>


<p>Se muestra el contenido de la página luego de ingresar los datos:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span> <span class="n">br</span><span class="o">.</span><span class="n">response</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span></span></span>
</pre></div>


<p>En la siguiente figura se muestra el resultado:  </p>
<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-7.png"> </p>
<p>Para finalizar se presenta los enlaces disponibles para luego cerrar la sesión del usuario:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">br</span><span class="o">.</span><span class="n">links</span><span class="p">():</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>     <span class="k">if</span>  <span class="n">link</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Cerrar Sesion&quot;</span><span class="p">:</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>         <span class="n">r</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span><span class="n">link</span><span class="o">.</span><span class="n">absolute_url</span><span class="p">)</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>         <span class="k">break</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>     <span class="k">else</span><span class="p">:</span></span></span>
<span class="code-line"><span class="code-line"><span class="o">...</span>         <span class="k">continue</span></span></span>
</pre></div>


<p>Se muestra el código html de la página resultante luego de dar click en cerrar sesión y la figura donde aparece dicho código:  </p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span><span class="nb">print</span> <span class="n">br</span><span class="o">.</span><span class="n">response</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span></span></span>
</pre></div>


<p><img alt="" src="./images/emulandolanavegacionenpythonconmechanizeparte1-8.png"> </p>
<p>En el siguiente artículo sobre <code>mechanize</code> se explicará el uso de formularios más complejos que sólo entrar datos.  </p>
<h2></h2>
<p>¡Haz tu donativo!
Si te gustó el artículo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
dirección: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el código QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"></p>
  </div>
  <div class="tag-cloud">
    <p>
    </p>
  </div>


  <div class="neighbors">
  </div>


    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234566"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https://seraphto.disqus.com';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>&copy; 2022 </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Seraph's Blog ",
  "url" : "https://ecrespo.github.io/en",
  "image": "//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120",
  "description": " Software Libre, Ciencia de Datos y Python"
}
</script>


</body>
</html>