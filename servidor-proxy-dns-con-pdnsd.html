
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/pygments/monokai.min.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/solid.css">


    <link href="https://ecrespo.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Página de Seraph Atom">



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131517246-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#333333">

<meta name="author" content="Ernesto Crespo" />
<meta name="description" content="Ya hace un tiempo había explicado como se instala un servidor proxy DNS con dnsmasq, ahora explicaré la configuración de PDNSD utilizando como servidor de DNS los servidores raíz de OpenNIC debido a los posibles problemas que nos genere la aprobación de la Ley SOPA y la Censura en Internet …" />
<meta name="keywords" content="Canaima, Debian, DNS, General, Linux, Ubuntu">

<meta property="og:site_name" content="Página de Seraph"/>
<meta property="og:title" content="Servidor Proxy DNS con pdnsd"/>
<meta property="og:description" content="Ya hace un tiempo había explicado como se instala un servidor proxy DNS con dnsmasq, ahora explicaré la configuración de PDNSD utilizando como servidor de DNS los servidores raíz de OpenNIC debido a los posibles problemas que nos genere la aprobación de la Ley SOPA y la Censura en Internet …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://ecrespo.github.io/servidor-proxy-dns-con-pdnsd.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2012-01-10 09:00:00-04:30"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://ecrespo.github.io/author/ernesto-crespo.html">
<meta property="article:section" content="Tutorial de Linux"/>
<meta property="article:tag" content="Canaima"/>
<meta property="article:tag" content="Debian"/>
<meta property="article:tag" content="DNS"/>
<meta property="article:tag" content="General"/>
<meta property="article:tag" content="Linux"/>
<meta property="article:tag" content="Ubuntu"/>
<meta property="og:image" content="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120">

  <title>Página de Seraph &ndash; Servidor Proxy DNS con pdnsd</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://ecrespo.github.io">
        <img src="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120" alt="Ernesto Crespo" title="Ernesto Crespo">
      </a>
      <h1><a href="https://ecrespo.github.io">Ernesto Crespo</a></h1>

<p>Data Scientist </p>
      <nav>
        <ul class="list">
          <li><a href="https://ecrespo.github.io/pages/About.html#About">Acerca</a></li>
          <li><a href="https://ecrespo.github.io/pages/Contacto.html#Contacto">Contacto</a></li>

        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-medium" href="https://medium.com/@_seraph1" target="_blank">
            <i class="fab fa-medium">
            </i>
          </a></li>
          <li>
            <a  class="sc-linkedin" href="http://ve.linkedin.com/in/ernestocrespo" target="_blank">
            <i class="fab fa-linkedin">
            </i>
          </a></li>
          <li>
            <a  class="sc-github" href="https://github.com/ecrespo" target="_blank">
            <i class="fab fa-github">
            </i>
          </a></li>
          <li>
            <a  class="sc-google" href="https://google.com/+ErnestoCrespo" target="_blank">
            <i class="fab fa-google">
            </i>
          </a></li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/_seraph1" target="_blank">
            <i class="fab fa-twitter">
            </i>
          </a></li>
          <li>
            <a  class="sc-facebook" href="https://www.facebook.com/ernesto.crespo" target="_blank">
            <i class="fab fa-facebook">
            </i>
          </a></li>
          <li>
            <a  class="sc-gitlab" href="https://gitlab.com/ecrespo" target="_blank">
            <i class="fab fa-gitlab">
            </i>
          </a></li>
          <li>
            <a  class="sc-soundcloud" href="https://soundcloud.com/ernesto-crespo" target="_blank">
            <i class="fab fa-soundcloud">
            </i>
          </a></li>
          <li>
            <a  class="sc-rss" href="//www.seraph.to/feeds/all.atom.xml" target="_blank">
            <i class="fas fa-rss">
            </i>
          </a></li>
      </ul>
    </div>



  </aside>
  <main>

    <nav>
      <a href="https://ecrespo.github.io">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="https://ecrespo.github.io/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="servidor-proxy-dns-con-pdnsd">Servidor Proxy DNS con pdnsd</h1>
    <p>
          Posted on mar 10 enero 2012 in <a href="https://ecrespo.github.io/category/tutorial-de-linux.html">Tutorial de Linux</a>


        &#8226; 3 min read
    </p>
  </header>


  <div>
    <p>Ya hace un tiempo hab&iacute;a explicado como se instala un servidor proxy DNS con <code>dnsmasq</code>, ahora explicar&eacute; la configuraci&oacute;n de <code>PDNSD</code> utilizando como servidor de DNS los servidores ra&iacute;z de <a href="https://es.wikipedia.org/wiki/OpenNIC">OpenNIC</a> debido a los posibles problemas que nos genere la aprobaci&oacute;n de la Ley SOPA y la Censura en Internet.</p>
<p>Si quiere utilizar los servidores de DNS de <code>OpenNIC</code>  m&aacute;s cercanos puede visitar el siguiente <a href="http://wiki.opennicproject.org/ClosestT2Servers">enlace</a>. Si desea m&aacute;s informaci&oacute;n sobre <code>OpenNIC</code> puede revisar el siguiente <a href="http://ww1.linuxerz.org/">art&iacute;culo</a> y la p&aacute;gina del <a href="http://www.opennicproject.org/">proyecto</a>.</p>
<p>En mi caso luego de consultar los servidores de <code>OpenNIC</code> m&aacute;s cercanos usar&eacute; el siguiente servidor de DNS 192.121.86.100.</p>
<p>Instalaci&oacute;n de <code>pdnsd</code>.</p>
<p>En Debian simplemente se ejecuta un <code>apt-get install</code>.  </p>
<p><code>#apt-get install pdnsd</code></p>
<p>La aplicaci&oacute;n muestra una ventana de dialogo donde menciona 3 m&eacute;todos de configuraci&oacute;n (resolvconf, servidores de DNS ra&iacute;z o manual).</p>
<p><img alt="Texto alternativo" src="./images/servidorproxydnsconpdnsd-1.png"/></p>
<p>En este caso se usar&aacute; el m&eacute;todo manual y se selecciona en la ventana de dialogo.</p>
<p><img alt="Texto alternativo" src="./images/servidorproxydnsconpdnsd-2.png"/></p>
<p>Se edita el archivo <code>/etc/pdnsd.conf</code>.  </p>
<p>Se agrega la siguiente informaci&oacute;n:  </p>
<div class="highlight"><pre><span></span>server {
    label = "OpenNIC";
    ip = 192.121.86.100; //IP del servidor DNS
    uptest = query;     //Lrealiza consultas  DNS de una solicitud DNS.
    interface=wlan0;     //La interface conectada a la red.
}
</pre></div>
<p>Se modifica a <code>yes</code> el par&aacute;metro <code>START_DAEMON</code> del archivo <code>/etc/default/pdnsd</code> para iniciar autom&aacute;ticamente el servicio <code>pdnsd</code>.</p>
<p><code>START_DAEMON=yes</code></p>
<p>Al editar el archivo <code>/etc/resolv.conf</code> y agregar el servidor de DNS 127.0.0.1.</p>
<p><code>nameserver 127.0.0.1</code></p>
<p>Se reinicia el servicio <code>pdnsd</code>:  </p>
<div class="highlight"><pre><span></span># invoke-rc.d pdnsd restart
Stopping pdnsd.
Starting pdnsd.
</pre></div>
<p>Se hace una consulta con <code>dig</code>:  </p>
<div class="highlight"><pre><span></span>dig www.barrapunto.com|grep "Query time"
;; Query time: 316 msec

dig www.barrapunto.com|grep "Query time"
;; Query time: 2 msec
</pre></div>
<p>Para verificar el funcionamiento del servidor se ejecuta el siguiente comando:  </p>
<div class="highlight"><pre><span></span># pdnsd-ctl status

Opening socket /var/cache/pdnsd/pdnsd.status

pdnsd-1.2.8-par running on jewel.

Cache status:
=============
2048 kB maximum disk cache size.
56894 of 2107392 bytes (2.7%) memory cache used in 216 entries.

Thread status:
==============
server status thread is running.
pdnsd control thread is running.
tcp server thread is running.
udp server thread is running.
19 query threads spawned in total (0 queries dropped).
10 running query threads (10 active, 0 queued).

Configuration:
==============
Global:
-------
    Cache size: 2048 kB
    Server directory: /var/cache/pdnsd
    Scheme file (for Linux pcmcia support): /var/lib/pcmcia/scheme
    Server port: 53
    Server ip (0.0.0.0=any available one): 127.0.0.1
    Ignore cache when link is down: off
    Maximum ttl: 604800
    Minimum ttl: 900
    Negative ttl: 900
    Negative RRS policy: default
    Negative domain policy: auth
    Run as: pdnsd
    Strict run as: on
    Use NSS: on
    Paranoid mode (cache pollution prevention): on
    Ignore CD ('checking disabled') flag in queries: on
    Control socket permissions (mode): 600
    Maximum parallel queries served: 40
    Maximum queries queued for serving: 60
    Global timeout setting: 10
    Parallel queries increment: 2
    Randomize records in answer: on
    Query method: udp_only
    Query port start: 1024
    Query port end: 65535
    TCP server thread: on
    TCP query timeout: 30
    Delegation-only zones: (none)
Server 0:
------
    label: OpenNIC
    ip: 192.121.86.100
    server assumed available: yes
    port: 53
    uptest: query
    timeout: 120
    uptest interval: 900
    ping timeout: 600
    ping ip: (using server ip)
    interface: wlan0
    device (for special Linux ppp device support):
    uptest command:
    uptest user: (process owner)
    force cache purging: off
    server is cached: on
    lean query: on
    Use only proxy?: off
    Assumed root server: no
    Randomize server query order: no
    Default policy: included
    Policies: (none)
Succeeded
</pre></div>
<p>Se pueden agregar tantas IPS como se quiera.</p>
<p>Si desea m&aacute;s informaci&oacute;n para configurar pdnsd revise los siguientes enlaces:  </p>
<p><a href="https://wiki.archlinux.org/index.php/Pdnsd_(Espa%C3%B1ol)">https://wiki.archlinux.org/index.php/Pdnsd_(Espa%C3%B1ol)</a> </p>
<p><a href="http://manualinux.heliohost.org/pdnsd.html">http://manualinux.heliohost.org/pdnsd.html</a></p>
<h2 id="_1"></h2>
<p>&iexcl;Haz tu donativo!
Si te gust&oacute; el art&iacute;culo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
direcci&oacute;n: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el c&oacute;digo QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"/></p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://ecrespo.github.io/tag/canaima.html">Canaima</a>
      <a href="https://ecrespo.github.io/tag/debian.html">Debian</a>
      <a href="https://ecrespo.github.io/tag/dns.html">DNS</a>
      <a href="https://ecrespo.github.io/tag/general.html">General</a>
      <a href="https://ecrespo.github.io/tag/linux.html">Linux</a>
      <a href="https://ecrespo.github.io/tag/ubuntu.html">Ubuntu</a>
    </p>
  </div>



  <div class="related-posts">
    <h4>    You might enjoy
</h4>
    <ul class="related-posts">
      <li><a href="https://ecrespo.github.io/extraccion-de-datos-de-pagina-web-con-pyquery-y-python.html">Extracción de datos de página web con pyquery y Python</a></li>
      <li><a href="https://ecrespo.github.io/extraccion-de-datos-de-paginas-web-con-scrapemark-y-python.html">Extracción de datos de páginas web con Scrapemark y Python</a></li>
      <li><a href="https://ecrespo.github.io/extraccion-de-datos-en-paginas-web-con-webscraping-y-python.html">Extracción de datos en páginas web con Webscraping y Python</a></li>
      <li><a href="https://ecrespo.github.io/webscraping-o-extraccion-de-datos-de-paginas-web-con-beautifulsoup4-y-python.html">Webscraping o extracción de datos de páginas web con BeautifulSoup4 y Python</a></li>
      <li><a href="https://ecrespo.github.io/una-introduccion-a-beautiful-soup-4-en-python.html">Una introducción a Beautiful Soup 4 en Python.</a></li>
    </ul>
  </div>


<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https://seraphto.disqus.com';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>&copy;  2006</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Página de Seraph ",
  "url" : "https://ecrespo.github.io",
  "image": "//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120",
  "description": " Software Libre, Ciencia de Datos y Python"
}
</script>

</body>
</html>