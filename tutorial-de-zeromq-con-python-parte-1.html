
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/pygments/monokai.min.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/solid.css">


    <link href="https://ecrespo.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Página de Seraph Atom">



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131517246-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#333333">

<meta name="author" content="Ernesto Crespo" />
<meta name="description" content="ZeroMQ es una librería de mensajes, permite crear complejos sistemas de comunicación con poco esfuerzo (sistemas de cola). ZeroMQ es más rápido que otros sistemas de mensajes basados en el protocolo AMQP. En este artículo se explicará un uso sencillo de zeroMQ al estilo cliente y servidor. Se usará el …" />
<meta name="keywords" content="Canaima, Debian, General, Python, ZeroMQ">

<meta property="og:site_name" content="Página de Seraph"/>
<meta property="og:title" content="Tutorial de ZeroMQ con python . Parte 1."/>
<meta property="og:description" content="ZeroMQ es una librería de mensajes, permite crear complejos sistemas de comunicación con poco esfuerzo (sistemas de cola). ZeroMQ es más rápido que otros sistemas de mensajes basados en el protocolo AMQP. En este artículo se explicará un uso sencillo de zeroMQ al estilo cliente y servidor. Se usará el …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://ecrespo.github.io/tutorial-de-zeromq-con-python-parte-1.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2012-05-26 09:00:00-04:30"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://ecrespo.github.io/author/ernesto-crespo.html">
<meta property="article:section" content="Tutorial Python"/>
<meta property="article:tag" content="Canaima"/>
<meta property="article:tag" content="Debian"/>
<meta property="article:tag" content="General"/>
<meta property="article:tag" content="Python"/>
<meta property="article:tag" content="ZeroMQ"/>
<meta property="og:image" content="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120">

  <title>Página de Seraph &ndash; Tutorial de ZeroMQ con python . Parte 1.</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://ecrespo.github.io">
        <img src="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120" alt="Ernesto Crespo" title="Ernesto Crespo">
      </a>
      <h1><a href="https://ecrespo.github.io">Ernesto Crespo</a></h1>

<p>Data Scientist </p>
      <nav>
        <ul class="list">
          <li><a href="https://ecrespo.github.io/pages/About.html#About">Acerca</a></li>
          <li><a href="https://ecrespo.github.io/pages/Contacto.html#Contacto">Contacto</a></li>

        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-medium" href="https://medium.com/@_seraph1" target="_blank">
            <i class="fab fa-medium">
            </i>
          </a></li>
          <li>
            <a  class="sc-linkedin" href="http://ve.linkedin.com/in/ernestocrespo" target="_blank">
            <i class="fab fa-linkedin">
            </i>
          </a></li>
          <li>
            <a  class="sc-github" href="https://github.com/ecrespo" target="_blank">
            <i class="fab fa-github">
            </i>
          </a></li>
          <li>
            <a  class="sc-google" href="https://google.com/+ErnestoCrespo" target="_blank">
            <i class="fab fa-google">
            </i>
          </a></li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/_seraph1" target="_blank">
            <i class="fab fa-twitter">
            </i>
          </a></li>
          <li>
            <a  class="sc-facebook" href="https://www.facebook.com/ernesto.crespo" target="_blank">
            <i class="fab fa-facebook">
            </i>
          </a></li>
          <li>
            <a  class="sc-gitlab" href="https://gitlab.com/ecrespo" target="_blank">
            <i class="fab fa-gitlab">
            </i>
          </a></li>
          <li>
            <a  class="sc-soundcloud" href="https://soundcloud.com/ernesto-crespo" target="_blank">
            <i class="fab fa-soundcloud">
            </i>
          </a></li>
          <li>
            <a  class="sc-rss" href="//www.seraph.to/feeds/all.atom.xml" target="_blank">
            <i class="fas fa-rss">
            </i>
          </a></li>
      </ul>
    </div>



  </aside>
  <main>

    <nav>
      <a href="https://ecrespo.github.io">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="https://ecrespo.github.io/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="tutorial-de-zeromq-con-python-parte-1">Tutorial de ZeroMQ con python . Parte 1.</h1>
    <p>
          Posted on sáb 26 mayo 2012 in <a href="https://ecrespo.github.io/category/tutorial-python.html">Tutorial Python</a>


        &#8226; 2 min read
    </p>
  </header>


  <div>
    <p><a href="http://zeromq.org/">ZeroMQ</a> es una librer&iacute;a de mensajes, permite crear complejos sistemas de comunicaci&oacute;n con poco esfuerzo (sistemas de cola).</p>
<p><code>ZeroMQ</code> es m&aacute;s r&aacute;pido que otros sistemas de mensajes basados en el protocolo <code>AMQP</code>.</p>
<p>En este art&iacute;culo se explicar&aacute; un uso sencillo de zeroMQ al estilo cliente y servidor. Se usar&aacute; el puerto 5000 para la comunicaci&oacute;n entre el cliente y servidor. En el cliente se genera de forma aleatoria 2 n&uacute;meros que se le pasan al servidor que sacar&aacute; una cuenta y devuelve el resultado al cliente quien muestra el resultado en pantalla. La generaci&oacute;n de n&uacute;meros se realiza 1000 veces, luego le pasa al servidor la letra q la cual es la se&ntilde;al para terminar el servidor.</p>
<p>Para instalar <code>zeroMQ</code> para python se tiene que instalar <a href="http://zeromq.org/bindings:python">python-zmq</a> y/o <code>python3-zmq</code> para python3:</p>
<div class="highlight"><pre><span></span>#apt-get install python3-zmq python-zmq
</pre></div>
<p>Servidor: El c&oacute;digo del servidor es el siguiente:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1">#Se importa zeromq</span>
<span class="kn">import</span> <span class="nn">zmq</span>
<span class="c1">#Se crea la instancia del contexto de zmq.</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">zmq</span><span class="o">.</span><span class="n">Context</span><span class="p">()</span>
<span class="c1">#Se define el socket con par&aacute;metro respuesta REP.</span>
<span class="n">socket</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">REP</span><span class="p">)</span>
<span class="c1">#Se asocia la direcci&oacute;n IP y el puerto donde el servidor escucha las peticiones.</span>
<span class="n">socket</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">"tcp://127.0.0.1:5000"</span><span class="p">)</span>
<span class="c1">#Se define un contados</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">1</span>
<span class="c1">#Se genera un ciclo que s&oacute;lo finaliza si se recibe la letra q.</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1">#Se recibe los mensajes.</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
    <span class="c1">#Se consulta si la longitud del mensaje es 1 y es la letra q se termina el ciclo</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">msg</span> <span class="o">==</span> <span class="s2">"q"</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="c1">#Se separa los datos que viene en un string separados por :</span>
    <span class="n">datos</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">":"</span><span class="p">)</span>
    <span class="c1">#se realiza una suma con los datos recibidos.</span>
    <span class="n">resultado</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">datos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">datos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="c1">#Se muestra en pantalla el resultado</span>
    <span class="k">print</span> <span class="s2">"Iteracion: </span><span class="si">%s</span><span class="s2"> ,He recibido: </span><span class="si">%s</span><span class="s2">, el resultado es: </span><span class="si">%s</span><span class="s2"> "</span>  <span class="o">%</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">msg</span><span class="p">,</span><span class="n">resultado</span><span class="p">)</span>
    <span class="c1">#Se env&iacute;a el resultado al cliente</span>
    <span class="n">socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">resultado</span><span class="p">))</span>
    <span class="c1">#Se incrementa el contador.</span>
    <span class="n">c</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
<p>El c&oacute;digo del cliente es el siguiente:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1">#Se importa zeromq y random</span>
<span class="kn">import</span> <span class="nn">zmq</span>
<span class="kn">import</span> <span class="nn">random</span>


<span class="c1">#Se crea la instancia del contexto</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">zmq</span><span class="o">.</span><span class="n">Context</span><span class="p">()</span>


<span class="c1">#Se crea el socket y se para el argumento de petici&oacute;n REQ</span>
<span class="n">socket</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">REQ</span><span class="p">)</span>


<span class="c1">#Se coencta a la IP y puerto donde escucha el servidor</span>
<span class="n">socket</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">"tcp://127.0.0.1:5000"</span><span class="p">)</span>


<span class="c1">#Se genera un ciclo de 1000 repeticiones</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>


    <span class="c1">#Se crea el string con el mensaje, se pasa 2 aargumentos aleatorios</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s2">"</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">))</span>


    <span class="c1">#Se envia el mensaje al servidor</span>
    <span class="n">socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>


    <span class="c1">#Se recibe el mensaje del servidor</span>
    <span class="n">msg_in</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>


    <span class="c1">#Se muestra en patalla los datos y el resultado</span>
    <span class="k">print</span> <span class="s2">"Iteracion: </span><span class="si">%s</span><span class="s2">, Enviado: </span><span class="si">%s</span><span class="s2">, Recibido: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">msg</span><span class="p">,</span><span class="n">msg_in</span><span class="p">)</span>


    <span class="c1">#Si se llea a la iteraci&oacute;n 999 se env&iacute;a la letra q para finalizar</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span>  <span class="mi">999</span><span class="p">:</span> <span class="n">socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">"q"</span><span class="p">)</span>
</pre></div>
<p>El resultado del lado del cliente y del servidor es el siguiente:</p>
<p>La figura muestra la ejecuci&oacute;n del script servidor:</p>
<p><img alt="" src="./images/tutorialdezeromqconpython1-1.png"/> </p>
<p>La figura muestra la ejecuci&oacute;n del script cliente:</p>
<p><img alt="" src="./images/tutorialdezeromqconpython1-2.png"/> </p>
<h2 id="_1"></h2>
<p>&iexcl;Haz tu donativo!
Si te gust&oacute; el art&iacute;culo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
direcci&oacute;n: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el c&oacute;digo QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"/></p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://ecrespo.github.io/tag/canaima.html">Canaima</a>
      <a href="https://ecrespo.github.io/tag/debian.html">Debian</a>
      <a href="https://ecrespo.github.io/tag/general.html">General</a>
      <a href="https://ecrespo.github.io/tag/python.html">Python</a>
      <a href="https://ecrespo.github.io/tag/zeromq.html">ZeroMQ</a>
    </p>
  </div>



  <div class="related-posts">
    <h4>    You might enjoy
</h4>
    <ul class="related-posts">
      <li><a href="https://ecrespo.github.io/tutorial-de-zeromq-con-python-pushpull-parte-6.html">Tutorial de ZeroMQ con Python( PUSH/PULL). Parte 6.</a></li>
      <li><a href="https://ecrespo.github.io/tutorial-de-zeromq-con-python-repreq-y-pubsub-parte-5.html">Tutorial de ZeroMQ con Python (REP/REQ y PUB/SUB). Parte 5.</a></li>
      <li><a href="https://ecrespo.github.io/tutorial-de-zeromq-con-pythonpubsub-parte-4.html">Tutorial de ZeroMQ con Python(PUB/SUB). Parte 4.</a></li>
      <li><a href="https://ecrespo.github.io/tutorial-de-zeromq-con-python-parte-3.html">Tutorial de ZeroMQ con Python. Parte 3.</a></li>
      <li><a href="https://ecrespo.github.io/tutorial-de-zeromq-con-python-parte-2.html">Tutorial de ZeroMQ con Python. Parte 2.</a></li>
    </ul>
  </div>


<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https://seraphto.disqus.com';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>&copy;  2006</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Página de Seraph ",
  "url" : "https://ecrespo.github.io",
  "image": "//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120",
  "description": " Software Libre, Ciencia de Datos y Python"
}
</script>

</body>
</html>