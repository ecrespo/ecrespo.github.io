
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/pygments/monokai.min.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/solid.css">


    <link href="https://ecrespo.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Página de Seraph Atom">



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131517246-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#333333">

<meta name="author" content="Ernesto Crespo" />
<meta name="description" content="Pensaba escribir primero como crear opciones a un menú pero recordé que existe la posibilidad de reproducir una canción mp3 desde python con el API de SL4A. Las opciones que tiene el API de SL4A para reproducir música son las siguientes: mediaIsPlaying: Consulta si la canción se está reproduciendo en …" />
<meta name="keywords" content="Android, Python, Reproductor Música">

<meta property="og:site_name" content="Página de Seraph"/>
<meta property="og:title" content="Reproducir una canción en un Celular con Android desde python"/>
<meta property="og:description" content="Pensaba escribir primero como crear opciones a un menú pero recordé que existe la posibilidad de reproducir una canción mp3 desde python con el API de SL4A. Las opciones que tiene el API de SL4A para reproducir música son las siguientes: mediaIsPlaying: Consulta si la canción se está reproduciendo en …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://ecrespo.github.io/reproducir-una-cancion-en-un-celular-con-android-desde-python.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2011-04-30 09:10:00-04:30"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://ecrespo.github.io/author/ernesto-crespo.html">
<meta property="article:section" content="Tutorial Python en Android"/>
<meta property="article:tag" content="Android"/>
<meta property="article:tag" content="Python"/>
<meta property="article:tag" content="Reproductor Música"/>
<meta property="og:image" content="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120">

  <title>Página de Seraph &ndash; Reproducir una canción en un Celular con Android desde python</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://ecrespo.github.io">
        <img src="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120" alt="Ernesto Crespo" title="Ernesto Crespo">
      </a>
      <h1><a href="https://ecrespo.github.io">Ernesto Crespo</a></h1>

<p>Data Scientist </p>
      <nav>
        <ul class="list">
          <li><a href="https://ecrespo.github.io/pages/About.html#About">Acerca</a></li>
          <li><a href="https://ecrespo.github.io/pages/Contacto.html#Contacto">Contacto</a></li>

        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-medium" href="https://medium.com/@_seraph1" target="_blank">
            <i class="fab fa-medium">
            </i>
          </a></li>
          <li>
            <a  class="sc-linkedin" href="http://ve.linkedin.com/in/ernestocrespo" target="_blank">
            <i class="fab fa-linkedin">
            </i>
          </a></li>
          <li>
            <a  class="sc-github" href="https://github.com/ecrespo" target="_blank">
            <i class="fab fa-github">
            </i>
          </a></li>
          <li>
            <a  class="sc-google" href="https://google.com/+ErnestoCrespo" target="_blank">
            <i class="fab fa-google">
            </i>
          </a></li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/_seraph1" target="_blank">
            <i class="fab fa-twitter">
            </i>
          </a></li>
          <li>
            <a  class="sc-facebook" href="https://www.facebook.com/ernesto.crespo" target="_blank">
            <i class="fab fa-facebook">
            </i>
          </a></li>
          <li>
            <a  class="sc-gitlab" href="https://gitlab.com/ecrespo" target="_blank">
            <i class="fab fa-gitlab">
            </i>
          </a></li>
          <li>
            <a  class="sc-soundcloud" href="https://soundcloud.com/ernesto-crespo" target="_blank">
            <i class="fab fa-soundcloud">
            </i>
          </a></li>
          <li>
            <a  class="sc-rss" href="//www.seraph.to/feeds/all.atom.xml" target="_blank">
            <i class="fas fa-rss">
            </i>
          </a></li>
      </ul>
    </div>



  </aside>
  <main>

    <nav>
      <a href="https://ecrespo.github.io">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="https://ecrespo.github.io/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="reproducir-una-cancion-en-un-celular-con-android-desde-python">Reproducir una canción en un Celular con Android desde python</h1>
    <p>
          Posted on sáb 30 abril 2011 in <a href="https://ecrespo.github.io/category/tutorial-python-en-android.html">Tutorial Python en Android</a>


        &#8226; 3 min read
    </p>
  </header>


  <div>
    <p>Pensaba escribir primero como crear opciones a un  men&uacute; pero record&eacute; que existe la posibilidad de reproducir una canci&oacute;n mp3 desde python con el API de SL4A.</p>
<p>Las opciones que tiene el API de SL4A para reproducir m&uacute;sica son las siguientes:</p>
<ul>
<li>mediaIsPlaying: Consulta si la canci&oacute;n se est&aacute; reproduciendo en ese momento.</li>
<li>mediaPlayInfo: Retorna informaci&oacute;n de la canci&oacute;n.</li>
<li>mediaPlay: Se reproduce la canci&oacute;n.</li>
<li>mediaPlayList:</li>
<li>mediaPlayPause: Se pausa la canci&oacute;n.</li>
<li>mediaPlaySeek: Se reproduce la canci&oacute;n en un tiempo determinado.</li>
<li>mediaPlaySetLooping: Se define si se reproduce de nuevo la canci&oacute;n autom&aacute;ticamente.</li>
<li>mediaPlayStart: Inicia la reproducci&oacute;n del archivo</li>
<li>mediaPlayClose: Se cierra el archivo de la canci&oacute;n.</li>
</ul>
<p>Solamente se utilizar&aacute; en este post las funciones mediaPlay y mediaPlayInfo.</p>
<p>La idea es listar los archivos mp3 en el widget de selecci&oacute;n simple y luego reproducir la canci&oacute;n seleccionada.</p>
<p>Antes de reproducir la canci&oacute;n, se toma informaci&oacute;n de la canci&oacute;n, principalmente la duraci&oacute;n de la canci&oacute;n, ese tiempo es luego manejado por una barra de progreso que avanza  mientras se reproduce la canci&oacute;n.</p>
<p>El c&oacute;digo del programa se muestra a continuaci&oacute;n:</p>
<p>```python</p>
<h1 id="importar el modulo android,path, la funcion sleep,listdir y exit.">Importar el modulo android,path, la funcion sleep,listdir y exit.</h1>
<p>import android
from time import sleep
from os import listdir
from os import path
from sys import exit</p>
<h1 id="la ruta donde se encuentran los mp3s">La ruta donde se encuentran los mp3s</h1>
<p>ruta = "/sdcard/mp3z/"</p>
<h1 id="se crea la instancia de android">Se crea la instancia de android</h1>
<p>droid = android.Android()</p>
<h1 id="se muestra un mensaje si se desea reproducir una cancion.si es si, se reproduce si no se sale del programa.">Se muestra un mensaje si se desea reproducir una cancion.si es si, se reproduce si no se sale del programa.</h1>
<p>droid.dialogCreateAlert("Reproducir una cancion", "Desea reproducir una cancion?")
droid.dialogSetPositiveButtonText('Si')
droid.dialogSetNegativeButtonText('No')
droid.dialogShow()</p>
<h1 id="se captura la respuesta.">Se captura la respuesta.</h1>
<p>respuesta = droid.dialogGetResponse()</p>
<p>if respuesta[1]['which'] == "positive":
    #Se busca los archivos y directorios de la ruta definida.
    archivos = listdir(ruta)
    #Se crea una lista vacia donde se agregaran los nombres de archivos mp3s
    listado = []
    #Se agregan los archivos mp3 a la lista
    for i in archivos:
        #Si es un archivo se agrega a listado, se pasa la ruta y el archivo.
        if path.isfile("%s%s" %(ruta,i)):
            listado.append(i)</p>
<pre><code>#Se muestra un mensaje con la lista de canciones que se pueden reproducir.
droid.dialogCreateAlert("Reproducir una cancion")
droid.dialogSetSingleChoiceItems(listado)
droid.dialogSetPositiveButtonText('Seleccione')
droid.dialogSetNegativeButtonText('Salir')
droid.dialogShow()
#Se captura la respuesta y el item seleccionado
respuesta  = droid.dialogGetResponse().result
item = droid.dialogGetSelectedItems()
#Si la respuesta es positiva se reproduce la cancion
if  respuesta['which'] == "positive":
    droid.makeToast("La cancion selecionada es: %s " %listado[int(item[1][0])])
    sleep(2)
    droid.makeToast("Reproduciendo la cancion")
    #Se agrega a cancion la cancion seleccionada segun la variable item.
    cancion = listado[int(item[1][0])]
    #Se reproduce la cancion pasando la ruta donde esta el archivo y el archivo.
    droid.mediaPlay("%s%s" %(ruta,cancion))
    #Se captura la duracion de la cancion representado en milisegundos
    tiempo = int(droid.mediaPlayInfo()[1]["duration"])
    #Se pasa la duracion de la cancion de milisegundos a segundos
    duracion = int(tiempo /1000)
    #Se crea una barra de progreso con el titulo reproduciendo, mensaje el nombre de la cancion y la duracion.
    droid.dialogCreateHorizontalProgress("Reproduciendo",cancion,duracion)
    #Se muestra el widget.
    droid.dialogShow()
    #Se incrementa el valor de la barra de progreso cada 1 seg.
    for i in range(0,duracion):
        sleep(1)
        droid.dialogSetCurrentProgress(i)
    #Al finalizar la cancion se muestra un mensaje de fin de la cancion y se sale de la aplicacion.
    droid.makeToast("Fin de la reproduccion de la cancion")
    droid.dialogDismiss()
else:
    #Si no se selecciono una cancion se sale del programa
    droid.makeToast("No se selecciono una cancion-Se sale de la aplicacion")
    sleep(1)
</code></pre>
<p>else:
    #Se selecciono que no se desea reproducir una cancion
    droid.makeToast("Fin del programa")
    exit()
```</p>
<p>La siguiente figura muestra la ventana donde se pregunta si se desea reproducir una canci&oacute;n:</p>
<p><img alt="Ejecutar script " src="./images/reproductorandroid1.png"/></p>
<p>La siguiente figura muestra la lista de canciones que se puede reproducir, se selecciona una y luego se le da al bot&oacute;n seleccione.</p>
<p><img alt="Seleccionar mp3" src="./images/reproductorandroid2.png"/></p>
<p>La &uacute;ltima figura muestra el proceso de reproducci&oacute;n de la canci&oacute;n:</p>
<p><img alt="Reproduciendo el mp3" src="./images/reproductorandroid3.png"/></p>
<p>A continuaci&oacute;n se muestra el c&oacute;digo QR del programa:</p>
<p><img alt="C&oacute;digo QR del programa" src="./images/reproducir.png"/></p>
<p>===</p>
<p>&iexcl;Haz tu donativo!
Si te gust&oacute; el art&iacute;culo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
direcci&oacute;n: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el c&oacute;digo QR desde billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"/></p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://ecrespo.github.io/tag/android.html">Android</a>
      <a href="https://ecrespo.github.io/tag/python.html">Python</a>
      <a href="https://ecrespo.github.io/tag/reproductor-musica.html">Reproductor Música</a>
    </p>
  </div>



  <div class="related-posts">
    <h4>    You might enjoy
</h4>
    <ul class="related-posts">
      <li><a href="https://ecrespo.github.io/manejando-contactos-y-realizando-una-llamada-con-python-en-android.html">Manejando contactos y realizando una llamada con python en Android</a></li>
      <li><a href="https://ecrespo.github.io/reproductor-de-video-con-python-y-kivy.html">Reproductor de vídeo con python y kivy</a></li>
      <li><a href="https://ecrespo.github.io/desarrollo-de-aplicaciones-multiplataforma-con-python-y-kivy.html">Desarrollo de aplicaciones multiplataforma con python y kivy</a></li>
      <li><a href="https://ecrespo.github.io/python-en-android-fudcon-valencia-2012.html">Python en Android (FUDcon Valencia 2012)</a></li>
      <li><a href="https://ecrespo.github.io/programa-para-el-envio-de-sms-desde-linux-con-celular-android-conexion-wifi-y-usb.html">Programa para el envío de SMS desde Linux con Celular Android (conexión wifi y USB)</a></li>
    </ul>
  </div>


<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https://seraphto.disqus.com';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>&copy;  2006</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Página de Seraph ",
  "url" : "https://ecrespo.github.io",
  "image": "//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120",
  "description": " Software Libre, Ciencia de Datos y Python"
}
</script>

</body>
</html>