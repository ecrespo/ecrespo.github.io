<!doctype html>
<html lang="es" itemscope itemtype="http://schema.org/Person">
<head>
            <meta charset="utf-8">
        <!-- Site Meta Data -->
        <title>Sqlalchemy y Elixir: Abstracción de Bases de Datos en Python</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="Ernesto Crespo">

        <link rel="shortcut icon" href="">

        <!-- schema.org -->
        <meta itemprop="name" content="Página de Seraph">
        <meta itemprop="image" content="">
        <meta itemprop="description" content="">

        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
        <!-- Style Meta Data -->
        <link rel="stylesheet" href="https://ecrespo.github.io/theme/css/style.css" type="text/css"/>
        <link rel="stylesheet" href="https://ecrespo.github.io/theme/css/pygments.css" type="text/css"/>

        <!-- Feed Meta Data -->
            <link href="https://ecrespo.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
                  title="Página de Seraph ATOM Feed"/>

        <!-- Twitter Feed -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="">
        <meta name="twitter:image" content="">

    <meta name="twitter:creator" content="">
    <meta name="twitter:url" content="https://ecrespo.github.io/sqlalchemy-y-elixir-abstraccion-de-bases-de-datos-en-python.html">
    <meta name="twitter:title" content="Página de Seraph ~ Sqlalchemy y Elixir: Abstracción de Bases de Datos en Python">
    <meta name="twitter:description" content="En el artículo anterior se explica como usar Sqlalchemy para acceder y manipular una base de datos abstrayendo el motor de la base de datos a utilizar. Existe una herramienta que facilita aun más el trabajo de crear tablas, insertar, consultar o remover datos de dichas tablas; Elixir crea una …">

    <!-- Facebook Meta Data -->
    <meta property="og:title" content="Página de Seraph ~ Sqlalchemy y Elixir: Abstracción de Bases de Datos en Python"/>
    <meta property="og:description" content="En el artículo anterior se explica como usar Sqlalchemy para acceder y manipular una base de datos abstrayendo el motor de la base de datos a utilizar. Existe una herramienta que facilita aun más el trabajo de crear tablas, insertar, consultar o remover datos de dichas tablas; Elixir crea una …"/>
    <meta property="og:image" content=""/>
</head>

<body>
<!-- Sidebar -->
<aside>
    <!--<center><a href="https://ecrespo.github.io"><img id="avatar" src=""></a></center>-->
    <h1>Página de Seraph</h1>
    <br>


    <nav class="nav">
        <ul class="list-bare">

                <li><a class="nav__link" href="/archives.html">Archives</a></li>
                <li><a class="nav__link" href="/categories.html">Categories</a></li>
                <li><a class="nav__link" href="/tags.html">Tags</a></li>

                <li><a class="nav__link" href="https://ecrespo.github.io/pages/About.html">Acerca</a></li>
                <li><a class="nav__link" href="https://ecrespo.github.io/pages/Contacto.html">Contacto</a></li>

        </ul>
    </nav>

    <p class="social">
                <a href="https://medium.com/@_seraph1" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/medium.png"></a>
                <a href="http://ve.linkedin.com/in/ernestocrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/linkedin.png"></a>
                <a href="https://github.com/ecrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/github.png"></a>
                <a href="https://google.com/+ErnestoCrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/google.png"></a>
                <a href="https://twitter.com/_seraph1" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/twitter.png"></a>
                <a href="https://www.facebook.com/ernesto.crespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/facebook.png"></a>
                <a href="https://gitlab.com/ecrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/gitlab.png"></a>
                <a href="https://soundcloud.com/ernesto-crespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/soundcloud.png"></a>
                <a href="//www.seraph.to/feeds/all.atom.xml" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/rss.png"></a>
            <a href="https://ecrespo.github.io/feeds/all.atom.xml" rel="alternate">
                <img src="https://ecrespo.github.io/theme/images/icons/rss.png"></a>
    </p>

        <h2>Categories</h2>
        <ul class="navbar">
                <li><a
                        href="https://ecrespo.github.io/category/accesibilidad.html">Accesibilidad</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/anuncio.html">Anuncio</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/anuncios.html">Anuncios</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/aplicacion-android.html">Aplicación Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/asterisk-debian-linux.html">Asterisk, Debian, Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/charla.html">Charla</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/charla-python.html">Charla Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/debian-linux-mac-book.html">Debian, Linux, Mac Book</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/debian-maemo-nokia-n810-python.html">Debian, maemo, Nokia N810, Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/demostracion-aplicacion-para-android.html">Demostración Aplicación para Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/desarrollomovil.html">Desarrollo,Movil</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/evento.html">Evento</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/general.html">General</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linux.html">Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxdebian.html">Linux,Debian</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxdesarrollo.html">Linux,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxempaquetado.html">Linux,Empaquetado</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxofimaticadesarrollo.html">Linux,Ofimatica,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/movil-nokia.html">Movil, Nokia</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/nokia-n810.html">Nokia N810</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/nokia-n810-debian-maemo.html">Nokia N810 Debian Maemo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/posts.html">posts</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/resumen-2010.html">Resumen 2010</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/sistemas-operativos.html">Sistemas Operativos</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial.html">Tutorial</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-android.html">Tutorial Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-arduino.html">Tutorial de Arduino</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-data-science.html">Tutorial de Data Science</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-docker.html">Tutorial de Docker</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-integracion-continua.html">Tutorial de integración continua</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-linux.html">Tutorial de Linux</a></li>
                <li class="active"><a
                        href="https://ecrespo.github.io/category/tutorial-de-python.html">Tutorial de Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-en-android.html">Tutorial de Python en Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-y-linux.html">Tutorial de Python y Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-y-pyqt.html">Tutorial de Python y PyQt</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-debian-bsd-y-python.html">Tutorial Debian BSD y Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-linux.html">Tutorial Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-linux-y-python.html">Tutorial Linux y Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-python.html">Tutorial Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-python-en-android.html">Tutorial Python en Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-python-y-linux.html">Tutorial Python y Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorialdesarrollo.html">Tutorial,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/xml-rpcpython.html">XML-RPC,Python</a></li>
        </ul>


</aside>

<!-- Content -->
<article>
    <section id="content">
        <article>
            <h2 class="post_title post_detail"><a href="https://ecrespo.github.io/sqlalchemy-y-elixir-abstraccion-de-bases-de-datos-en-python.html" rel="bookmark"
                                                  title="Permalink to Sqlalchemy y Elixir: Abstracción de Bases de Datos en Python">Sqlalchemy y Elixir: Abstracción de Bases de Datos en Python</a></h2>
            <div class="entry-content blog-post">
                <p>En el artículo <a href="https://www.seraph.to/sqlite-con-python.html">anterior</a> se explica como usar <code>Sqlalchemy</code> para acceder y manipular una base de datos abstrayendo el motor de la base de datos a utilizar.</p>
<p>Existe una herramienta que facilita aun más el trabajo de crear tablas, insertar, consultar o remover datos de dichas tablas; <a href="http://elixir.ematia.de/trac/wiki">Elixir</a> crea una capa declarativa sobre <code>slqalchemy</code> que permite usar la declaración de clases directamente a las tablas de entidad relación.</p>
<p>Igual que en el ejemplo anterior se usará las tablas Grupos y Contactos, la diferencia será que no será necesario definir un campo id para cada tabla, además la forma de declarar cual campo es primary key o foreign key es con la declaración de uno a muchos o de muchos a uno.</p>
<p>Este ejemplo crea las tablas, se realiza una inserción de datos a ambas tablas, se realiza unas consultas de datos y al final se elimina y dato de la tabla Contactos y se muestra que ya se elimino de dicha tabla.</p>
<p>El código python se muestra a continuación:  </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">elixir</span> <span class="kn">import</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">Entity</span><span class="p">,</span> <span class="n">Field</span>
<span class="kn">from</span> <span class="nn">elixir</span> <span class="kn">import</span> <span class="n">Unicode</span><span class="p">,</span> <span class="n">UnicodeText</span>
<span class="kn">from</span> <span class="nn">elixir</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1">#Se asocia el metadato con la base de datos sqlite</span>
<span class="n">metadata</span><span class="o">.</span><span class="n">bind</span> <span class="o">=</span> <span class="s2">&quot;sqlite:///prueba.db&quot;</span>
<span class="c1">#Se activa el echo de los resultados de los comandos.</span>
<span class="n">metadata</span><span class="o">.</span><span class="n">bind</span><span class="o">.</span><span class="n">echo</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1">#Se crea la clase Grupos que hereda Entity, </span>
<span class="c1">#se crea los campos grupo (unicode 150),</span>
<span class="c1">#descripcion (unicode 200) y</span>
<span class="c1">#contactos que es una referencia uno a muchos de la </span>
<span class="c1">#clase Contactos.</span>
<span class="k">class</span> <span class="nc">Grupos</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
<span class="n">grupo</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">Unicode</span><span class="p">(</span><span class="mi">150</span><span class="p">))</span>
<span class="n">descripcion</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">Unicode</span><span class="p">(</span><span class="mi">200</span><span class="p">))</span>
<span class="n">contactos</span> <span class="o">=</span> <span class="n">OneToMany</span><span class="p">(</span><span class="s1">&#39;Contactos&#39;</span><span class="p">)</span>

<span class="c1">#Devuelve la informacion de los grupos</span>
<span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="k">return</span> <span class="s1">&#39;&lt;Grupos &quot;</span><span class="si">%s</span><span class="s1">&quot; (</span><span class="si">%s</span><span class="s1">)&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grupo</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">descripcion</span><span class="p">)</span>

<span class="c1">#Se crea la clase contactos que hereda de Entity.</span>
<span class="c1">#se tiene el campo nombre (unicode 100),</span>
<span class="c1">#telefono (string 11) y el campo grupo muchos a uno de grupos.</span>
<span class="k">class</span> <span class="nc">Contactos</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
<span class="n">nombre</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">Unicode</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
<span class="n">telefono</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span>
<span class="n">grupo</span> <span class="o">=</span> <span class="n">ManyToOne</span><span class="p">(</span><span class="s1">&#39;Grupos&#39;</span><span class="p">)</span>

<span class="c1">#Devuelve la informacion de los contactos</span>
<span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="k">return</span> <span class="s1">&#39;&lt;Contactos- nombre: &quot;</span><span class="si">%s</span><span class="s1">&quot;, telefono: &quot;</span><span class="si">%s</span><span class="s1">&quot;, grupo: &quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nombre</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">telefono</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">grupo</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="c1">#Se importa create_all, setup_all y session de elixir.</span>
<span class="kn">from</span> <span class="nn">elixir</span> <span class="kn">import</span> <span class="n">create_all</span><span class="p">,</span> <span class="n">setup_all</span><span class="p">,</span> <span class="n">session</span>
<span class="c1">#Se crea las clases segun los modelos.</span>
<span class="n">setup_all</span><span class="p">()</span>
<span class="c1">#Se crea las tablas en la base de datos segun los modelos definidos</span>
<span class="n">create_all</span><span class="p">()</span>

<span class="c1">#Se insertan datos en la tabla grupos</span>
<span class="c1">#En este caso se agregan ciudades del pais.</span>
<span class="n">Guacara</span> <span class="o">=</span> <span class="n">Grupos</span><span class="p">(</span><span class="n">grupo</span><span class="o">=</span><span class="s1">&#39;Guacara&#39;</span><span class="p">,</span><span class="n">descripcion</span><span class="o">=</span><span class="s1">&#39;Ciudad del Estado Carabobo&#39;</span><span class="p">)</span>
<span class="n">Valencia</span> <span class="o">=</span> <span class="n">Grupos</span><span class="p">(</span><span class="n">grupo</span><span class="o">=</span><span class="s2">&quot;Valencia&quot;</span><span class="p">,</span><span class="n">descripcion</span><span class="o">=</span><span class="s2">&quot;Capital del Estado Carabobo&quot;</span><span class="p">)</span>
<span class="n">Barquisimeto</span> <span class="o">=</span> <span class="n">Grupos</span><span class="p">(</span><span class="n">grupo</span><span class="o">=</span><span class="s2">&quot;Barquisimeto&quot;</span><span class="p">,</span><span class="n">descripcion</span><span class="o">=</span><span class="s2">&quot;Capital del Estado Lara&quot;</span><span class="p">)</span>
<span class="n">Caracas</span> <span class="o">=</span> <span class="n">Grupos</span><span class="p">(</span><span class="n">grupo</span><span class="o">=</span><span class="s2">&quot;Caracas&quot;</span><span class="p">,</span><span class="n">descripcion</span><span class="o">=</span><span class="s2">&quot;Distrito Capital&quot;</span><span class="p">)</span>
<span class="n">Maracaibo</span> <span class="o">=</span> <span class="n">Grupos</span><span class="p">(</span><span class="n">grupo</span><span class="o">=</span><span class="s2">&quot;Maracaibo&quot;</span><span class="p">,</span><span class="n">descripcion</span><span class="o">=</span><span class="s2">&quot;Capital del Estado Zulia&quot;</span><span class="p">)</span>
<span class="n">Merida</span> <span class="o">=</span> <span class="n">Grupos</span><span class="p">(</span><span class="n">grupo</span><span class="o">=</span><span class="s2">&quot;Merida&quot;</span><span class="p">,</span><span class="n">descripcion</span><span class="o">=</span><span class="s2">&quot;Capital del Estado Merida&quot;</span><span class="p">)</span>
<span class="n">Barcelona</span> <span class="o">=</span> <span class="n">Grupos</span><span class="p">(</span><span class="n">grupo</span><span class="o">=</span><span class="s2">&quot;Barcelona&quot;</span><span class="p">,</span><span class="n">descripcion</span><span class="o">=</span><span class="s2">&quot;Capital de Anzoategui&quot;</span><span class="p">)</span>
<span class="n">PuertoOrdaz</span> <span class="o">=</span> <span class="n">Grupos</span><span class="p">(</span><span class="n">grupo</span><span class="o">=</span><span class="s2">&quot;Puerto Ordaz&quot;</span><span class="p">,</span><span class="n">descripcion</span><span class="o">=</span><span class="s2">&quot;Ciudad del Estado Bolivar&quot;</span><span class="p">)</span>
<span class="n">Barinas</span> <span class="o">=</span> <span class="n">Grupos</span><span class="p">(</span><span class="n">grupo</span><span class="o">=</span><span class="s2">&quot;Barinas&quot;</span><span class="p">,</span><span class="n">descripcion</span><span class="o">=</span><span class="s2">&quot;Capital del Estado Barinas&quot;</span><span class="p">)</span>
<span class="n">Maracay</span> <span class="o">=</span> <span class="n">Grupos</span><span class="p">(</span><span class="n">grupo</span><span class="o">=</span><span class="s2">&quot;Maracay&quot;</span><span class="p">,</span><span class="n">descripcion</span><span class="o">=</span><span class="s2">&quot;Capital del Estado Aragua&quot;</span><span class="p">)</span>
<span class="n">LosTeques</span> <span class="o">=</span> <span class="n">Grupos</span><span class="p">(</span><span class="n">grupo</span><span class="o">=</span><span class="s2">&quot;Los Teques&quot;</span><span class="p">,</span><span class="n">descripcion</span><span class="o">=</span><span class="s2">&quot;Capital del Estado Miranda&quot;</span><span class="p">)</span>

<span class="c1">#Se hace el commit para insertar los datos de la tabla grupos en la base de datos.</span>
<span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

<span class="c1">#Se insertan datos en la tabla contactos, cada contacto hace referencia a un grupo de </span>
<span class="c1">#la tabla grupos.</span>
<span class="n">Contactos</span><span class="p">(</span><span class="n">nombre</span><span class="o">=</span><span class="s1">&#39;Ernesto Nadir Crespo Avila&#39;</span><span class="p">,</span><span class="n">telefono</span><span class="o">=</span><span class="s1">&#39;04205873118&#39;</span><span class="p">,</span><span class="n">grupo</span><span class="o">=</span><span class="n">Guacara</span><span class="p">)</span>
<span class="n">Contactos</span><span class="p">(</span><span class="n">nombre</span><span class="o">=</span><span class="s1">&#39;Jhon Doe&#39;</span><span class="p">,</span><span class="n">telefono</span><span class="o">=</span><span class="s1">&#39;04295333131&#39;</span><span class="p">,</span><span class="n">grupo</span><span class="o">=</span><span class="n">Valencia</span><span class="p">)</span>
<span class="n">Contactos</span><span class="p">(</span><span class="n">nombre</span><span class="o">=</span><span class="s1">&#39;Jane Doe&#39;</span><span class="p">,</span><span class="n">telefono</span><span class="o">=</span><span class="s1">&#39;04399991919&#39;</span><span class="p">,</span><span class="n">grupo</span><span class="o">=</span><span class="n">Caracas</span><span class="p">)</span>
<span class="n">Contactos</span><span class="p">(</span><span class="n">nombre</span><span class="o">=</span><span class="s1">&#39;Pedro Perez&#39;</span><span class="p">,</span><span class="n">telefono</span><span class="o">=</span><span class="s1">&#39;04596661617&#39;</span><span class="p">,</span><span class="n">grupo</span><span class="o">=</span><span class="n">Caracas</span><span class="p">)</span>
<span class="n">Contactos</span><span class="p">(</span><span class="n">nombre</span><span class="o">=</span><span class="s1">&#39;Maria Perez&#39;</span><span class="p">,</span><span class="n">telefono</span><span class="o">=</span><span class="s1">&#39;04194445445&#39;</span><span class="p">,</span><span class="n">grupo</span><span class="o">=</span><span class="n">Barquisimeto</span><span class="p">)</span>
<span class="c1">#Se hace el commit para insertar los datos en la tabla contactos en la base de datos.</span>
<span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

<span class="c1">#Se realiza una consulta buscando los contactos del grupo Caracas</span>
<span class="c1">#Y se presentan en pantalla</span>
<span class="n">registros</span> <span class="o">=</span> <span class="n">Contactos</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Contactos</span><span class="o">.</span><span class="n">grupo</span> <span class="o">==</span> <span class="n">Caracas</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="nb">print</span> <span class="s2">&quot;Contactos de Caracas&quot;</span>
<span class="k">for</span> <span class="n">registro</span> <span class="ow">in</span> <span class="n">registros</span><span class="p">:</span>
<span class="nb">print</span> <span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">20</span>
<span class="nb">print</span> <span class="n">registro</span><span class="o">.</span><span class="n">nombre</span>
<span class="nb">print</span> <span class="n">registro</span><span class="o">.</span><span class="n">telefono</span>
<span class="nb">print</span> <span class="n">registro</span><span class="o">.</span><span class="n">grupo</span>
<span class="nb">print</span> <span class="s2">&quot;*-&quot;</span> <span class="o">*</span><span class="mi">20</span>

<span class="c1">#Se muestra en pantalla todos los contactos.</span>
<span class="n">registros</span> <span class="o">=</span> <span class="n">Contactos</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="nb">print</span> <span class="s2">&quot;Todos los Contactos&quot;</span>
<span class="k">for</span> <span class="n">registro</span> <span class="ow">in</span> <span class="n">registros</span><span class="p">:</span>
<span class="nb">print</span> <span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">20</span>
<span class="nb">print</span> <span class="n">registro</span><span class="o">.</span><span class="n">nombre</span>
<span class="nb">print</span> <span class="n">registro</span><span class="o">.</span><span class="n">telefono</span>
<span class="nb">print</span> <span class="n">registro</span><span class="o">.</span><span class="n">grupo</span>
<span class="nb">print</span> <span class="s2">&quot;*-&quot;</span> <span class="o">*</span><span class="mi">20</span>
<span class="c1">#Se muestra en pantalla todos los grupos, con sus contactos</span>
<span class="c1">#asociados.</span>
<span class="n">registros</span> <span class="o">=</span> <span class="n">Grupos</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="k">for</span> <span class="n">registro</span> <span class="ow">in</span> <span class="n">registros</span><span class="p">:</span>
<span class="nb">print</span> <span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">20</span>
<span class="nb">print</span> <span class="n">registro</span><span class="o">.</span><span class="n">grupo</span>
<span class="nb">print</span> <span class="n">registro</span><span class="o">.</span><span class="n">descripcion</span>
<span class="nb">print</span> <span class="n">registro</span><span class="o">.</span><span class="n">contactos</span>
<span class="nb">print</span> <span class="s2">&quot;*-&quot;</span> <span class="o">*</span><span class="mi">20</span>
<span class="c1">#Se consulta la tabla contactos buscando al usuario Maria Perez</span>
<span class="c1">#Se muestra en pantalla la informacion de ese contacto</span>
<span class="n">consulta</span> <span class="o">=</span> <span class="n">Contactos</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">nombre</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;Maria Perez&#39;</span><span class="p">)</span>
<span class="n">registro</span> <span class="o">=</span> <span class="n">consulta</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="nb">print</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> , </span><span class="si">%s</span><span class="s2"> :(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">registro</span><span class="o">.</span><span class="n">nombre</span><span class="p">,</span><span class="n">registro</span><span class="o">.</span><span class="n">telefono</span><span class="p">,</span> <span class="n">registro</span><span class="o">.</span><span class="n">grupo</span><span class="p">)</span>
<span class="c1"># Se borra ese contacto de la tabla contactos y se actualiza la base de datos.</span>
<span class="n">registro</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

<span class="c1">#Se muestra en pantalla todos los contactos</span>
<span class="c1">#para hacer notar que ya el contacto Maria Perez no existe</span>
<span class="c1">#en la base de datos.</span>
<span class="n">registros</span> <span class="o">=</span> <span class="n">Contactos</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="nb">print</span> <span class="s2">&quot;Contactos, luego de eliminar a Maria Perez&quot;</span>
<span class="k">for</span> <span class="n">registro</span> <span class="ow">in</span> <span class="n">registros</span><span class="p">:</span>
<span class="nb">print</span> <span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">20</span>
<span class="nb">print</span> <span class="n">registro</span><span class="o">.</span><span class="n">nombre</span>
<span class="nb">print</span> <span class="n">registro</span><span class="o">.</span><span class="n">telefono</span>
<span class="nb">print</span> <span class="n">registro</span><span class="o">.</span><span class="n">grupo</span>
</code></pre></div>
</td></tr></table>
<p>El código SQL generado a partir del modelo es el siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">__main___grupos</span> <span class="p">(</span>
<span class="n">id</span> <span class="nb">INTEGER</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span> 
<span class="n">grupo</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">150</span><span class="p">),</span> 
<span class="n">descripcion</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span> 
<span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span>


<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">__main___contactos</span> <span class="p">(</span>
<span class="n">id</span> <span class="nb">INTEGER</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span> 
<span class="n">nombre</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> 
<span class="n">telefono</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span> 
<span class="n">grupo_id</span> <span class="nb">INTEGER</span><span class="p">,</span> 
<span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">id</span><span class="p">),</span> 
<span class="k">CONSTRAINT</span> <span class="n">__main___contactos_grupo_id_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">grupo_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">__main___grupos</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>

<p>Con respecto al modelo el código <code>SQL</code> si tiene los campos <code>id</code> como <code>PRIMARY KEY</code> en cada tabla y se define cuales son <code>FOREIGN KEY</code>, gracias a <code>Elixir</code> se ahorra trabajo en la definición de campos y al usar <code>OneToMany</code> o <code>ManyToOne</code> se está definiendo quienes son primary o foreign key.</p>
<p>El resultado del script se muestra a continuación:  </p>
<div class="highlight"><pre><span></span><code><span class="gh">Contactos de Caracas</span>
<span class="gh">--------------------</span>
Jane Doe
04399991919
<span class="gh">&lt;Grupos &quot;Caracas&quot; (Distrito Capital)&gt;</span>
<span class="gh">--------------------</span>
Pedro Perez
04596661617
<span class="nt">&lt;Grupos &quot;Caracas&quot; (Distrito Capital)&gt;</span>
<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-
<span class="gh">Todos los Contactos</span>
<span class="gh">--------------------</span>
Ernesto Nadir Crespo Avila
04205873118
<span class="gh">&lt;Grupos &quot;Guacara&quot; (Ciudad del Estado Carabobo)&gt;</span>
<span class="gh">--------------------</span>
Jhon Doe
04295333131
<span class="gh">&lt;Grupos &quot;Valencia&quot; (Capital del Estado Carabobo)&gt;</span>
<span class="gh">--------------------</span>
Jane Doe
04399991919
<span class="gh">&lt;Grupos &quot;Caracas&quot; (Distrito Capital)&gt;</span>
<span class="gh">--------------------</span>
Pedro Perez
04596661617
<span class="gh">&lt;Grupos &quot;Caracas&quot; (Distrito Capital)&gt;</span>
<span class="gh">--------------------</span>
Maria Perez
04194445445
<span class="nt">&lt;Grupos &quot;Barquisimeto&quot; (Capital del Estado Lara)&gt;</span>
<span class="gh">*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-</span>
<span class="gh">--------------------</span>
Guacara
Ciudad del Estado Carabobo
<span class="gh">[&lt;Contactos- nombre: &quot;Ernesto Nadir Crespo Avila&quot;, telefono: &quot;04205873118&quot;, grupo: &quot;&lt;Grupos &quot;Guacara&quot; (Ciudad del Estado Carabobo)&gt;&quot;&gt;]</span>
<span class="gh">--------------------</span>
Valencia
Capital del Estado Carabobo
<span class="gh">[&lt;Contactos- nombre: &quot;Jhon Doe&quot;, telefono: &quot;04295333131&quot;, grupo: &quot;&lt;Grupos &quot;Valencia&quot; (Capital del Estado Carabobo)&gt;&quot;&gt;]</span>
<span class="gh">--------------------</span>
Barquisimeto
Capital del Estado Lara
<span class="gh">[&lt;Contactos- nombre: &quot;Maria Perez&quot;, telefono: &quot;04194445445&quot;, grupo: &quot;&lt;Grupos &quot;Barquisimeto&quot; (Capital del Estado Lara)&gt;&quot;&gt;]</span>
<span class="gh">--------------------</span>
Caracas
Distrito Capital
[<span class="nt">&lt;Contactos- nombre: &quot;Jane Doe&quot;, telefono: &quot;04399991919&quot;, grupo: &quot;&lt;Grupos &quot;Caracas&quot; (Distrito Capital)&gt;</span>&quot;&gt;,  
<span class="gh">&lt;Contactos- nombre: &quot;Pedro Perez&quot;, telefono: &quot;04596661617&quot;, grupo: &quot;&lt;Grupos &quot;Caracas&quot; (Distrito Capital)&gt;&quot;&gt;]</span>
<span class="gh">--------------------</span>
Maracaibo
Capital del Estado Zulia
<span class="gh">[]</span>
<span class="gh">--------------------</span>
Merida
Capital del Estado Merida
<span class="gh">[]</span>
<span class="gh">--------------------</span>
Barcelona
Capital de Anzoategui
<span class="gh">[]</span>
<span class="gh">--------------------</span>
Puerto Ordaz
Ciudad del Estado Bolivar
<span class="gh">[]</span>
<span class="gh">--------------------</span>
Barinas
Capital del Estado Barinas
<span class="gh">[]</span>
<span class="gh">--------------------</span>
Maracay
Capital del Estado Aragua
<span class="gh">[]</span>
<span class="gh">--------------------</span>
Los Teques
Capital del Estado Miranda
[]
<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-<span class="ge">*-*</span>-
Maria Perez , 04194445445 :(&lt;Grupos &quot;Barquisimeto&quot; (Capital del Estado Lara)&gt;)
<span class="gh">Contactos, luego de eliminar a Maria Perez</span>
<span class="gh">--------------------</span>
Ernesto Nadir Crespo Avila
04205873118
<span class="gh">&lt;Grupos &quot;Guacara&quot; (Ciudad del Estado Carabobo)&gt;</span>
<span class="gh">--------------------</span>
Jhon Doe
04295333131
<span class="gh">&lt;Grupos &quot;Valencia&quot; (Capital del Estado Carabobo)&gt;</span>
<span class="gh">--------------------</span>
Jane Doe
04399991919
<span class="gh">&lt;Grupos &quot;Caracas&quot; (Distrito Capital)&gt;</span>
<span class="gh">--------------------</span>
Pedro Perez
04596661617
<span class="nt">&lt;Grupos &quot;Caracas&quot; (Distrito Capital)&gt;</span>
</code></pre></div>

<p>Las herramientas <code>sqlalchemy</code> y <code>Elixir</code> facilitan el trabajo de abstraer el motor de base de datos y la creación de las tablas con sus respectivos campos en dichas base de datos.  De está forma se puede crear aplicaciones donde se puede facilitar el uso de varios motores de base de datos realizando cambios mínimos en la aplicación.</p>
<h2></h2>
<p>¡Haz tu donativo!
Si te gustó el artículo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
dirección: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el código QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"></p>
            </div>
            <div class="post_list">
                <span>By </span>
                <a href="https://ecrespo.github.io/author/ernesto-crespo.html">@Ernesto Crespo</a>
                <span> in </span>
                <span class="post_category"><a href="https://ecrespo.github.io/category/tutorial-de-python.html" rel="bookmark"
                                               title="Permalink to Tutorial de Python">[ Tutorial de Python ]</a></span>
                <span class="post_date">dom 08 abril 2012</span>
                <div><span>Tags : </span>
                            <span><a href="https://ecrespo.github.io/tag/debian.html">#Debian, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/general.html">#General, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/python.html">#Python, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/ubuntu.html">#Ubuntu, </a></span>
                </div>

                <div class="entry-social">
                    <span class="twitter"><a target="_blank" rel="nofollow"
                                             onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=700');return false;"
                                             title="Twitter"
                                             href="https://twitter.com/share?url=https://ecrespo.github.io/sqlalchemy-y-elixir-abstraccion-de-bases-de-datos-en-python.html&text=Sqlalchemy y Elixir: Abstracción de Bases de Datos en Python&via="><img
                            src="https://ecrespo.github.io/theme/images/icons/twitter-s.png"></a></span>

                    <span class="gplus"><a target="_blank" title="Google +"
                                           href="https://plus.google.com/share?url=https://ecrespo.github.io/sqlalchemy-y-elixir-abstraccion-de-bases-de-datos-en-python.html&hl=fr"
                                           rel="nofollow"
                                           onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img
                            src="https://ecrespo.github.io/theme/images/icons/google-s.png"></a></span>

                    <span class="facebook"><a target="_blank" title="Facebook" rel="nofollow"
                                              onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=700');return false;"
                                              href="https://www.facebook.com/sharer.php?u=https://ecrespo.github.io/sqlalchemy-y-elixir-abstraccion-de-bases-de-datos-en-python.html&t=Sqlalchemy y Elixir: Abstracción de Bases de Datos en Python"><img
                            src="https://ecrespo.github.io/theme/images/icons/facebook-s.png"></a></span>

                    <a target="_blank" title="Linkedin"
                       href="https://www.linkedin.com/shareArticle?mini=true&url=https://ecrespo.github.io/sqlalchemy-y-elixir-abstraccion-de-bases-de-datos-en-python.html&title=Sqlalchemy y Elixir: Abstracción de Bases de Datos en Python"
                       rel="nofollow"
                       onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img
                            src="https://ecrespo.github.io/theme/images/icons/linkedin-s.png"></a>

                    <span class="mail"><a
                            href="mailto:?subject=Sqlalchemy y Elixir: Abstracción de Bases de Datos en Python&amp;body=Viens découvrir un article à propos de [Sqlalchemy y Elixir: Abstracción de Bases de Datos en Python] sur le site de Ernesto Crespo. https://ecrespo.github.io/sqlalchemy-y-elixir-abstraccion-de-bases-de-datos-en-python.html"
                            title="Share by Email" target="_blank"><img
                            src="https://ecrespo.github.io/theme/images/icons/mail-s.png"></a></span>
                </div>
            </div>
                <div class="comments">
                    <h2>Comments !</h2>
                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                        var disqus_identifier = "sqlalchemy-y-elixir-abstraccion-de-bases-de-datos-en-python.html";
                        (function () {
                            var dsq = document.createElement('script');
                            dsq.type = 'text/javascript';
                            dsq.async = true;
                            dsq.src = 'https://https://seraphto.disqus.com.disqus.com/embed.js';
                            (document.getElementsByTagName('head')[0] ||
                            document.getElementsByTagName('body')[0]).appendChild(dsq);
                        })();
                    </script>
                </div>
        </article>
    </section>
</article>

<!-- Footer -->
    <footer>
        <p>
            Blog powered by <a href="http://getpelican.com/">Pelican</a>,
            which takes great advantage of <a href="http://python.org">Python</a>.
            Theme <a href="https://github.com/parbhat/pelican-blue">Pelican-Blue</a> by <a
                href="https://parbhatpuri.com/">@parbhat</a>.
        </p>
    </footer>

    <!-- Analytics -->
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-131517246-1']);
        _gaq.push(['_trackPageview']);
        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>

</body>
</html>