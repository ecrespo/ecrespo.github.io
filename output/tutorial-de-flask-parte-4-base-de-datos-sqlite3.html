<!doctype html>
<html lang="es" itemscope itemtype="http://schema.org/Person">
<head>
            <meta charset="utf-8">
        <!-- Site Meta Data -->
        <title>Tutorial de Flask parte 4 (base de datos sqlite3)</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="Ernesto Crespo">

        <link rel="shortcut icon" href="">

        <!-- schema.org -->
        <meta itemprop="name" content="Página de Seraph">
        <meta itemprop="image" content="">
        <meta itemprop="description" content="">

        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
        <!-- Style Meta Data -->
        <link rel="stylesheet" href="https://ecrespo.github.io/theme/css/style.css" type="text/css"/>
        <link rel="stylesheet" href="https://ecrespo.github.io/theme/css/pygments.css" type="text/css"/>

        <!-- Feed Meta Data -->
            <link href="https://ecrespo.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
                  title="Página de Seraph ATOM Feed"/>

        <!-- Twitter Feed -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="">
        <meta name="twitter:image" content="">

    <meta name="twitter:creator" content="">
    <meta name="twitter:url" content="https://ecrespo.github.io/tutorial-de-flask-parte-4-base-de-datos-sqlite3.html">
    <meta name="twitter:title" content="Página de Seraph ~ Tutorial de Flask parte 4 (base de datos sqlite3)">
    <meta name="twitter:description" content="Continuando con la serie de tutoriales sobre Flask, en este caso se tocará el tema de base de datos, usando sqlite3. Este artículo se basa en el artículo en Inglés de The Flask Mega tutorial, Part IV: Database. Los artículos anteriores son: Tutorial de Flask parte 1. Tutorial de Flask …">

    <!-- Facebook Meta Data -->
    <meta property="og:title" content="Página de Seraph ~ Tutorial de Flask parte 4 (base de datos sqlite3)"/>
    <meta property="og:description" content="Continuando con la serie de tutoriales sobre Flask, en este caso se tocará el tema de base de datos, usando sqlite3. Este artículo se basa en el artículo en Inglés de The Flask Mega tutorial, Part IV: Database. Los artículos anteriores son: Tutorial de Flask parte 1. Tutorial de Flask …"/>
    <meta property="og:image" content=""/>
</head>

<body>
<!-- Sidebar -->
<aside>
    <!--<center><a href="https://ecrespo.github.io"><img id="avatar" src=""></a></center>-->
    <h1>Página de Seraph</h1>
    <br>


    <nav class="nav">
        <ul class="list-bare">

                <li><a class="nav__link" href="/archives.html">Archives</a></li>
                <li><a class="nav__link" href="/categories.html">Categories</a></li>
                <li><a class="nav__link" href="/tags.html">Tags</a></li>

                <li><a class="nav__link" href="https://ecrespo.github.io/pages/About.html">Acerca</a></li>
                <li><a class="nav__link" href="https://ecrespo.github.io/pages/Contacto.html">Contacto</a></li>

        </ul>
    </nav>

    <p class="social">
                <a href="https://medium.com/@_seraph1" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/medium.png"></a>
                <a href="http://ve.linkedin.com/in/ernestocrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/linkedin.png"></a>
                <a href="https://github.com/ecrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/github.png"></a>
                <a href="https://google.com/+ErnestoCrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/google.png"></a>
                <a href="https://twitter.com/_seraph1" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/twitter.png"></a>
                <a href="https://www.facebook.com/ernesto.crespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/facebook.png"></a>
                <a href="https://gitlab.com/ecrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/gitlab.png"></a>
                <a href="https://soundcloud.com/ernesto-crespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/soundcloud.png"></a>
                <a href="//www.seraph.to/feeds/all.atom.xml" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/rss.png"></a>
            <a href="https://ecrespo.github.io/feeds/all.atom.xml" rel="alternate">
                <img src="https://ecrespo.github.io/theme/images/icons/rss.png"></a>
    </p>

        <h2>Categories</h2>
        <ul class="navbar">
                <li><a
                        href="https://ecrespo.github.io/category/accesibilidad.html">Accesibilidad</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/anuncio.html">Anuncio</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/anuncios.html">Anuncios</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/aplicacion-android.html">Aplicación Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/asterisk-debian-linux.html">Asterisk, Debian, Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/charla.html">Charla</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/charla-python.html">Charla Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/debian-linux-mac-book.html">Debian, Linux, Mac Book</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/debian-maemo-nokia-n810-python.html">Debian, maemo, Nokia N810, Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/demostracion-aplicacion-para-android.html">Demostración Aplicación para Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/desarrollomovil.html">Desarrollo,Movil</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/evento.html">Evento</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/general.html">General</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linux.html">Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxdebian.html">Linux,Debian</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxdesarrollo.html">Linux,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxempaquetado.html">Linux,Empaquetado</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxofimaticadesarrollo.html">Linux,Ofimatica,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/movil-nokia.html">Movil, Nokia</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/nokia-n810.html">Nokia N810</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/nokia-n810-debian-maemo.html">Nokia N810 Debian Maemo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/posts.html">posts</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/resumen-2010.html">Resumen 2010</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/sistemas-operativos.html">Sistemas Operativos</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial.html">Tutorial</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-android.html">Tutorial Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-arduino.html">Tutorial de Arduino</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-data-science.html">Tutorial de Data Science</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-docker.html">Tutorial de Docker</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-integracion-continua.html">Tutorial de integración continua</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-linux.html">Tutorial de Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python.html">Tutorial de Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-en-android.html">Tutorial de Python en Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-y-linux.html">Tutorial de Python y Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-y-pyqt.html">Tutorial de Python y PyQt</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-debian-bsd-y-python.html">Tutorial Debian BSD y Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-linux.html">Tutorial Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-linux-y-python.html">Tutorial Linux y Python</a></li>
                <li class="active"><a
                        href="https://ecrespo.github.io/category/tutorial-python.html">Tutorial Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-python-en-android.html">Tutorial Python en Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-python-y-linux.html">Tutorial Python y Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorialdesarrollo.html">Tutorial,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/xml-rpcpython.html">XML-RPC,Python</a></li>
        </ul>


</aside>

<!-- Content -->
<article>
    <section id="content">
        <article>
            <h2 class="post_title post_detail"><a href="https://ecrespo.github.io/tutorial-de-flask-parte-4-base-de-datos-sqlite3.html" rel="bookmark"
                                                  title="Permalink to Tutorial de Flask parte 4 (base de datos sqlite3)">Tutorial de Flask parte 4 (base de datos sqlite3)</a></h2>
            <div class="entry-content blog-post">
                <p>Continuando con la serie de tutoriales sobre Flask, en este caso se tocará el tema de base de datos, usando sqlite3. </p>
<p>Este artículo se basa en el artículo en Inglés de <a href="https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iv-database">The Flask Mega tutorial, Part IV: Database.</a></p>
<p>Los artículos anteriores son:</p>
<ol>
<li>
<p><a href="https://www.seraph.to/tutorial-de-flask-parte-1.html#tutorial-de-flask-parte-1">Tutorial de Flask parte 1.</a></p>
</li>
<li>
<p><a href="https://www.seraph.to/tutorial-de-flask-parte-2-plantillas-html.html#tutorial-de-flask-parte-2-plantillas-html">Tutorial de Flask parte 2 (plantilla html).</a></p>
</li>
<li>
<p><a href="https://www.seraph.to/tutorial-de-flask-parte-3-formulario-web.html#tutorial-de-flask-parte-3-formulario-web">Tutorial de Flask parte 3 (formulario web).</a></p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="err">tutorial-flask/</span>
<span class="err">├── app</span>
<span class="err">│   ├── forms.py</span>
<span class="err">│   ├── __init__.py</span>
<span class="err">│   ├── models.py</span>
<span class="err">│   ├── templates</span>
<span class="err">│   │   ├── base.html</span>
<span class="err">│   │   ├── index.html</span>
<span class="err">│   │   └── login.html</span>
<span class="err">│   └── views.py</span>
<span class="err">├── config.py</span>
<span class="err">├── db_create.py</span>
<span class="err">├── db_downgrade.py</span>
<span class="err">├── db_migrate.py</span>
<span class="err">├── db_upgrade.py</span>
<span class="err">├── docker-compose.yml</span>
<span class="err">├── Dockerfile</span>
<span class="err">├── README.md</span>
<span class="err">├── run.py</span>
<span class="err">└── tmp</span>
</code></pre></div>

<p>Los archivos nuevos o modificados son los siguientes:<br>
- <code>config.py</code>.<br>
- <code>db_create.py</code>: Script para crear la base de datos.<br>
- <code>db_migrate.py</code>: Script para migrar la base de datos.<br>
- <code>db_upgrade.py</code>: Script para actualizar la base de datos.<br>
- <code>db_downgrade.py</code>: Script para revertir actulización de la base de datos.<br>
- <code>__init__.py</code><br>
- <code>models.py</code>: Módulo donde se define las tablas de la base de datos.  </p>
<p>Archivo <code>config.py</code>: </p>
<div class="highlight"><pre><span></span><code><span class="c1">#Se importa os</span>


<span class="kn">import</span> <span class="nn">os</span>


<span class="c1">#Se define el directorio base del proyecto</span>


<span class="n">basedir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>


<span class="c1">#Se habilita CSRF</span>


<span class="n">CSRF_ENABLED</span> <span class="o">=</span> <span class="kc">True</span>


<span class="c1">#Se define la clave secreta</span>


<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s1">&#39;pruea&#39;</span>



<span class="n">PROVEEDORES_OPENID</span> <span class="o">=</span> <span class="p">[</span>


    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Google&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;https://www.google.com/accounts/o8/id&#39;</span><span class="p">},</span>


    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Yahoo&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;https://me.yahoo.com&#39;</span><span class="p">}]</span>



<span class="c1">#Se define el uri de la base de datos sqlite app.db</span>


<span class="n">SQLALCHEMY_DATABASE_URI</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basedir</span><span class="p">,</span> <span class="s1">&#39;app.db&#39;</span><span class="p">)</span>


<span class="c1">#Se define el repositorio para migracion de la base de datos app.db</span>


<span class="n">SQLALCHEMY_MIGRATE_REPO</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basedir</span><span class="p">,</span> <span class="s1">&#39;db_repository&#39;</span><span class="p">)</span>
</code></pre></div>

<p>Archivo <code>__init__.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#Se importa Flask</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="c1">#Se importa SQLALchemy</span>

<span class="c1">#from flask.ext.sqlalchemy import SQLAlchemy</span>

<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>

<span class="c1">#Se crea la instancia de flask</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1">#Se define la configuracion</span>

<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>

<span class="c1">#SE instancia la base de datos</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="c1">#Se importa views y models de app</span>

<span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">views</span><span class="p">,</span> <span class="n">models</span>
</code></pre></div>

<p>Archivo <code>models.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#de app se importa db</span>
<span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">db</span>

<span class="c1">#Se crea la tabla User que hereda de db.Model</span>
<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#Se crea la columna id como clave primaria e integer</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#Se crea la columna nickname como string de tamagn 64, como unico.</span>
    <span class="n">usuario</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">64</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#Columna correo, de 120 de tamagno del string y unico.</span>
    <span class="n">correo</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">120</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#Posts. que tiene relacion con la clase Post (tabla post),</span>
    <span class="n">posts</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">relationship</span><span class="p">(</span><span class="s1">&#39;Post&#39;</span><span class="p">,</span> <span class="n">backref</span><span class="o">=</span><span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="n">lazy</span><span class="o">=</span><span class="s1">&#39;dynamic&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;&lt;User </span><span class="si">%r</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">usuario</span><span class="p">)</span>

<span class="c1">#Tabla Post que hereda de model</span>
<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#Se crea el id del post como entero y clave primaria</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#Se crea la columna body como string de 140 caracteres</span>
    <span class="n">cuerpo</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">140</span><span class="p">))</span>
    <span class="c1">#Se define la marca de tiempo.</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">DateTime</span><span class="p">)</span>
    <span class="c1">#Se define el id del usuario, es una clave foranea de la tabla usuario</span>
    <span class="c1">#Columna id.</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;user.id&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;&lt;Post </span><span class="si">%r</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cuerpo</span><span class="p">)</span>
</code></pre></div>

<p>Archivo <code>db_create.py</code>: </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python</span>


<span class="c1">#de migrate.versioning se importa api</span>


<span class="kn">from</span> <span class="nn">migrate.versioning</span> <span class="kn">import</span> <span class="n">api</span>


<span class="c1">#De config se importa el uri</span>


<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">SQLALCHEMY_DATABASE_URI</span>


<span class="c1">#De config se importa el repo de migrate</span>


<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">SQLALCHEMY_MIGRATE_REPO</span>


<span class="c1">#De app se importa db</span>


<span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">db</span>





<span class="c1">#Se importa os.path</span>


<span class="kn">import</span> <span class="nn">os.path</span>


<span class="c1">#Se crea la base de datos.</span>


<span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>


<span class="c1">#Si el directorio del migrate no existe se crea y se usa,</span>


<span class="c1">#Si no se usa. </span>


<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">SQLALCHEMY_MIGRATE_REPO</span><span class="p">):</span>


    <span class="n">api</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">SQLALCHEMY_MIGRATE_REPO</span><span class="p">,</span> <span class="s1">&#39;database repository&#39;</span><span class="p">)</span>


    <span class="n">api</span><span class="o">.</span><span class="n">version_control</span><span class="p">(</span><span class="n">SQLALCHEMY_DATABASE_URI</span><span class="p">,</span> <span class="n">SQLALCHEMY_MIGRATE_REPO</span><span class="p">)</span>


<span class="k">else</span><span class="p">:</span>


    <span class="n">api</span><span class="o">.</span><span class="n">version_control</span><span class="p">(</span><span class="n">SQLALCHEMY_DATABASE_URI</span><span class="p">,</span> <span class="n">SQLALCHEMY_MIGRATE_REPO</span><span class="p">,</span>


                        <span class="n">api</span><span class="o">.</span><span class="n">version</span><span class="p">(</span><span class="n">SQLALCHEMY_MIGRATE_REPO</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>
<p>Archivo <code>db_migrate.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python</span>

<span class="c1">#se importa api.</span>

<span class="kn">from</span> <span class="nn">migrate.versioning</span> <span class="kn">import</span> <span class="n">api</span>

<span class="c1">#Se importa el uri y el migrate.</span>

<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">SQLALCHEMY_DATABASE_URI</span>

<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">SQLALCHEMY_MIGRATE_REPO</span>

<span class="c1">#se define la version de la db para las migraciones.</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">db_version</span><span class="p">(</span><span class="n">SQLALCHEMY_DATABASE_URI</span><span class="p">,</span> <span class="n">SQLALCHEMY_MIGRATE_REPO</span><span class="p">)</span>

<span class="c1">#Se baja una version.</span>

<span class="n">api</span><span class="o">.</span><span class="n">downgrade</span><span class="p">(</span><span class="n">SQLALCHEMY_DATABASE_URI</span><span class="p">,</span> <span class="n">SQLALCHEMY_MIGRATE_REPO</span><span class="p">,</span> <span class="n">v</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1">#Se vuelva a definir el uri y migrate de la vesion.</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">db_version</span><span class="p">(</span><span class="n">SQLALCHEMY_DATABASE_URI</span><span class="p">,</span> <span class="n">SQLALCHEMY_MIGRATE_REPO</span><span class="p">)</span>

<span class="c1">#Se muestra en pantalla la version actual.</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Current database version: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</code></pre></div>

<p>Archivo <code>db_upgrate.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python</span>
<span class="c1">#Se importa api.</span>
<span class="kn">from</span> <span class="nn">migrate.versioning</span> <span class="kn">import</span> <span class="n">api</span>
<span class="c1">#De config se importa URI y el repo.</span>
<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">SQLALCHEMY_DATABASE_URI</span>
<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">SQLALCHEMY_MIGRATE_REPO</span>
<span class="c1">#Se actualiza el api.</span>
<span class="n">api</span><span class="o">.</span><span class="n">upgrade</span><span class="p">(</span><span class="n">SQLALCHEMY_DATABASE_URI</span><span class="p">,</span> <span class="n">SQLALCHEMY_MIGRATE_REPO</span><span class="p">)</span>
<span class="c1">#Se define la version del api.</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">db_version</span><span class="p">(</span><span class="n">SQLALCHEMY_DATABASE_URI</span><span class="p">,</span> <span class="n">SQLALCHEMY_MIGRATE_REPO</span><span class="p">)</span>
<span class="c1">#Se muestra la nueva version.</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Current database version: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</code></pre></div>

<p>Archivo <code>db_downgrade.py</code>:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python</span>

<span class="c1">#se importa api.</span>

<span class="kn">from</span> <span class="nn">migrate.versioning</span> <span class="kn">import</span> <span class="n">api</span>

<span class="c1">#Se importa el uri y el migrate.</span>

<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">SQLALCHEMY_DATABASE_URI</span>

<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">SQLALCHEMY_MIGRATE_REPO</span>



<span class="c1">#se define la version de la db para las migraciones.</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">db_version</span><span class="p">(</span><span class="n">SQLALCHEMY_DATABASE_URI</span><span class="p">,</span> <span class="n">SQLALCHEMY_MIGRATE_REPO</span><span class="p">)</span>

<span class="c1">#Se baja una version.</span>

<span class="n">api</span><span class="o">.</span><span class="n">downgrade</span><span class="p">(</span><span class="n">SQLALCHEMY_DATABASE_URI</span><span class="p">,</span> <span class="n">SQLALCHEMY_MIGRATE_REPO</span><span class="p">,</span> <span class="n">v</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1">#Se vuelva a definir el uri y migrate de la vesion.</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">db_version</span><span class="p">(</span><span class="n">SQLALCHEMY_DATABASE_URI</span><span class="p">,</span> <span class="n">SQLALCHEMY_MIGRATE_REPO</span><span class="p">)</span>

<span class="c1">#Se muestra en pantalla la version actual.</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Current database version: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>
<p>Construir la imagen docker por medio de <code>docker-compose</code>:</p>
<div class="highlight"><pre><span></span><code><span class="err">docker-compose build</span>
</code></pre></div>

<p>Ahora toca ejecutar el contenedor:</p>
<div class="highlight"><pre><span></span><code><span class="err">docker-compose up</span>
<span class="err">Creating tutorialflask_web_1</span>
<span class="err">Attaching to tutorialflask_web_1</span>
<span class="err">web_1  |  * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)</span>
<span class="err">web_1  |  * Restarting with stat</span>
<span class="err">web_1  |  * Debugger is active!</span>
<span class="err">web_1  |  * Debugger pin code: 201-487-104</span>
</code></pre></div>

<p>Ahora para crear la base de datos se usa docker desde otra consola en el mismo directorio del proyecto:</p>
<p>Primero un <code>docker ps</code>:</p>
<div class="highlight"><pre><span></span><code><span class="err">docker ps </span>
<span class="err">CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS                    NAMES</span>
<span class="err">52bf03d39d06        tutorialflask_web   &quot;/bin/sh -c &#39;python r&quot;   About a minute ago   Up About a minute   0.0.0.0:5000-&gt;5000/tcp   tutorialflask_web_1</span>
</code></pre></div>

<p>Ya se tiene el ID del contenedor, ahora  a ejecutar <code>docker exec</code>:</p>
<div class="highlight"><pre><span></span><code><span class="err">docker exec -ti 52bf03d39d06 ./db_create.py</span>
</code></pre></div>

<p>Ahora se ejecuta un <code>ls -l</code> y se tiene lo siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="err">drwxr-xr-x 4 ernesto ernesto 4096 sep 12 20:07 app</span>
<span class="err">-rw-r--r-- 1 root    root    7168 sep 12 22:31 app.db</span>
<span class="err">-rw-r--r-- 1 ernesto ernesto  620 sep 12 22:14 config.py</span>
<span class="err">-rwxr-xr-x 1 ernesto ernesto  773 sep 12 20:29 db_create.py</span>
<span class="err">-rwxr-xr-x 1 ernesto ernesto  619 sep 12 20:31 db_downgrade.py</span>
<span class="err">-rwxr-xr-x 1 ernesto ernesto 1530 sep 12 20:37 db_migrate.py</span>
<span class="err">drwxr-sr-x 4 root    root    4096 sep 12 22:31 db_repository</span>
<span class="err">-rwxr-xr-x 1 ernesto ernesto  456 sep 12 20:52 db_upgrade.py</span>
<span class="err">-rw-r--r-- 1 ernesto ernesto   67 sep  4 17:27 docker-compose.yml</span>
<span class="err">-rw-r--r-- 1 ernesto ernesto  480 sep  4 17:27 Dockerfile</span>
<span class="err">drwxr-xr-x 2 root    root    4096 sep 12 22:29 __pycache__</span>
<span class="err">-rw-r--r-- 1 ernesto ernesto    0 sep  4 17:27 README.md</span>
<span class="err">-rw-r--r-- 1 ernesto ernesto   79 sep  4 17:27 run.py</span>
<span class="err">drwxr-xr-x 2 ernesto ernesto 4096 sep 19  2014 tmp</span>
</code></pre></div>

<p>Se crearon el archivo <code>app.db</code> y el directorio <code>__py__cache__</code>.</p>
<p>Ahora se ejecutará la primera migración: </p>
<div class="highlight"><pre><span></span><code><span class="err">docker exec -ti 52bf03d39d06 ./db_migrate.py </span>
<span class="err">New migration saved as /code/db_repository/versions/001_migration.py</span>
<span class="err">Current database version: 1</span>
</code></pre></div>

<p>Se salvó la primera migración y el número de versión es 1. Al listar los archivos</p>
<p>y directorios se tiene lo siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="err">drwxr-xr-x 4 ernesto ernesto 4096 sep 12 20:07 app</span>
<span class="err">-rw-r--r-- 1 root    root    7168 sep 12 22:33 app.db</span>
<span class="err">-rw-r--r-- 1 ernesto ernesto  620 sep 12 22:14 config.py</span>
<span class="err">-rwxr-xr-x 1 ernesto ernesto  773 sep 12 20:29 db_create.py</span>
<span class="err">-rwxr-xr-x 1 ernesto ernesto  619 sep 12 20:31 db_downgrade.py</span>
<span class="err">-rwxr-xr-x 1 ernesto ernesto 1530 sep 12 20:37 db_migrate.py</span>
<span class="err">drwxr-sr-x 4 root    root    4096 sep 12 22:31 db_repository</span>
<span class="err">-rwxr-xr-x 1 ernesto ernesto  456 sep 12 20:52 db_upgrade.py</span>
<span class="err">-rw-r--r-- 1 ernesto ernesto   67 sep  4 17:27 docker-compose.yml</span>
<span class="err">-rw-r--r-- 1 ernesto ernesto  480 sep  4 17:27 Dockerfile</span>
<span class="err">drwxr-xr-x 2 root    root    4096 sep 12 22:29 __pycache__</span>
<span class="err">-rw-r--r-- 1 ernesto ernesto    0 sep  4 17:27 README.md</span>
<span class="err">-rw-r--r-- 1 ernesto ernesto   79 sep  4 17:27 run.py</span>
<span class="err">drwxr-xr-x 2 ernesto ernesto 4096 sep 19  2014 tmp</span>
</code></pre></div>

<p>Ahora se tiene el directorio <code>db_repository</code>.</p>
<p>Ahora se trabajará con la base de datos de manera interactiva, se ejecuta <code>docker exec</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">docker</span> <span class="n">exec</span> <span class="o">-</span><span class="n">ti</span> <span class="mi">52</span><span class="n">bf03d39d06</span> <span class="n">python</span>


<span class="n">Python</span> <span class="mf">3.5</span><span class="o">.</span><span class="mi">2</span> <span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="n">Aug</span> <span class="mi">22</span> <span class="mi">2016</span><span class="p">,</span> <span class="mi">21</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="mi">27</span><span class="p">)</span> 
<span class="p">[</span><span class="n">GCC</span> <span class="mf">4.9</span><span class="o">.</span><span class="mi">2</span><span class="p">]</span> <span class="n">on</span> <span class="n">linux</span>
<span class="n">Type</span> <span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;copyright&quot;</span><span class="p">,</span> <span class="s2">&quot;credits&quot;</span> <span class="ow">or</span> <span class="s2">&quot;license&quot;</span> <span class="k">for</span> <span class="n">more</span> <span class="n">information</span><span class="o">.</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>

<p>De la aplicación se importa db y models:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">db</span><span class="p">,</span> <span class="n">models</span>
</code></pre></div>

<p>Se crea un usuario:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">u</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="n">usuario</span><span class="o">=</span><span class="s1">&#39;john&#39;</span><span class="p">,</span> <span class="n">correo</span><span class="o">=</span><span class="s1">&#39;john@email.com&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</code></pre></div>

<p>Se crea otro usuario:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">u</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="n">usuario</span><span class="o">=</span><span class="s1">&#39;jane&#39;</span><span class="p">,</span> <span class="n">correo</span><span class="o">=</span><span class="s1">&#39;jane@email.com&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>                                       
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</code></pre></div>

<p>Se hace una consulta de los usuarios:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">users</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">User</span> <span class="s1">&#39;john&#39;</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">User</span> <span class="s1">&#39;jane&#39;</span><span class="o">&gt;</span><span class="p">]</span>


<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
<span class="o">...</span>     <span class="nb">print</span> <span class="p">(</span><span class="n">user</span><span class="p">)</span>  
<span class="o">...</span> 
<span class="o">&lt;</span><span class="n">User</span> <span class="s1">&#39;john&#39;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">User</span> <span class="s1">&#39;jane&#39;</span><span class="o">&gt;</span>
</code></pre></div>

<p>Obtener información del usuario con id 1:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">u</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">u</span>
<span class="o">&lt;</span><span class="n">User</span> <span class="s1">&#39;john&#39;</span><span class="o">&gt;</span>
</code></pre></div>

<p>Ahora se agregarán unos posts:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">datetime</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">u</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="n">cuerpo</span><span class="o">=</span><span class="s1">&#39;mi primer post!&#39;</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">(),</span> <span class="n">author</span><span class="o">=</span><span class="n">u</span><span class="p">)</span>            
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>                               
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="err">```</span><span class="n">python</span>


<span class="n">Se</span> <span class="n">sale</span> <span class="k">del</span> <span class="n">interprete</span> <span class="n">de</span> <span class="n">comandos</span><span class="o">.</span>

<span class="n">Ahora</span> <span class="n">se</span> <span class="n">usará</span> <span class="err">`</span><span class="n">sqlitebrowser</span><span class="err">`</span> <span class="n">para</span> <span class="n">revisar</span> <span class="n">la</span> <span class="n">base</span> <span class="n">de</span> <span class="n">datos</span> <span class="err">`</span><span class="n">app</span><span class="o">.</span><span class="n">db</span><span class="err">`</span><span class="p">:</span>


<span class="n">En</span> <span class="n">la</span> <span class="n">figura</span> <span class="n">se</span> <span class="n">muestra</span> <span class="n">la</span> <span class="n">pantalla</span> <span class="n">principal</span> <span class="n">de</span> <span class="n">la</span> <span class="n">aplicación</span> <span class="n">donde</span> <span class="n">se</span> <span class="n">ve</span> <span class="n">las</span> <span class="n">sentencias</span> <span class="n">SQL</span> <span class="n">para</span> <span class="n">la</span> 


<span class="n">creación</span> <span class="n">de</span> <span class="n">las</span> <span class="n">tablas</span><span class="p">:</span>

<span class="err">!</span><span class="p">[](</span><span class="o">./</span><span class="n">images</span><span class="o">/</span><span class="n">tutorialdeflask4</span><span class="o">-</span><span class="mf">1.</span><span class="n">png</span><span class="p">)</span>

<span class="n">Ahora</span> <span class="n">se</span> <span class="n">muestra</span> <span class="n">los</span> <span class="n">datos</span><span class="p">,</span> <span class="n">la</span> <span class="n">tabla</span> <span class="n">usuario</span> <span class="n">y</span> <span class="n">la</span> <span class="n">tabla</span> <span class="n">de</span> <span class="n">post</span><span class="p">:</span>

<span class="err">!</span><span class="p">[](</span><span class="o">./</span><span class="n">images</span><span class="o">/</span><span class="n">tutorialdeflask4</span><span class="o">-</span><span class="mf">2.</span><span class="n">png</span><span class="p">)</span>

<span class="err">!</span><span class="p">[](</span><span class="o">./</span><span class="n">images</span><span class="o">/</span><span class="n">tutorialdeflask4</span><span class="o">-</span><span class="mf">3.</span><span class="n">png</span><span class="p">)</span>

<span class="n">Para</span> <span class="n">detener</span> <span class="n">el</span> <span class="n">contenedor</span> <span class="n">se</span> <span class="n">ejecuta</span><span class="p">:</span>
</code></pre></div>

<p>docker-compose down</p>
<p>```</p>
<p>El código fuente de este artículo se encuentra en <a href="https://gitlab.com/ecrespo/tutorial-flask/tree/articulo4">gitlab en la rama articulo4</a>.</p>
<h2></h2>
<p>¡Haz tu donativo!
Si te gustó el artículo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
dirección: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el código QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"></p>
            </div>
            <div class="post_list">
                <span>By </span>
                <a href="https://ecrespo.github.io/author/ernesto-crespo.html">@Ernesto Crespo</a>
                <span> in </span>
                <span class="post_category"><a href="https://ecrespo.github.io/category/tutorial-python.html" rel="bookmark"
                                               title="Permalink to Tutorial Python">[ Tutorial Python ]</a></span>
                <span class="post_date">lun 12 septiembre 2016</span>
                <div><span>Tags : </span>
                            <span><a href="https://ecrespo.github.io/tag/python.html">#Python, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/flask.html">#Flask, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/docker.html">#Docker, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/sqlite3.html">#Sqlite3, </a></span>
                </div>

                <div class="entry-social">
                    <span class="twitter"><a target="_blank" rel="nofollow"
                                             onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=700');return false;"
                                             title="Twitter"
                                             href="https://twitter.com/share?url=https://ecrespo.github.io/tutorial-de-flask-parte-4-base-de-datos-sqlite3.html&text=Tutorial de Flask parte 4 (base de datos sqlite3)&via="><img
                            src="https://ecrespo.github.io/theme/images/icons/twitter-s.png"></a></span>

                    <span class="gplus"><a target="_blank" title="Google +"
                                           href="https://plus.google.com/share?url=https://ecrespo.github.io/tutorial-de-flask-parte-4-base-de-datos-sqlite3.html&hl=fr"
                                           rel="nofollow"
                                           onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img
                            src="https://ecrespo.github.io/theme/images/icons/google-s.png"></a></span>

                    <span class="facebook"><a target="_blank" title="Facebook" rel="nofollow"
                                              onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=700');return false;"
                                              href="https://www.facebook.com/sharer.php?u=https://ecrespo.github.io/tutorial-de-flask-parte-4-base-de-datos-sqlite3.html&t=Tutorial de Flask parte 4 (base de datos sqlite3)"><img
                            src="https://ecrespo.github.io/theme/images/icons/facebook-s.png"></a></span>

                    <a target="_blank" title="Linkedin"
                       href="https://www.linkedin.com/shareArticle?mini=true&url=https://ecrespo.github.io/tutorial-de-flask-parte-4-base-de-datos-sqlite3.html&title=Tutorial de Flask parte 4 (base de datos sqlite3)"
                       rel="nofollow"
                       onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img
                            src="https://ecrespo.github.io/theme/images/icons/linkedin-s.png"></a>

                    <span class="mail"><a
                            href="mailto:?subject=Tutorial de Flask parte 4 (base de datos sqlite3)&amp;body=Viens découvrir un article à propos de [Tutorial de Flask parte 4 (base de datos sqlite3)] sur le site de Ernesto Crespo. https://ecrespo.github.io/tutorial-de-flask-parte-4-base-de-datos-sqlite3.html"
                            title="Share by Email" target="_blank"><img
                            src="https://ecrespo.github.io/theme/images/icons/mail-s.png"></a></span>
                </div>
            </div>
                <div class="comments">
                    <h2>Comments !</h2>
                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                        var disqus_identifier = "tutorial-de-flask-parte-4-base-de-datos-sqlite3.html";
                        (function () {
                            var dsq = document.createElement('script');
                            dsq.type = 'text/javascript';
                            dsq.async = true;
                            dsq.src = 'https://https://seraphto.disqus.com.disqus.com/embed.js';
                            (document.getElementsByTagName('head')[0] ||
                            document.getElementsByTagName('body')[0]).appendChild(dsq);
                        })();
                    </script>
                </div>
        </article>
    </section>
</article>

<!-- Footer -->
    <footer>
        <p>
            Blog powered by <a href="http://getpelican.com/">Pelican</a>,
            which takes great advantage of <a href="http://python.org">Python</a>.
            Theme <a href="https://github.com/parbhat/pelican-blue">Pelican-Blue</a> by <a
                href="https://parbhatpuri.com/">@parbhat</a>.
        </p>
    </footer>

    <!-- Analytics -->
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-131517246-1']);
        _gaq.push(['_trackPageview']);
        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>

</body>
</html>