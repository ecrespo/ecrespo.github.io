<!doctype html>
<html lang="es" itemscope itemtype="http://schema.org/Person">
<head>
            <meta charset="utf-8">
        <!-- Site Meta Data -->
        <title>Crear una imagen Docker a partir de un archivo dockerfile.</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="Ernesto Crespo">

        <link rel="shortcut icon" href="">

        <!-- schema.org -->
        <meta itemprop="name" content="Página de Seraph">
        <meta itemprop="image" content="">
        <meta itemprop="description" content="">

        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
        <!-- Style Meta Data -->
        <link rel="stylesheet" href="https://ecrespo.github.io/theme/css/style.css" type="text/css"/>
        <link rel="stylesheet" href="https://ecrespo.github.io/theme/css/pygments.css" type="text/css"/>

        <!-- Feed Meta Data -->
            <link href="https://ecrespo.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
                  title="Página de Seraph ATOM Feed"/>

        <!-- Twitter Feed -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="">
        <meta name="twitter:image" content="">

    <meta name="twitter:creator" content="">
    <meta name="twitter:url" content="https://ecrespo.github.io/crear-una-imagen-docker-a-partir-de-un-archivo-dockerfile.html">
    <meta name="twitter:title" content="Página de Seraph ~ Crear una imagen Docker a partir de un archivo dockerfile.">
    <meta name="twitter:description" content="En los artículos anteriores sobre docker se tiene: Instalar Docker en Debian Jessie Uso de Docker en Debian Jessie (parte 1) Uso de Docker en Debian Jessie (parte 2) En este artículo se muestra como construir una imagen Docker a partir de un archivo llamado Dockerfile. Se usará una imagen …">

    <!-- Facebook Meta Data -->
    <meta property="og:title" content="Página de Seraph ~ Crear una imagen Docker a partir de un archivo dockerfile."/>
    <meta property="og:description" content="En los artículos anteriores sobre docker se tiene: Instalar Docker en Debian Jessie Uso de Docker en Debian Jessie (parte 1) Uso de Docker en Debian Jessie (parte 2) En este artículo se muestra como construir una imagen Docker a partir de un archivo llamado Dockerfile. Se usará una imagen …"/>
    <meta property="og:image" content=""/>
</head>

<body>
<!-- Sidebar -->
<aside>
    <!--<center><a href="https://ecrespo.github.io"><img id="avatar" src=""></a></center>-->
    <h1>Página de Seraph</h1>
    <br>


    <nav class="nav">
        <ul class="list-bare">

                <li><a class="nav__link" href="/archives.html">Archives</a></li>
                <li><a class="nav__link" href="/categories.html">Categories</a></li>
                <li><a class="nav__link" href="/tags.html">Tags</a></li>

                <li><a class="nav__link" href="https://ecrespo.github.io/pages/About.html">Acerca</a></li>
                <li><a class="nav__link" href="https://ecrespo.github.io/pages/Contacto.html">Contacto</a></li>

        </ul>
    </nav>

    <p class="social">
                <a href="https://medium.com/@_seraph1" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/medium.png"></a>
                <a href="http://ve.linkedin.com/in/ernestocrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/linkedin.png"></a>
                <a href="https://github.com/ecrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/github.png"></a>
                <a href="https://google.com/+ErnestoCrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/google.png"></a>
                <a href="https://twitter.com/_seraph1" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/twitter.png"></a>
                <a href="https://www.facebook.com/ernesto.crespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/facebook.png"></a>
                <a href="https://gitlab.com/ecrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/gitlab.png"></a>
                <a href="https://soundcloud.com/ernesto-crespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/soundcloud.png"></a>
                <a href="//www.seraph.to/feeds/all.atom.xml" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/rss.png"></a>
            <a href="https://ecrespo.github.io/feeds/all.atom.xml" rel="alternate">
                <img src="https://ecrespo.github.io/theme/images/icons/rss.png"></a>
    </p>

        <h2>Categories</h2>
        <ul class="navbar">
                <li><a
                        href="https://ecrespo.github.io/category/accesibilidad.html">Accesibilidad</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/anuncio.html">Anuncio</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/anuncios.html">Anuncios</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/aplicacion-android.html">Aplicación Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/asterisk-debian-linux.html">Asterisk, Debian, Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/charla.html">Charla</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/charla-python.html">Charla Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/debian-linux-mac-book.html">Debian, Linux, Mac Book</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/debian-maemo-nokia-n810-python.html">Debian, maemo, Nokia N810, Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/demostracion-aplicacion-para-android.html">Demostración Aplicación para Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/desarrollomovil.html">Desarrollo,Movil</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/evento.html">Evento</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/general.html">General</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linux.html">Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxdebian.html">Linux,Debian</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxdesarrollo.html">Linux,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxempaquetado.html">Linux,Empaquetado</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxofimaticadesarrollo.html">Linux,Ofimatica,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/movil-nokia.html">Movil, Nokia</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/nokia-n810.html">Nokia N810</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/nokia-n810-debian-maemo.html">Nokia N810 Debian Maemo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/posts.html">posts</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/resumen-2010.html">Resumen 2010</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/sistemas-operativos.html">Sistemas Operativos</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial.html">Tutorial</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-android.html">Tutorial Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-arduino.html">Tutorial de Arduino</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-data-science.html">Tutorial de Data Science</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-docker.html">Tutorial de Docker</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-integracion-continua.html">Tutorial de integración continua</a></li>
                <li class="active"><a
                        href="https://ecrespo.github.io/category/tutorial-de-linux.html">Tutorial de Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python.html">Tutorial de Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-en-android.html">Tutorial de Python en Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-y-linux.html">Tutorial de Python y Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-y-pyqt.html">Tutorial de Python y PyQt</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-debian-bsd-y-python.html">Tutorial Debian BSD y Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-linux.html">Tutorial Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-linux-y-python.html">Tutorial Linux y Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-python.html">Tutorial Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-python-en-android.html">Tutorial Python en Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-python-y-linux.html">Tutorial Python y Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorialdesarrollo.html">Tutorial,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/xml-rpcpython.html">XML-RPC,Python</a></li>
        </ul>


</aside>

<!-- Content -->
<article>
    <section id="content">
        <article>
            <h2 class="post_title post_detail"><a href="https://ecrespo.github.io/crear-una-imagen-docker-a-partir-de-un-archivo-dockerfile.html" rel="bookmark"
                                                  title="Permalink to Crear una imagen Docker a partir de un archivo dockerfile.">Crear una imagen Docker a partir de un archivo dockerfile.</a></h2>
            <div class="entry-content blog-post">
                <p>En los artículos anteriores sobre docker se tiene:</p>
<ol>
<li><a href="https://www.seraph.to/instalar-docker-en-debian-jessie.html#instalar-docker-en-debian-jessie">Instalar Docker en Debian Jessie</a>  </li>
<li><a href="https://www.seraph.to/uso-de-docker-en-debian-jessie-parte-1.html#uso-de-docker-en-debian-jessie-parte-1">Uso de Docker en Debian Jessie (parte 1)</a>  </li>
<li><a href="https://www.seraph.to/uso-de-docker-en-debian-jessie-parte-2.html#uso-de-docker-en-debian-jessie-parte-2">Uso de Docker en Debian Jessie (parte 2)</a>  </li>
</ol>
<p>En este artículo se muestra como construir una imagen Docker a partir de un archivo llamado Dockerfile.</p>
<p>Se usará una imagen de Debian como base que a partir de allí se tendrá una con apache corriendo, en el directorio <code>/var/www/html</code> se tendrá un archivo index.html con dos encabezados html que mostrarán que se tiene corriendo apache por medio de docker.</p>
<p>Lo primero que se tiene que hacer es crear el archivo Dockerfile en un directorio por ejemplo dockerbuilds, el archivo contendrá lo siguiente:</p>
<div class="highlight"><pre><span></span><code>FROM debian
MAINTAINER Ernesto Crespo
RUN apt-get update
RUN apt-get install apache2 -y --force-yes
RUN echo &quot;<span class="nt">&lt;h1&gt;</span>Apache con docker<span class="nt">&lt;/h1&gt;</span> <span class="nt">&lt;h2&gt;</span>Prueba hecha por Seraph1<span class="nt">&lt;/h2&gt;</span>&quot; &gt; /var/www/html/index.html
EXPOSE 80
ENTRYPOINT apache2ctl -D FOREGROUND
</code></pre></div>

<p>Descripción del archivo:</p>
<ul>
<li>FROM:Lo primero que se define es la imagen que se va a usar, en este caso Debian.  </li>
<li>MAINTAINER: El nombre del mantenedor de la imagen.  </li>
<li>RUN: Instrucción que permite ejecutar comandos dentro del contenedor. En este caso se  actualiza la lista de paquetes de Debian, se instala apache y se copia el contenido de index.html en la ruta que le corresponde.</li>
<li>Se expone el puerto 80 del servidor  apache.    </li>
<li>Se indica que se ejecute apache en primer plano cada vez que se inicie el contenedor.  </li>
</ul>
<p>Luego de tener el archivo listo, se ejecuta el comando para la creación de la imagen usando dicho archivo:</p>
<div class="highlight"><pre><span></span><code><span class="err">docker build -t ecrespo/apache .</span>
</code></pre></div>

<p>Se define que el nombre de la imagen será <code>ecrespo/apache</code>.</p>
<p>Al terminar de realizar el proceso de construcción se tendrá la imagen en el equipo:</p>
<div class="highlight"><pre><span></span><code><span class="err">$docker images</span>
<span class="err">REPOSITORY                                      TAG                 IMAGE ID            CREATED              VIRTUAL SIZE</span>
<span class="err">ecrespo/apache                                  latest              ae0d4610be9d        About a minute ago   197.8 MB</span>
<span class="err">debian-django                                   latest              36896e115e32        2 weeks ago          601.1 MB</span>
<span class="err">ecrespo/empaquetadodebian                       latest              ee5883957d64        2 weeks ago          656.9 MB</span>
<span class="err">debian                                          latest              8b9a99209d5c        6 weeks ago          125.1 MB</span>
<span class="err">sonarqube                                       latest              dd47274097f7        10 weeks ago         942.5 MB</span>
<span class="err">debian                                          8.1                 f05335696a9b        4 months ago         125.2 MB</span>
</code></pre></div>

<p>Se tiene la imagen de 197.8MB. </p>
<p>Para terminar se ejecuta la imagen que se llama <code>ecrespo/apache</code>, la instancia se llamará apache1, se captura el puerto local 80 y lo muestra en el equipo como puerto 90.</p>
<div class="highlight"><pre><span></span><code><span class="err">docker run --name apache1 -d -p 90:80 ecrespo/apache</span>
</code></pre></div>

<p>Se lista los procesos de docker y se tiene el contenedor de apache corriendo:</p>
<div class="highlight"><pre><span></span><code><span class="err">$docker ps</span>
<span class="err">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                NAMES</span>
<span class="err">0195ebf31328        ecrespo/apache      &quot;/bin/sh -c &#39;apache2c&quot;   44 minutes ago      Up 44 minutes       0.0.0.0:90-&gt;80/tcp   apache1</span>
</code></pre></div>

<p>El nombre es <code>ecrespo/apache</code>, el comando que se ejecuta es el de <code>apachectl</code>, tiempo de creado 44 minutos y arriba desde hace 44 minutos, el nombre de la instancia es <code>apache1</code> y redirecciona el puerto 90 al puerto 80.</p>
<p>Con <code>docker stats</code> pasando el id del contenedor se puede tener información de consumo de recursos de dicho contenedor.</p>
<p><img alt="" src="./images/crearunaimagendockerapartirdeunarchivodockerfile-1.png"></p>
<p>Ahora se abre el navegador con localhost:90 y se tiene lo que muestra el mensaje que veremos en la siguiente figura:</p>
<p><img alt="" src="./images/crearunaimagendockerapartirdeunarchivodockerfile-2.png"></p>
<p>Para detener el contenedor se ejecuta <code>docker stop</code> con el id del contenedor:</p>
<div class="highlight"><pre><span></span><code>$ docker stop 0195ebf31328
0195ebf31328
</code></pre></div>

<p>Al listar los procesos se nota que ya no se tiene el contenedor <code>apache1</code> corriendo.</p>
<div class="highlight"><pre><span></span><code>$ docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
</code></pre></div>

<p>En este artículo se muestra una pequeña personalización del apache, poco a poco se irá aumentando el nivel de personalización de los contenedores para tener servicios reales en funcionamiento. </p>
<h2></h2>
<p>¡Haz tu donativo!
Si te gustó el artículo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
dirección: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el código QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"></p>
            </div>
            <div class="post_list">
                <span>By </span>
                <a href="https://ecrespo.github.io/author/ernesto-crespo.html">@Ernesto Crespo</a>
                <span> in </span>
                <span class="post_category"><a href="https://ecrespo.github.io/category/tutorial-de-linux.html" rel="bookmark"
                                               title="Permalink to Tutorial de Linux">[ Tutorial de Linux ]</a></span>
                <span class="post_date">dom 17 enero 2016</span>
                <div><span>Tags : </span>
                            <span><a href="https://ecrespo.github.io/tag/canaima.html">#Canaima, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/debian.html">#Debian, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/linux.html">#Linux, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/python.html">#Python, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/ubuntu.html">#Ubuntu, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/docker.html">#Docker, </a></span>
                </div>

                <div class="entry-social">
                    <span class="twitter"><a target="_blank" rel="nofollow"
                                             onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=700');return false;"
                                             title="Twitter"
                                             href="https://twitter.com/share?url=https://ecrespo.github.io/crear-una-imagen-docker-a-partir-de-un-archivo-dockerfile.html&text=Crear una imagen Docker a partir de un archivo dockerfile.&via="><img
                            src="https://ecrespo.github.io/theme/images/icons/twitter-s.png"></a></span>

                    <span class="gplus"><a target="_blank" title="Google +"
                                           href="https://plus.google.com/share?url=https://ecrespo.github.io/crear-una-imagen-docker-a-partir-de-un-archivo-dockerfile.html&hl=fr"
                                           rel="nofollow"
                                           onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img
                            src="https://ecrespo.github.io/theme/images/icons/google-s.png"></a></span>

                    <span class="facebook"><a target="_blank" title="Facebook" rel="nofollow"
                                              onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=700');return false;"
                                              href="https://www.facebook.com/sharer.php?u=https://ecrespo.github.io/crear-una-imagen-docker-a-partir-de-un-archivo-dockerfile.html&t=Crear una imagen Docker a partir de un archivo dockerfile."><img
                            src="https://ecrespo.github.io/theme/images/icons/facebook-s.png"></a></span>

                    <a target="_blank" title="Linkedin"
                       href="https://www.linkedin.com/shareArticle?mini=true&url=https://ecrespo.github.io/crear-una-imagen-docker-a-partir-de-un-archivo-dockerfile.html&title=Crear una imagen Docker a partir de un archivo dockerfile."
                       rel="nofollow"
                       onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img
                            src="https://ecrespo.github.io/theme/images/icons/linkedin-s.png"></a>

                    <span class="mail"><a
                            href="mailto:?subject=Crear una imagen Docker a partir de un archivo dockerfile.&amp;body=Viens découvrir un article à propos de [Crear una imagen Docker a partir de un archivo dockerfile.] sur le site de Ernesto Crespo. https://ecrespo.github.io/crear-una-imagen-docker-a-partir-de-un-archivo-dockerfile.html"
                            title="Share by Email" target="_blank"><img
                            src="https://ecrespo.github.io/theme/images/icons/mail-s.png"></a></span>
                </div>
            </div>
                <div class="comments">
                    <h2>Comments !</h2>
                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                        var disqus_identifier = "crear-una-imagen-docker-a-partir-de-un-archivo-dockerfile.html";
                        (function () {
                            var dsq = document.createElement('script');
                            dsq.type = 'text/javascript';
                            dsq.async = true;
                            dsq.src = 'https://https://seraphto.disqus.com.disqus.com/embed.js';
                            (document.getElementsByTagName('head')[0] ||
                            document.getElementsByTagName('body')[0]).appendChild(dsq);
                        })();
                    </script>
                </div>
        </article>
    </section>
</article>

<!-- Footer -->
    <footer>
        <p>
            Blog powered by <a href="http://getpelican.com/">Pelican</a>,
            which takes great advantage of <a href="http://python.org">Python</a>.
            Theme <a href="https://github.com/parbhat/pelican-blue">Pelican-Blue</a> by <a
                href="https://parbhatpuri.com/">@parbhat</a>.
        </p>
    </footer>

    <!-- Analytics -->
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-131517246-1']);
        _gaq.push(['_trackPageview']);
        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>

</body>
</html>