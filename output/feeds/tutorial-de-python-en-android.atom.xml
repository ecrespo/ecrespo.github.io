<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Página de Seraph - Tutorial de Python en Android</title><link href="https://ecrespo.github.io/" rel="alternate"></link><link href="https://ecrespo.github.io/feeds/tutorial-de-python-en-android.atom.xml" rel="self"></link><id>https://ecrespo.github.io/</id><updated>2010-12-15T10:00:00-05:30</updated><subtitle>Data Scientist </subtitle><entry><title>Ejecución remota de scripts python desde Linux a un celular con Android (versión conectado el celular por USB)</title><link href="https://ecrespo.github.io/ejecucion-remota-de-scripts-python-desde-linux-a-un-celular-con-android-version-conectado-el-celular-por-usb.html" rel="alternate"></link><published>2010-12-15T10:00:00-05:30</published><updated>2010-12-15T10:00:00-05:30</updated><author><name>Ernesto Crespo</name></author><id>tag:ecrespo.github.io,2010-12-15:/ejecucion-remota-de-scripts-python-desde-linux-a-un-celular-con-android-version-conectado-el-celular-por-usb.html</id><summary type="html">&lt;p&gt;En el post anterior explique como ejecutar script python en un celular con Android de forma remota desde Linux por wifi, ahora explicar&amp;eacute; como hacerlo por cable USB, en realidad es m&amp;aacute;s sencillo que el art&amp;iacute;culo anterior.
Me basar&amp;eacute; en lo explicado en el post &lt;a href="https://www.seraph.to/ejecucion-remota-de-scripts-python-desde-linux-a-un-celular-con-android.html#ejecucion-remota-de-scripts-python-desde-linux-a-un-celular-con-android"&gt;anterior&lt;/a&gt; y en el post …&lt;/p&gt;</summary><content type="html">&lt;p&gt;En el post anterior explique como ejecutar script python en un celular con Android de forma remota desde Linux por wifi, ahora explicar&amp;eacute; como hacerlo por cable USB, en realidad es m&amp;aacute;s sencillo que el art&amp;iacute;culo anterior.
Me basar&amp;eacute; en lo explicado en el post &lt;a href="https://www.seraph.to/ejecucion-remota-de-scripts-python-desde-linux-a-un-celular-con-android.html#ejecucion-remota-de-scripts-python-desde-linux-a-un-celular-con-android"&gt;anterior&lt;/a&gt; y en el post sobre &lt;a href="https://www.seraph.to/enviar-mensajes-de-texto-desde-android-con-python.html"&gt;env&amp;iacute;o de mensajes de texto&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Lo primero que se necesita hacer es conectar el celular al computador por USB, activar el modo depuraci&amp;oacute;n y la conexi&amp;oacute;n USB a Portal y Herramientas.&lt;/p&gt;
&lt;p&gt;Se debe iniciar el servidor de SL4A. Men&amp;uacute;-&amp;gt;Ver-&amp;gt;Interpretes-&amp;gt;Men&amp;uacute;-&amp;gt;Iniciar Servidor-&amp;gt;Privado.&lt;/p&gt;
&lt;p&gt;Luego se averigua en los mensajes de notificiaci&amp;oacute;n que puerto abre el servidor. En m&amp;iacute; caso fue el 58825.&lt;/p&gt;
&lt;p&gt;Desde la consola de Linux se ejecutan los siguientes comandos:
Redirecciona toda petici&amp;oacute;n al puerto 9999 al puerto 58825.&lt;/p&gt;
&lt;p&gt;```
./adb forward tcp:9999 tcp:58825&lt;/p&gt;
&lt;p&gt;```&lt;/p&gt;
&lt;p&gt;Se exporta una variable de ambiente.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;export AP_PORT=9999&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;El programa es el siguiente:&lt;/p&gt;
&lt;p&gt;```python&lt;/p&gt;
&lt;h1 id="!/usr/bin/env python2.6"&gt;!/usr/bin/env python2.6&lt;/h1&gt;
&lt;h1 id="-- coding: utf-8 --"&gt;-&lt;em&gt;- coding: utf-8 -&lt;/em&gt;-&lt;/h1&gt;
&lt;h1 id="script que permite enviar mensaje de texto a un celular android desde linux."&gt;Script que permite enviar mensaje de texto a un celular android desde Linux.&lt;/h1&gt;
&lt;h1 id="autor: ernesto crespo"&gt;Autor: Ernesto Crespo&lt;/h1&gt;
&lt;h1 id="correo:ecrespo@gmail.com"&gt;Correo:ecrespo@gmail.com&lt;/h1&gt;
&lt;h1 id="licencia: gplv3"&gt;Licencia: GPLv3&lt;/h1&gt;
&lt;h1 id="version:0.1"&gt;Versi&amp;oacute;n:0.1&lt;/h1&gt;
&lt;h1 id="importando el modulo android,sys y re"&gt;Importando el m&amp;oacute;dulo android,sys y re&lt;/h1&gt;
&lt;p&gt;import android,sys,re&lt;/p&gt;
&lt;h1 id="funcion de envio de mensajes"&gt;Funci&amp;oacute;n de envio de mensajes&lt;/h1&gt;
&lt;p&gt;def Enviomensaje():
    #Se averigua si se le pasa al script el n&amp;uacute;mero celular y el mensaje, y que el n&amp;uacute;mero sea v&amp;aacute;lido para venezuela.
    if len(sys.argv) == 3:
        numero = sys.argv[1]
        mensaje = sys.argv[2]
    else:
        print "error enviando mensaje, se necesita pasar el n&amp;uacute;mero y mensaje"
        sys.exit
    if Validar(numero) == 0:
        print "N&amp;uacute;mero invalido"
        sys.exit
    #Creando la instancia droid del objeto Android
    droid = android.Android()
    #Enviando el mensaje de texto
    droid.smsSend(numero,mensaje)
    #Se presenta un mensaje de notificaci&amp;oacute;n en el celular.
    droid.makeToast('Mensaje enviado')&lt;/p&gt;
&lt;h1 id="funcion que valida si el numero es de movilnet, digitel o movistar."&gt;Funci&amp;oacute;n que v&amp;aacute;lida si el n&amp;uacute;mero es de movilnet, digitel o movistar.&lt;/h1&gt;
&lt;p&gt;def Validar(numero):
    #Valida si los numeros tienen 11 digitos y que sean de los proveedores movilnet, digitel y movistar
    if len(numero) == 11 and ((re.search("041[2|4|6]\d\d\d\d\d\d\d",numero)) or (re.search("042[4|6]\d\d\d\d\d\d\d",numero))) :
        return 1
    else:
        return 0&lt;/p&gt;
&lt;h1 id="ejecucion del programa."&gt;Ejecuci&amp;oacute;n del programa.&lt;/h1&gt;
&lt;p&gt;if &lt;strong&gt;name&lt;/strong&gt; == "&lt;strong&gt;main&lt;/strong&gt;":
    Enviomensaje()
```&lt;/p&gt;
&lt;p&gt;Ejecutar el script.
&lt;code&gt;enviomensajes.py 0xxxyyyzzww  "2da prueba, avisame si te llega el sms"&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;===&lt;/p&gt;
&lt;p&gt;&amp;iexcl;Haz tu donativo!
Si te gust&amp;oacute; el art&amp;iacute;culo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
direcci&amp;oacute;n: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV&lt;/p&gt;
&lt;p&gt;O Escaneando el c&amp;oacute;digo QR desde billetera:&lt;/p&gt;
&lt;p&gt;&lt;img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"/&gt;&lt;/p&gt;</content><category term="Android"></category><category term="Python"></category><category term="Debian"></category><category term="Linux"></category></entry><entry><title>Ejecución remota de scripts python desde Linux a un celular con Android</title><link href="https://ecrespo.github.io/ejecucion-remota-de-scripts-python-desde-linux-a-un-celular-con-android.html" rel="alternate"></link><published>2010-10-23T10:00:00-05:30</published><updated>2010-10-23T10:00:00-05:30</updated><author><name>Ernesto Crespo</name></author><id>tag:ecrespo.github.io,2010-10-23:/ejecucion-remota-de-scripts-python-desde-linux-a-un-celular-con-android.html</id><summary type="html">&lt;p&gt;Existe la forma  de ejecutar scripts as&amp;iacute; sea de python,perl, ruby, bash,etc de forma remota (desde Linux) a un celular con Android.&lt;/p&gt;
&lt;p&gt;Al instalar SL4A y python se tiene la posibilidad de iniciar un servicio de SL4A para escuchar en un puerto espec&amp;iacute;fico del celular Android, se tiene …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Existe la forma  de ejecutar scripts as&amp;iacute; sea de python,perl, ruby, bash,etc de forma remota (desde Linux) a un celular con Android.&lt;/p&gt;
&lt;p&gt;Al instalar SL4A y python se tiene la posibilidad de iniciar un servicio de SL4A para escuchar en un puerto espec&amp;iacute;fico del celular Android, se tiene la opci&amp;oacute;n p&amp;uacute;blica o privada, para el primer caso se tiene que tener conectado el celular a una red wifi donde levanta el servicio en un puerto espec&amp;iacute;fico, para el caso de conexi&amp;oacute;n privada el celular debe estar conectado v&amp;iacute;a puerto USB con la opci&amp;oacute;n de depuraci&amp;oacute;n USB conectada y el celular en modo Portal y Herramientas.&lt;/p&gt;
&lt;p&gt;Este post se basa en el art&amp;iacute;culo de control remoto de SL4A que se encuentra &lt;a href="http://code.google.com/p/android-scripting/wiki/RemoteControl"&gt;aqu&amp;iacute;&lt;/a&gt; .&lt;/p&gt;
&lt;p&gt;En este momento explicar&amp;eacute; la conexi&amp;oacute;n remota p&amp;uacute;blica, primero se tiene que conectar el celular a una red wifi.&lt;/p&gt;
&lt;p&gt;En el equipo que estoy utilizando le asigno la IP 192.168.10.19.&lt;/p&gt;
&lt;p&gt;Luego ejecutar SL4A en el celular, luego se le da men&amp;uacute;, se selecciona ver, luego a interpretes, luego otra vez al men&amp;uacute;, se selecciona iniciar servidor, en este momento se le pide seleccionar entre servidor p&amp;uacute;blico o privado, se selecciona al primero.&lt;/p&gt;
&lt;p&gt;El celular coloca un mensaje en el &amp;aacute;rea de notificaci&amp;oacute;n de Android mencionando que el servidor se ha iniciado, se despliega la informaci&amp;oacute;n y este dice se arranco un servidor SL4A en la IP 192.168.10.19 con puerto 52834.&lt;/p&gt;
&lt;p&gt;A continuaci&amp;oacute;n se utilizar&amp;aacute; el sdk de android en Linux ejecutando adb.
Se inicia el servidor adb.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;./adb start-server
* daemon not running. starting it now on port 5037 *
* daemon started successfully *&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Note que el servidor levanta en el puerto 5037.&lt;/p&gt;
&lt;p&gt;Ahora se redirecciona los puertos del servicio adb.&lt;/p&gt;
&lt;p&gt;```
./adb forward tcp:9999 tcp:52834&lt;/p&gt;
&lt;p&gt;```&lt;/p&gt;
&lt;p&gt;Donde el puerto 9999 se redirecciona al puerto donde escucha el celular que es el 52834 en este caso.&lt;/p&gt;
&lt;p&gt;A continuaci&amp;oacute;n se configura la variable de ambiente de la IP y puerto del celular con Android que tiene funcionan el servidor SL4A.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;export AP_PORT=52834
export AP_HOST=192.168.10.19&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Asegurarse que tiene en el path de python2.6 la ruta del m&amp;oacute;dulo de python para android. Este lo puede bajar en este &lt;a href="http://android-scripting.googlecode.com/hg/python/ase/android.py"&gt;enlace&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A continuaci&amp;oacute;n se muestra un script en python que pide escriba el nombre de usuario en el celular y lo muestra en Linux y en el celular:&lt;/p&gt;
&lt;p&gt;```python&lt;/p&gt;
&lt;h1 id="importar modulo android"&gt;Importar m&amp;oacute;dulo android&lt;/h1&gt;
&lt;p&gt;import android&lt;/p&gt;
&lt;h1 id="se crea el objeto droid de la clase android con la ip y puerto del servicio iniciado en el celular."&gt;Se crea el objeto droid de la clase Android con la IP y puerto del servicio iniciado en el celular.&lt;/h1&gt;
&lt;p&gt;droid = android.Android(('192.168.10.19', 52834))&lt;/p&gt;
&lt;h1 id="se solicita al usuario que escriba su nombre"&gt;Se solicita al usuario que escriba su nombre&lt;/h1&gt;
&lt;p&gt;texto = droid.getInput("Escriba su nombre","Nombre:")&lt;/p&gt;
&lt;h1 id="se imprime el nombre del usuario en la consola de linux"&gt;Se imprime el nombre del usuario en la consola de Linux&lt;/h1&gt;
&lt;p&gt;print "El nombre escrito en el celular es: %s" %texto[1]&lt;/p&gt;
&lt;h1 id="se presenta un saludo al usuario en el celular"&gt;Se presenta un saludo al usuario en el celular&lt;/h1&gt;
&lt;p&gt;droid.makeToast('Hola %s' %texto[1])
```&lt;/p&gt;
&lt;p&gt;Para ejecutar el programa se coloca el script prueba-remota.py donde se encuentra el m&amp;oacute;dulo de SL4A android.py en el mismo directorio o se coloca en el path de python2.6.
Se ejecuta con python2.6:&lt;/p&gt;
&lt;p&gt;```
$ python2.6 prueba-remota.py &lt;/p&gt;
&lt;p&gt;```&lt;/p&gt;
&lt;p&gt;El nombre escrito en el celular es: ernesto&lt;/p&gt;
&lt;p&gt;===&lt;/p&gt;
&lt;p&gt;&amp;iexcl;Haz tu donativo!
Si te gust&amp;oacute; el art&amp;iacute;culo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
direcci&amp;oacute;n: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV&lt;/p&gt;
&lt;p&gt;O Escaneando el c&amp;oacute;digo QR desde billetera:&lt;/p&gt;
&lt;p&gt;&lt;img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"/&gt;&lt;/p&gt;</content><category term="Android"></category><category term="Python"></category><category term="Debian"></category><category term="Linux"></category></entry></feed>