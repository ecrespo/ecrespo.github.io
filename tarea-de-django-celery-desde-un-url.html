
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="https://ecrespo.github.io/theme/pygments/monokai.min.css">


  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/solid.css">


    <link href="https://ecrespo.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Página de Seraph Atom">



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131517246-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#e5e5ff">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#e5e5ff">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#e5e5ff">

<meta name="author" content="Ernesto Crespo" />
<meta name="description" content="En el artículo anterior (Restful API con Django-tastypie y Django-Celery) se mostró como pasarle datos a django desde su interprete de comandos, en este arículo se explicará como pasarlo desde el navegador o un script en python que lo haga por nosotros. Recapitulando la parte del código que captura el …" />
<meta name="keywords" content="Canaima, Debian, General, Ubuntu, Django">


<meta property="og:site_name" content="Página de Seraph"/>
<meta property="og:title" content="Tarea de Django-Celery desde un URL"/>
<meta property="og:description" content="En el artículo anterior (Restful API con Django-tastypie y Django-Celery) se mostró como pasarle datos a django desde su interprete de comandos, en este arículo se explicará como pasarlo desde el navegador o un script en python que lo haga por nosotros. Recapitulando la parte del código que captura el …"/>
<meta property="og:locale" content="es_VE"/>
<meta property="og:url" content="https://ecrespo.github.io/tarea-de-django-celery-desde-un-url.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2014-07-22 09:00:00-04:30"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://ecrespo.github.io/author/ernesto-crespo.html">
<meta property="article:section" content="Tutorial Python"/>
<meta property="article:tag" content="Canaima"/>
<meta property="article:tag" content="Debian"/>
<meta property="article:tag" content="General"/>
<meta property="article:tag" content="Ubuntu"/>
<meta property="article:tag" content="Django"/>
<meta property="og:image" content="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120">

  <title>Página de Seraph &ndash; Tarea de Django-Celery desde un URL</title>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "pub-0261001661746989",
      enable_page_level_ads: true
    });
  </script>
</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="https://ecrespo.github.io">
        <img src="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120" alt="Ernesto Crespo" title="Ernesto Crespo">
      </a>

      <h1>
        <a href="https://ecrespo.github.io">Ernesto Crespo</a>
      </h1>

<p>Data Scientist </p>

      <nav>
        <ul class="list">


              <li>
                <a target="_self"
                   href="https://ecrespo.github.io/pages/About.html#About">
                  Acerca
                </a>
              </li>
              <li>
                <a target="_self"
                   href="https://ecrespo.github.io/pages/Contacto.html#Contacto">
                  Contacto
                </a>
              </li>

        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-medium" href="https://medium.com/@_seraph1" target="_blank">
              <i class="fab fa-medium"></i>
            </a>
          </li>
          <li>
            <a  class="sc-linkedin" href="http://ve.linkedin.com/in/ernestocrespo" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a  class="sc-github" href="https://github.com/ecrespo" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-google" href="https://google.com/+ErnestoCrespo" target="_blank">
              <i class="fab fa-google"></i>
            </a>
          </li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/_seraph1" target="_blank">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
          <li>
            <a  class="sc-facebook" href="https://www.facebook.com/ernesto.crespo" target="_blank">
              <i class="fab fa-facebook"></i>
            </a>
          </li>
          <li>
            <a  class="sc-gitlab" href="https://gitlab.com/ecrespo" target="_blank">
              <i class="fab fa-gitlab"></i>
            </a>
          </li>
          <li>
            <a  class="sc-soundcloud" href="https://soundcloud.com/ernesto-crespo" target="_blank">
              <i class="fab fa-soundcloud"></i>
            </a>
          </li>
          <li>
            <a  class="sc-rss" href="//www.seraph.to/feeds/all.atom.xml" target="_blank">
              <i class="fas fa-rss"></i>
            </a>
          </li>
      </ul>
    </div>

      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-aside"
           data-ad-client="pub-0261001661746989"
           data-ad-slot="1234561"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
  </aside>
  <main>
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-responsive"
           data-ad-client="pub-0261001661746989"
           data-ad-slot="1234562"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>

    <nav>
      <a href="https://ecrespo.github.io">Inicio</a>

      <a href="/archives.html">Archivos</a>
      <a href="/categories.html">Categorías</a>
      <a href="/tags.html">Etiquetas</a>

      <a href="https://ecrespo.github.io/feeds/all.atom.xml">Atom</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="tarea-de-django-celery-desde-un-url">Tarea de Django-Celery desde un URL</h1>
    <p>
      Publicado el mar 22 julio 2014 en <a href="https://ecrespo.github.io/category/tutorial-python.html">Tutorial Python</a>

        &#8226; 2 min de lectura
    </p>
  </header>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234565"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

  <div>
    <p>En el artículo anterior (<a href="https://www.seraph.to/restful-api-con-django-tastypie-y-django-celery.html#restful-api-con-django-tastypie-y-django-celery">Restful API con Django-tastypie y Django-Celery</a>) se mostró como pasarle datos a django desde su interprete de comandos, en este arículo se explicará como pasarlo desde el navegador o un script en python que lo haga por nosotros.</p>
<p>Recapitulando la parte del código que captura el url se maneja en el archivo urls.py que tiene lo siguiente:
url(r'^enviar/', celery_views.task_view(tasks.RecNums)),</p>
<p>Al abrir el url http://127.0.0.1:8080/ se tiene la siguiente imagen de una captura de pantalla:</p>
<p><img alt="" src="./images/tareadedjangocelerydesdeunurl-1.png"></p>
<p>Como django está en modo debug nos muestra esa página, la cual dice los urls tienen que manejar el orden que se muestra (admin,api, enviar y los otros dos con identificación de procesos).</p>
<p>Django devuelve mensaje 404, como se muestra a continuación:</p>
<p><img alt="" src="./images/tareadedjangocelerydesdeunurl-2.png"></p>
<p>En el artículo anterior se uso el interprete de comandos de Django con el siguiente código:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span><span class="kn">import</span> <span class="nn">json</span></span>
<span class="code-line"><span class="o">&gt;&gt;&gt;</span><span class="kn">from</span> <span class="nn">pasarela.apps.sms.tasks</span> <span class="kn">import</span> <span class="n">RecNums</span></span>
<span class="code-line"><span class="o">&gt;&gt;&gt;</span><span class="n">datos</span> <span class="o">=</span> <span class="s1">&#39;{&quot;numeros&quot;: [&quot;34225673531&quot;, &quot;34265673531&quot;, &quot;34365673531&quot;, &quot;34245673531&quot;, &quot;34345673531&quot;], &quot;mensaje&quot;: &quot;xyzw&quot;, &quot;cantnumeros&quot;: 5,&quot;evento&quot;:6}&#39;</span></span>
<span class="code-line"><span class="o">&gt;&gt;&gt;</span><span class="n">resultado</span> <span class="o">=</span> <span class="n">RecNums</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="n">datos</span><span class="p">)</span></span>
<span class="code-line"><span class="o">&gt;&gt;&gt;</span><span class="n">resultado</span><span class="o">.</span><span class="n">get</span><span class="p">()</span></span>
<span class="code-line"><span class="s1">&#39;Se enviaron: 5&#39;</span></span>
</pre></div>


<p>Como se ve, <code>datos</code> es un string que contiene entre llaves un conjunto de datos, lo que está entre las comillas es un diccionario de python, por esa razón cuando la función RecNums recibe datos convierte el string que en sí es un json, el cual pasa de ser un tipo str a un tipo dict:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="o">&gt;&gt;&gt;</span><span class="nb">type</span><span class="p">(</span><span class="n">datos</span><span class="p">)</span></span>
<span class="code-line"><span class="nb">str</span></span>
<span class="code-line"><span class="o">&gt;&gt;&gt;</span><span class="n">diccionario</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">datos</span><span class="p">)</span></span>
<span class="code-line"><span class="o">&gt;&gt;&gt;</span><span class="nb">type</span><span class="p">(</span><span class="n">diccionario</span><span class="p">)</span></span>
<span class="code-line"><span class="nb">dict</span></span>
</pre></div>


<p>Ahora bien, se tiene que el url a usar debería ser algo como:
http://127.0.0.1/enviar/?datos=
Donde lo que va luego del igual debería ser el jason que se está pasando a la función</p>
<div class="highlight"><pre><span class="code-line"><span></span> ( &#39;{&quot;numeros&quot;: [&quot;34225673531&quot;, &quot;34265673531&quot;, &quot;34365673531&quot;, &quot;34245673531&quot;, &quot;34345673531&quot;], &quot;mensaje&quot;: &quot;xyzw&quot;, &quot;cantnumeros&quot;: 5,&quot;evento&quot;:6}&#39; ).</span>
</pre></div>


<p>Este es el json, el problema que se tiene es que el url no está bien construído, para ello se mostrará en un script python como se abre el url pasandole el json (se muestra en la siguiente figura):</p>
<p><img alt="" src="./images/tareadedjangocelerydesdeunurl-3.png"></p>
<p>A continuación se muestra el log de celery donde se ve que procesa las tareas del envío de cada mensaje a su número celular respectivo:</p>
<p><img alt="" src="./images/tareadedjangocelerydesdeunurl-4.png"></p>
<p>Y para terminar se muestra el log de Django al recibir el URL que se paso en el script donde devuelve el código 200:</p>
<p><img alt="" src="./images/tareadedjangocelerydesdeunurl-5.png"></p>
<p>Así que para poder pasar por medio de un url sus parámetros se tiene que realizar una conversión a formato url de los datos que se tienen en el json.</p>
<h2></h2>
<p>¡Haz tu donativo!
Si te gustó el artículo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
dirección: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el código QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"></p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://ecrespo.github.io/tag/canaima.html">Canaima</a>
      <a href="https://ecrespo.github.io/tag/debian.html">Debian</a>
      <a href="https://ecrespo.github.io/tag/general.html">General</a>
      <a href="https://ecrespo.github.io/tag/ubuntu.html">Ubuntu</a>
      <a href="https://ecrespo.github.io/tag/django.html">Django</a>
    </p>
  </div>


  <div class="neighbors">
    <a class="btn float-left" href="https://ecrespo.github.io/restful-api-con-django-tastypie-y-django-celery.html" title="Restful API con Django-tastypie y Django-Celery">
      <i class="fa fa-angle-left"></i> Artículo anterior
    </a>
    <a class="btn float-right" href="https://ecrespo.github.io/urwid-libreria-ncurses-para-hacer-aplicaciones-de-texto-para-la-consola-parte-1.html" title="Urwid librería ncurses para hacer aplicaciones de texto para la consola (parte 1).">
      Próximo artículo <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>Te puede gustar</h4>
    <ul class="related-posts">
      <li><a href="https://ecrespo.github.io/restful-api-con-django-tastypie-y-django-celery.html">Restful API con Django-tastypie y Django-Celery</a></li>
      <li><a href="https://ecrespo.github.io/restful-api-con-django-tastypie.html">Restful API con Django-tastypie</a></li>
      <li><a href="https://ecrespo.github.io/iniciando-django-usando-docker.html">Iniciando Django usando Docker</a></li>
      <li><a href="https://ecrespo.github.io/usar-mongodb-en-django.html">Usar mongodb en Django</a></li>
      <li><a href="https://ecrespo.github.io/habilitar-autenticacion-en-un-servidor-mongodb.html">Habilitar autenticación en un servidor mongodb</a></li>
    </ul>
  </div>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234566"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https://seraphto.disqus.com';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Por favor, habilita JavaScript para ver los comentarios.
</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>&copy; 2022 </p>
<p>
Construido con <a href="http://getpelican.com" target="_blank">Pelican</a> usando el tema <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> 
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Página de Seraph ",
  "url" : "https://ecrespo.github.io",
  "image": "//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120",
  "description": " Software Libre, Ciencia de Datos y Python"
}
</script>


</body>
</html>