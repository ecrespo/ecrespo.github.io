
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="http://localhost:8000/theme/pygments/monokai.min.css">


  <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/font-awesome/css/solid.css">


    <link href="http://localhost:8000/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Página de Seraph Atom">



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131517246-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#e5e5ff">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#e5e5ff">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#e5e5ff">

<meta name="author" content="Ernesto Crespo" />
<meta name="description" content="En el artículo anterior explicaba como mejorar las consultas de DNS del equipo con dnsmaq. También se puede agregar equipos con su IP como de un servidor de DNS con Bind9 en funcionamiento. Se tiene una máquina virtual de nombre grievous e IP 192.168.10.53. Para instalr dnsmasq …" />
<meta name="keywords" content="Linux, Debian, Ubuntu, Canaima, dnsmasq">


<meta property="og:site_name" content="Página de Seraph"/>
<meta property="og:title" content="Usar dnsmasq como servidor DNS cache y local"/>
<meta property="og:description" content="En el artículo anterior explicaba como mejorar las consultas de DNS del equipo con dnsmaq. También se puede agregar equipos con su IP como de un servidor de DNS con Bind9 en funcionamiento. Se tiene una máquina virtual de nombre grievous e IP 192.168.10.53. Para instalr dnsmasq …"/>
<meta property="og:locale" content="es_VE"/>
<meta property="og:url" content="http://localhost:8000/usar-dnsmasq-como-servidor-dns-cache-y-local.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2011-08-20 09:00:00-04:30"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="http://localhost:8000/author/ernesto-crespo.html">
<meta property="article:section" content="Tutorial de Linux"/>
<meta property="article:tag" content="Linux"/>
<meta property="article:tag" content="Debian"/>
<meta property="article:tag" content="Ubuntu"/>
<meta property="article:tag" content="Canaima"/>
<meta property="article:tag" content="dnsmasq"/>
<meta property="og:image" content="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120">

  <title>Página de Seraph &ndash; Usar dnsmasq como servidor DNS cache y local</title>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "pub-0261001661746989",
      enable_page_level_ads: true
    });
  </script>
</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="http://localhost:8000">
        <img src="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120" alt="Ernesto Crespo" title="Ernesto Crespo">
      </a>

      <h1>
        <a href="http://localhost:8000">Ernesto Crespo</a>
      </h1>

<p>Data Scientist </p>

      <nav>
        <ul class="list">


              <li>
                <a target="_self"
                   href="http://localhost:8000/pages/About.html#About">
                  Acerca
                </a>
              </li>
              <li>
                <a target="_self"
                   href="http://localhost:8000/pages/Contacto.html#Contacto">
                  Contacto
                </a>
              </li>

        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-medium" href="https://medium.com/@_seraph1" target="_blank">
              <i class="fab fa-medium"></i>
            </a>
          </li>
          <li>
            <a  class="sc-linkedin" href="http://ve.linkedin.com/in/ernestocrespo" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a  class="sc-github" href="https://github.com/ecrespo" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-google" href="https://google.com/+ErnestoCrespo" target="_blank">
              <i class="fab fa-google"></i>
            </a>
          </li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/_seraph1" target="_blank">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
          <li>
            <a  class="sc-facebook" href="https://www.facebook.com/ernesto.crespo" target="_blank">
              <i class="fab fa-facebook"></i>
            </a>
          </li>
          <li>
            <a  class="sc-gitlab" href="https://gitlab.com/ecrespo" target="_blank">
              <i class="fab fa-gitlab"></i>
            </a>
          </li>
          <li>
            <a  class="sc-soundcloud" href="https://soundcloud.com/ernesto-crespo" target="_blank">
              <i class="fab fa-soundcloud"></i>
            </a>
          </li>
          <li>
            <a  class="sc-rss" href="//www.seraph.to/feeds/all.atom.xml" target="_blank">
              <i class="fas fa-rss"></i>
            </a>
          </li>
      </ul>
    </div>

      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-aside"
           data-ad-client="pub-0261001661746989"
           data-ad-slot="1234561"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
  </aside>
  <main>
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-responsive"
           data-ad-client="pub-0261001661746989"
           data-ad-slot="1234562"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>

    <nav>
      <a href="http://localhost:8000">Inicio</a>

      <a href="/archives.html">Archivos</a>
      <a href="/categories.html">Categorías</a>
      <a href="/tags.html">Etiquetas</a>

      <a href="http://localhost:8000/feeds/all.atom.xml">Atom</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="usar-dnsmasq-como-servidor-dns-cache-y-local">Usar dnsmasq como servidor DNS cache y local</h1>
    <p>
      Publicado el sáb 20 agosto 2011 en <a href="http://localhost:8000/category/tutorial-de-linux.html">Tutorial de Linux</a>

        &#8226; 2 min de lectura
    </p>
  </header>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234565"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

  <div>
    <p>En el <a href="https://ecrespo.github.io/mejorando-la-velocidad-de-consultas-de-dns-con-dnsmasq-y-probar-pruebas-de-diagnostico.html">artículo anterior</a> explicaba como mejorar las consultas de DNS del equipo con dnsmaq.</p>
<p>También se puede agregar equipos con su IP como de un servidor de DNS con Bind9 en funcionamiento.</p>
<p>Se tiene una máquina virtual de nombre grievous e IP 192.168.10.53.</p>
<p>Para instalr dnsmasq se ejecuta apt-get.</p>
<div class="highlight"><pre><span class="code-line"><span></span>apt-get install dnsmasq</span>
</pre></div>


<p>Configurar dnsmasq como DNS cache y local.</p>
<p>Se define la ruta del archivo resolv.conf que hace consultas al servidor de DNS externo.</p>
<div class="highlight"><pre><span class="code-line"><span></span>resolv-file=/etc/resolv-orig.conf</span>
</pre></div>


<p>Definir respuestas de peticiones locales dadas por el archivo /etc/hosts.</p>
<div class="highlight"><pre><span class="code-line"><span></span> local=/localnet/</span>
</pre></div>


<p>Y eso es todo lo que hay que cambiarse en el archivo /etc/dnsmasq.conf para resolver nombres de equipos locales por medio de /etc/hosts.</p>
<p>Agregar los equipos en el archivo /etc/hosts.</p>
<p>En este caso se tiene el equipo grievous:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="mf">192.168.10.53</span><span class="w">   </span><span class="n">grievous</span><span class="w">        </span><span class="n">grievous</span><span class="w"></span></span>
</pre></div>


<p>Si se necesita agregar más equipos al servidor de DNS simplemente se edita el archivo /etc/hosts agregando los equipos en dicho archivo.</p>
<p>Se crea el archivo /etc/resolv-orig.conf donde se encuentra las IPs de los servidores de DNS externos.
En este caso se está usando los servidores de DNS de Google, OpenDNS y de la red del trabajo.</p>
<div class="highlight"><pre><span class="code-line"><span></span>nameserver 8.8.8.8 </span>
<span class="code-line">nameserver 8.8.4.4</span>
<span class="code-line">nameserver 208.67.222.222</span>
<span class="code-line">nameserver 208.67.220.220</span>
<span class="code-line">nameserver 192.168.32.254</span>
</pre></div>


<p>Ya se tiene configurado el servidor de DNS, sólo falta que el equipo realice las consultas por medio del archivo /etc/resolv.conf, el cual debe apuntar al servidor local de DNS (127.0.0.1).</p>
<div class="highlight"><pre><span class="code-line"><span></span>nameserver 127.0.0.1</span>
</pre></div>


<p>Ahora se puede probar la resolución de nombres en el equipo.</p>
<p>Probar que devuelve respuestas el servidor DNS al consultar el nombre del equipo grievous:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="nt">host</span><span class="w"> </span><span class="nt">grievous</span><span class="w"></span></span>
<span class="code-line"><span class="nt">grievous</span><span class="w"> </span><span class="nt">has</span><span class="w"> </span><span class="nt">address</span><span class="w"> </span><span class="nt">192</span><span class="p">.</span><span class="nc">168</span><span class="p">.</span><span class="nc">10</span><span class="p">.</span><span class="nc">53</span><span class="w"></span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="nt">dig</span><span class="w"> </span><span class="nt">grievous</span><span class="w"></span></span>
<span class="code-line"></span>
<span class="code-line"><span class="o">;</span><span class="w"> </span><span class="o">&lt;&lt;&gt;&gt;</span><span class="w"> </span><span class="nt">DiG</span><span class="w"> </span><span class="nt">9</span><span class="p">.</span><span class="nc">7</span><span class="p">.</span><span class="nc">3</span><span class="w"> </span><span class="o">&lt;&lt;&gt;&gt;</span><span class="w"> </span><span class="nt">grievous</span><span class="w"></span></span>
<span class="code-line"><span class="o">;;</span><span class="w"> </span><span class="nt">global</span><span class="w"> </span><span class="nt">options</span><span class="o">:</span><span class="w"> </span><span class="o">+</span><span class="nt">cmd</span><span class="w"></span></span>
<span class="code-line"><span class="o">;;</span><span class="w"> </span><span class="nt">Got</span><span class="w"> </span><span class="nt">answer</span><span class="o">:</span><span class="w"></span></span>
<span class="code-line"><span class="o">;;</span><span class="w"> </span><span class="nt">-</span><span class="o">&gt;&gt;</span><span class="nt">HEADER</span><span class="o">&lt;&lt;</span><span class="nt">-</span><span class="w"> </span><span class="nt">opcode</span><span class="o">:</span><span class="w"> </span><span class="nt">QUERY</span><span class="o">,</span><span class="w"> </span><span class="nt">status</span><span class="o">:</span><span class="w"> </span><span class="nt">NOERROR</span><span class="o">,</span><span class="w"> </span><span class="nt">id</span><span class="o">:</span><span class="w"> </span><span class="nt">19819</span><span class="w"></span></span>
<span class="code-line"><span class="o">;;</span><span class="w"> </span><span class="nt">flags</span><span class="o">:</span><span class="w"> </span><span class="nt">qr</span><span class="w"> </span><span class="nt">aa</span><span class="w"> </span><span class="nt">rd</span><span class="w"> </span><span class="nt">ra</span><span class="o">;</span><span class="w"> </span><span class="nt">QUERY</span><span class="o">:</span><span class="w"> </span><span class="nt">1</span><span class="o">,</span><span class="w"> </span><span class="nt">ANSWER</span><span class="o">:</span><span class="w"> </span><span class="nt">1</span><span class="o">,</span><span class="w"> </span><span class="nt">AUTHORITY</span><span class="o">:</span><span class="w"> </span><span class="nt">0</span><span class="o">,</span><span class="w"> </span><span class="nt">ADDITIONAL</span><span class="o">:</span><span class="w"> </span><span class="nt">0</span><span class="w"></span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="o">;;</span><span class="w"> </span><span class="nt">QUESTION</span><span class="w"> </span><span class="nt">SECTION</span><span class="o">:</span><span class="w"></span></span>
<span class="code-line"><span class="o">;</span><span class="nt">grievous</span><span class="o">.</span><span class="w">          </span><span class="nt">IN</span><span class="w">  </span><span class="nt">A</span><span class="w"></span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="o">;;</span><span class="w"> </span><span class="nt">ANSWER</span><span class="w"> </span><span class="nt">SECTION</span><span class="o">:</span><span class="w"></span></span>
<span class="code-line"><span class="nt">grievous</span><span class="o">.</span><span class="w">       </span><span class="nt">0</span><span class="w">   </span><span class="nt">IN</span><span class="w">  </span><span class="nt">A</span><span class="w">   </span><span class="nt">192</span><span class="p">.</span><span class="nc">168</span><span class="p">.</span><span class="nc">10</span><span class="p">.</span><span class="nc">53</span><span class="w"></span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="o">;;</span><span class="w"> </span><span class="nt">Query</span><span class="w"> </span><span class="nt">time</span><span class="o">:</span><span class="w"> </span><span class="nt">6</span><span class="w"> </span><span class="nt">msec</span><span class="w"></span></span>
<span class="code-line"><span class="o">;;</span><span class="w"> </span><span class="nt">SERVER</span><span class="o">:</span><span class="w"> </span><span class="nt">127</span><span class="p">.</span><span class="nc">0</span><span class="p">.</span><span class="nc">0</span><span class="p">.</span><span class="nc">1</span><span class="p">#</span><span class="nn">53</span><span class="o">(</span><span class="nt">127</span><span class="p">.</span><span class="nc">0</span><span class="p">.</span><span class="nc">0</span><span class="p">.</span><span class="nc">1</span><span class="o">)</span><span class="w"></span></span>
<span class="code-line"><span class="o">;;</span><span class="w"> </span><span class="nt">WHEN</span><span class="o">:</span><span class="w"> </span><span class="nt">Sat</span><span class="w"> </span><span class="nt">Aug</span><span class="w"> </span><span class="nt">20</span><span class="w"> </span><span class="nt">10</span><span class="p">:</span><span class="nd">06</span><span class="p">:</span><span class="nd">45</span><span class="w"> </span><span class="nt">2011</span><span class="w"></span></span>
<span class="code-line"><span class="o">;;</span><span class="w"> </span><span class="nt">MSG</span><span class="w"> </span><span class="nt">SIZE</span><span class="w">  </span><span class="nt">rcvd</span><span class="o">:</span><span class="w"> </span><span class="nt">42</span><span class="w"></span></span>
</pre></div>


<p>Ahora se puede verificar los rendimientos de los servidores de DNS con NameBench. Para instalarlo se ejecuta apt-get.</p>
<div class="highlight"><pre><span class="code-line"><span></span>apt-get install  namebench</span>
</pre></div>


<p>En la siguiente figura se muestra la ejecución de namebench donde se le define el servidor de Nombres a utilizar.</p>
<p><img alt="namebench" src="./images/namebench.png"></p>
<p>A continuación se muestra las figuras del resultado de Namebench.</p>
<p><img alt="Resultado namebench 1" src="./images/namebench1.png"></p>
<p><img alt="Resultado namebench 2" src="./images/namebench2.png"></p>
<p><img alt="Resultado namebench 3" src="./images/namebench3.png"></p>
<p><img alt="Resultado namebench 4" src="./images/namebench4.png"></p>
<p>===</p>
<p>¡Haz tu donativo!
Si te gustó el artículo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
dirección: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el código QR desde billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"></p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="http://localhost:8000/tag/linux.html">Linux</a>
      <a href="http://localhost:8000/tag/debian.html">Debian</a>
      <a href="http://localhost:8000/tag/ubuntu.html">Ubuntu</a>
      <a href="http://localhost:8000/tag/canaima.html">Canaima</a>
      <a href="http://localhost:8000/tag/dnsmasq.html">dnsmasq</a>
    </p>
  </div>


  <div class="neighbors">
    <a class="btn float-left" href="http://localhost:8000/manejando-contactos-y-realizando-una-llamada-con-python-en-android.html" title="Manejando contactos y realizando una llamada con python en Android">
      <i class="fa fa-angle-left"></i> Artículo anterior
    </a>
    <a class="btn float-right" href="http://localhost:8000/compartir-repositorios-de-mercurial-con-mercurial-server.html" title="Compartir repositorios de Mercurial con mercurial-server">
      Próximo artículo <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>Te puede gustar</h4>
    <ul class="related-posts">
      <li><a href="http://localhost:8000/mejorar-las-respuestas-de-consultas-de-dns-con-dnsmasq-usando-dnscrypt.html">Mejorar las respuestas de consultas de DNS con dnsmasq usando DNSCrypt</a></li>
      <li><a href="http://localhost:8000/usar-dockerui-para-la-gestion-de-imagenes-y-contenedores-de-docker.html">Usar dockerui para la gestión de imágenes y contenedores de Docker</a></li>
      <li><a href="http://localhost:8000/correr-aplicaciones-de-escritorio-desde-un-contenedor-docker.html">Correr aplicaciones de escritorio desde un contenedor Docker</a></li>
      <li><a href="http://localhost:8000/crear-un-contenedor-docker-como-entorno-de-desarrollo-para-sailsjs.html">Crear un contenedor Docker como entorno de desarrollo para sails.js</a></li>
      <li><a href="http://localhost:8000/crear-una-imagen-docker-para-mongodb-3.html">Crear una imagen Docker para MongoDB 3</a></li>
    </ul>
  </div>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234566"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https://seraphto.disqus.com';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Por favor, habilita JavaScript para ver los comentarios.
</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>&copy; 2022 </p>
<p>
Construido con <a href="http://getpelican.com" target="_blank">Pelican</a> usando el tema <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> 
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Página de Seraph ",
  "url" : "http://localhost:8000",
  "image": "//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120",
  "description": " Software Libre, Ciencia de Datos y Python"
}
</script>


</body>
</html>