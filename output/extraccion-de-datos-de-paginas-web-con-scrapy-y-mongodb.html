
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/pygments/monokai.min.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/solid.css">


    <link href="https://ecrespo.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Página de Seraph Atom">



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131517246-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#333333">

<meta name="author" content="Ernesto Crespo" />
<meta name="description" content="En el artículo anterior (Extracción de datos de páginas web con scrapy se hizo una introducción del uso de scrapy basándose en el tutorial de la página del proyecto. Este artículo continua la serie de artículos sobre extracción de datos de páginas web (webscraping. En el artículo anterior se extrajo …" />
<meta name="keywords" content="Debian, Linux, Python, Ubuntu, Webscraping">

<meta property="og:site_name" content="Página de Seraph"/>
<meta property="og:title" content="Extracción de datos de páginas web con scrapy y MongoDB"/>
<meta property="og:description" content="En el artículo anterior (Extracción de datos de páginas web con scrapy se hizo una introducción del uso de scrapy basándose en el tutorial de la página del proyecto. Este artículo continua la serie de artículos sobre extracción de datos de páginas web (webscraping. En el artículo anterior se extrajo …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://ecrespo.github.io/extraccion-de-datos-de-paginas-web-con-scrapy-y-mongodb.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2015-01-02 09:00:00-04:30"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://ecrespo.github.io/author/ernesto-crespo.html">
<meta property="article:section" content="Tutorial Python y Linux"/>
<meta property="article:tag" content="Debian"/>
<meta property="article:tag" content="Linux"/>
<meta property="article:tag" content="Python"/>
<meta property="article:tag" content="Ubuntu"/>
<meta property="article:tag" content="Webscraping"/>
<meta property="og:image" content="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120">

  <title>Página de Seraph &ndash; Extracción de datos de páginas web con scrapy y MongoDB</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://ecrespo.github.io">
        <img src="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120" alt="Ernesto Crespo" title="Ernesto Crespo">
      </a>
      <h1><a href="https://ecrespo.github.io">Ernesto Crespo</a></h1>

<p>Data Scientist </p>
      <nav>
        <ul class="list">
          <li><a href="https://ecrespo.github.io/pages/About.html#About">Acerca</a></li>
          <li><a href="https://ecrespo.github.io/pages/Contacto.html#Contacto">Contacto</a></li>

        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-medium" href="https://medium.com/@_seraph1" target="_blank">
            <i class="fab fa-medium">
            </i>
          </a></li>
          <li>
            <a  class="sc-linkedin" href="http://ve.linkedin.com/in/ernestocrespo" target="_blank">
            <i class="fab fa-linkedin">
            </i>
          </a></li>
          <li>
            <a  class="sc-github" href="https://github.com/ecrespo" target="_blank">
            <i class="fab fa-github">
            </i>
          </a></li>
          <li>
            <a  class="sc-google" href="https://google.com/+ErnestoCrespo" target="_blank">
            <i class="fab fa-google">
            </i>
          </a></li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/_seraph1" target="_blank">
            <i class="fab fa-twitter">
            </i>
          </a></li>
          <li>
            <a  class="sc-facebook" href="https://www.facebook.com/ernesto.crespo" target="_blank">
            <i class="fab fa-facebook">
            </i>
          </a></li>
          <li>
            <a  class="sc-gitlab" href="https://gitlab.com/ecrespo" target="_blank">
            <i class="fab fa-gitlab">
            </i>
          </a></li>
          <li>
            <a  class="sc-soundcloud" href="https://soundcloud.com/ernesto-crespo" target="_blank">
            <i class="fab fa-soundcloud">
            </i>
          </a></li>
          <li>
            <a  class="sc-rss" href="//www.seraph.to/feeds/all.atom.xml" target="_blank">
            <i class="fas fa-rss">
            </i>
          </a></li>
      </ul>
    </div>
    
    <ul class="tagcloud">
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/gitlab.html">
            gitlab
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/eve.html">
            Eve
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/tensorflow.html">
            TensorFlow
                    <span class="badge">6</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/mechanize.html">
            Mechanize
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/flask.html">
            Flask
                    <span class="badge">19</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/networkx.html">
            Networkx
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/blockchain.html">
            Blockchain
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/jupyter-notebook.html">
            Jupyter Notebook
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/mongodb.html">
            MongoDB
                    <span class="badge">13</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/crud.html">
            CRUD
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/twitter.html">
            Twitter
                    <span class="badge">7</span>
            </a>
        </li>
        <li class="tag-1">
            <a href="https://ecrespo.github.io/tag/general.html">
            General
                    <span class="badge">113</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/gitlab-ci.html">
            Gitlab-ci
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/paquetes.html">
            Paquetes
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/webkit.html">
            webkit
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/qt.html">
            qt
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/matplotlib.html">
            Matplotlib
                    <span class="badge">29</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/beautifulsoup.html">
            BeautifulSoup
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-1">
            <a href="https://ecrespo.github.io/tag/ubuntu.html">
            Ubuntu
                    <span class="badge">135</span>
            </a>
        </li>
        <li class="tag-4">
            <a href="https://ecrespo.github.io/tag/pipenv.html">
            Pipenv
                    <span class="badge">1</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/api-restful.html">
            API restful
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/simplecv.html">
            SimpleCV
                    <span class="badge">4</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/gnome.html">
            gnome
                    <span class="badge">19</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/kivy.html">
            kivy
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/data-science.html">
            Data Science
                    <span class="badge">6</span>
            </a>
        </li>
        <li class="tag-1">
            <a href="https://ecrespo.github.io/tag/debian.html">
            Debian
                    <span class="badge">180</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/kaggle.html">
            Kaggle
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-1">
            <a href="https://ecrespo.github.io/tag/docker.html">
            Docker
                    <span class="badge">52</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/django.html">
            Django
                    <span class="badge">11</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/spark.html">
            Spark
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/webscraping.html">
            Webscraping
                    <span class="badge">13</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/zeromq.html">
            ZeroMQ
                    <span class="badge">9</span>
            </a>
        </li>
        <li class="tag-1">
            <a href="https://ecrespo.github.io/tag/linux.html">
            Linux
                    <span class="badge">186</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/sqlite3.html">
            Sqlite3
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/doctest.html">
            Doctest
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/reproductor-musica.html">
            Reproductor Música
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/dnsmasq.html">
            Dnsmasq
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/wikipedia.html">
            Wikipedia
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/glade.html">
            glade
                    <span class="badge">14</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/android.html">
            Android
                    <span class="badge">41</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/pylint.html">
            pylint
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-1">
            <a href="https://ecrespo.github.io/tag/python.html">
            Python
                    <span class="badge">284</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/machine-learning.html">
            Machine Learning
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/visualizacion.html">
            Visualización
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/numpy.html">
            Numpy
                    <span class="badge">32</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/unittest.html">
            unittest
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/asus.html">
            Asus
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/pandas.html">
            Pandas
                    <span class="badge">9</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/ciencia-de-datos.html">
            Ciencia de Datos
                    <span class="badge">7</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/docker-machine.html">
            docker-machine
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/gconf.html">
            gconf
                    <span class="badge">4</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/profiling.html">
            Profiling
                    <span class="badge">4</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/redis.html">
            Redis
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/beautiful-soup.html">
            Beautiful Soup
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/dns.html">
            DNS
                    <span class="badge">6</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/pruebas-unitarias.html">
            Pruebas unitarias
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/tor.html">
            Tor
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-1">
            <a href="https://ecrespo.github.io/tag/canaima.html">
            Canaima
                    <span class="badge">111</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/flask-mongoalchemy.html">
            Flask-MongoAlchemy
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/accesibilidad.html">
            Accesibilidad
                    <span class="badge">10</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/sympy.html">
            Sympy
                    <span class="badge">7</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/scikit-learn.html">
            Scikit-Learn
                    <span class="badge">5</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/gtk.html">
            gtk
                    <span class="badge">15</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/paramiko.html">
            Paramiko
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/pyautogui.html">
            PyAutoGUI
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/sms.html">
            SMS
                    <span class="badge">4</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/redes.html">
            Redes
                    <span class="badge">5</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/arduino.html">
            Arduino
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/mercurial.html">
            Mercurial
                    <span class="badge">8</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/cicd.html">
            CI/CD
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/pdf-scraping.html">
            pdf scraping
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/ssh.html">
            SSH
                    <span class="badge">6</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/flask-restful.html">
            Flask-restful
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/red-neuronal.html">
            Red Neuronal
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/seguridad.html">
            Seguridad
                    <span class="badge">4</span>
            </a>
        </li>
        <li class="tag-4">
            <a href="https://ecrespo.github.io/tag/secure.html">
            Secure
                    <span class="badge">1</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/tiflotecnologia.html">
            tiflotecnologia
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/videos.html">
            Videos
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/pypdf.html">
            pypdf
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/docker-compose.html">
            Docker-compose
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/camara.html">
            Camara
                    <span class="badge">4</span>
            </a>
        </li>
        <li class="tag-4">
            <a href="https://ecrespo.github.io/tag/quality-code.html">
            Quality Code
                    <span class="badge">1</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/empaquetado.html">
            Empaquetado
                    <span class="badge">9</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/json.html">
            json
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/control-de-versiones.html">
            Control de versiones
                    <span class="badge">6</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/devops.html">
            DevOps
                    <span class="badge">6</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/request.html">
            Request
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/pyqt.html">
            PyQt
                    <span class="badge">13</span>
            </a>
        </li>
        <li class="tag-2">
            <a href="https://ecrespo.github.io/tag/poo.html">
            POO
                    <span class="badge">10</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/cprofile.html">
            cProfile
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/csv.html">
            CSV
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/api-restfull.html">
            Api restfull
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/coinmarketcap.html">
            Coinmarketcap
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/pylab.html">
            Pylab
                    <span class="badge">3</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/arbol-de-decision.html">
            Árbol de decisión
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/inteligencia-artificial.html">
            Inteligencia Artificial
                    <span class="badge">4</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/estructura-de-datos.html">
            Estructura de datos
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/gps.html">
            GPS
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/fedora.html">
            Fedora
                    <span class="badge">2</span>
            </a>
        </li>
        <li class="tag-3">
            <a href="https://ecrespo.github.io/tag/bitcoin.html">
            Bitcoin
                    <span class="badge">2</span>
            </a>
        </li>
   </ul>



  </aside>
  <main>

    <nav>
      <a href="https://ecrespo.github.io">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="https://ecrespo.github.io/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="extraccion-de-datos-de-paginas-web-con-scrapy-y-mongodb">Extracción de datos de páginas web con scrapy y MongoDB</h1>
    <p>
          Posted on vie 02 enero 2015 in <a href="https://ecrespo.github.io/category/tutorial-python-y-linux.html">Tutorial Python y Linux</a>


        &#8226; 5 min read
    </p>
  </header>


  <div>
    <p>En el artículo anterior (<a href="https://www.seraph.to/extraccion-de-datos-de-paginas-web-con-scrapy.html#extraccion-de-datos-de-paginas-web-con-scrapy">Extracción de datos de páginas web con scrapy</a> se hizo una introducción del uso de scrapy basándose en el tutorial de la página del proyecto.</p>
<p>Este artículo continua la serie de artículos sobre extracción de datos de páginas web (<a href="https://www.seraph.to/tag/webscraping.html">webscraping</a>.</p>
<p>En el artículo <a href="https://www.seraph.to/extraccion-de-datos-de-paginas-web-con-scrapy.html#extraccion-de-datos-de-paginas-web-con-scrapy">anterior</a> se extrajo información de la página <a href="http://www.dmoz.org/">dmoz.org</a>, en este caso se usará la misma página, pero está vez basandose en el 
artículo en Inglés <a href="https://realpython.com/web-scraping-with-scrapy-and-mongodb/?utm_source=Python+Weekly+Newsletter&amp;utm_campaign=3387594e10-Python_Weekly_Issue_172_January_1_2015&amp;utm_medium=email&amp;utm_term=0_9e26887fc5-3387594e10-312675721">Web scraping with scrapy and MongoDB</a>. </p>
<p>En este artículo le hacen la extracción de datos a <a href="https://stackoverflow.org/">stackoverflow</a>, pero por problemas de conexión se mostrará la extracción con el sitio <a href="http://www.dmoz.org/">dmoz.org</a>.</p>
<p>Aparte de hacer la extracción de datos se agregará lo extraído a la basa de datos Mongo, para montar el servidor MongoDB pueden seguir el siguiente artículo, y para usarlo desde python este otro.</p>
<p>Para visualizar los datos insertados en MongoDB se puede instalar la aplicación <a href="https://robomongo.org/">robomongo</a>.</p>
<p>El procedimiento es el mismo que el del artículo anterior, se crea el proyecto:</p>
<div class="highlight"><pre><span></span><span class="err">$</span><span class="n">scrapy</span> <span class="n">startproject</span> <span class="n">dmoz</span>
</pre></div>


<p>Se modifica el archivo <code>dmoz/dmoz/items.py</code>:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scrapy</span> <span class="kn">import</span> <span class="n">Item</span><span class="p">,</span><span class="n">Field</span>

<span class="k">class</span> <span class="nc">DmozItem</span><span class="p">(</span><span class="n">Item</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
    <span class="n">desc</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
</pre></div>


<p>Ahora se crea la araña <code>dmoz/dmoz/spider/dmoz_spider.py</code>:</p>
<div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">#Se importa Spider y Selector</span>
<span class="kn">from</span> <span class="nn">scrapy</span> <span class="kn">import</span> <span class="n">Spider</span>
<span class="kn">from</span> <span class="nn">scrapy.selector</span> <span class="kn">import</span> <span class="n">Selector</span>

<span class="c1">#Se importa la clase DmozItem</span>
<span class="kn">from</span> <span class="nn">dmoz.items</span> <span class="kn">import</span> <span class="n">DmozItem</span>


<span class="c1">#Se crea la clase DmozSpider que hereda de Spider .</span>
<span class="k">class</span> <span class="nc">DmozSpider</span><span class="p">(</span><span class="n">Spider</span><span class="p">):</span>
    <span class="c1">#Se define el nombre del proyecto</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;dmoz&#39;</span>
    <span class="c1">#El proyecto al cual está permitido</span>
    <span class="n">allowed_domains</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;dmoz.org&#39;</span><span class="p">]</span>
    <span class="c1">#Se define las urls a extraer datos</span>
    <span class="n">start_urls</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;http://www.dmoz.org/Computers/Programming/Languages/Python/Books/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://www.dmoz.org/Computers/Programming/Languages/Python/Resources/&quot;</span>
    <span class="p">]</span>


    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="c1">#Se instancia el selector de ul-&gt; li del artículo anterior</span>
        <span class="n">questions</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">(</span><span class="n">response</span><span class="p">)</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//ul/li&#39;</span><span class="p">)</span>
        <span class="c1">#Se crea una lista de items</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1">#Se recorre los li</span>
        <span class="k">for</span> <span class="n">question</span> <span class="ow">in</span> <span class="n">questions</span><span class="p">:</span>
            <span class="c1">#Se instancia DmozItem en item</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">DmozItem</span><span class="p">()</span>
            <span class="c1">#Se extra title, link y descripción de cada enlace de la página</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">question</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;a/text()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
            <span class="n">link</span> <span class="o">=</span> <span class="n">question</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;a/@href&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
            <span class="n">desc</span> <span class="o">=</span> <span class="n">question</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;text()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
            <span class="c1">#Se asocia estos elementos a la lista</span>
            <span class="n">item</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">title</span>
            <span class="n">item</span><span class="p">[</span><span class="s1">&#39;link&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">link</span>
            <span class="n">item</span><span class="p">[</span><span class="s1">&#39;desc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">desc</span>
            <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="c1">#Se retorna el item</span>
        <span class="k">return</span> <span class="n">item</span>
</pre></div>


<p>Se prueba la araña y luego se guarda en un archivo json.</p>
<div class="highlight"><pre><span></span><span class="n">scrapy</span> <span class="n">crawl</span> <span class="n">dmoz</span>

<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">37</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">scrapy</span><span class="p">]</span> <span class="n">INFO</span><span class="p">:</span> <span class="n">Scrapy</span> <span class="mf">0.24</span><span class="o">.</span><span class="mi">2</span> <span class="n">started</span> <span class="p">(</span><span class="n">bot</span><span class="p">:</span> <span class="n">dmoz</span><span class="p">)</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">37</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">scrapy</span><span class="p">]</span> <span class="n">INFO</span><span class="p">:</span> <span class="n">Optional</span> <span class="n">features</span> <span class="n">available</span><span class="p">:</span> <span class="n">ssl</span><span class="p">,</span> <span class="n">http11</span><span class="p">,</span> <span class="n">boto</span><span class="p">,</span> <span class="n">django</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">37</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">scrapy</span><span class="p">]</span> <span class="n">INFO</span><span class="p">:</span> <span class="n">Overridden</span> <span class="n">settings</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;NEWSPIDER_MODULE&#39;</span><span class="p">:</span> <span class="s1">&#39;dmoz.spiders&#39;</span><span class="p">,</span> <span class="s1">&#39;SPIDER_MODULES&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;dmoz.spiders&#39;</span><span class="p">],</span> <span class="s1">&#39;BOT_NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;dmoz&#39;</span><span class="p">}</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">37</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">scrapy</span><span class="p">]</span> <span class="n">INFO</span><span class="p">:</span> <span class="n">Enabled</span> <span class="n">extensions</span><span class="p">:</span> <span class="n">LogStats</span><span class="p">,</span> <span class="n">TelnetConsole</span><span class="p">,</span> <span class="n">CloseSpider</span><span class="p">,</span> <span class="n">WebService</span><span class="p">,</span> <span class="n">CoreStats</span><span class="p">,</span> <span class="n">SpiderState</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">39</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">scrapy</span><span class="p">]</span> <span class="n">INFO</span><span class="p">:</span> <span class="n">Enabled</span> <span class="n">downloader</span> <span class="n">middlewares</span><span class="p">:</span> <span class="n">HttpAuthMiddleware</span><span class="p">,</span> <span class="n">DownloadTimeoutMiddleware</span><span class="p">,</span> <span class="n">UserAgentMiddleware</span><span class="p">,</span> <span class="n">RetryMiddleware</span><span class="p">,</span> <span class="n">DefaultHeadersMiddleware</span><span class="p">,</span> <span class="n">MetaRefreshMiddleware</span><span class="p">,</span> <span class="n">HttpCompressionMiddleware</span><span class="p">,</span> <span class="n">RedirectMiddleware</span><span class="p">,</span> <span class="n">CookiesMiddleware</span><span class="p">,</span> <span class="n">ChunkedTransferMiddleware</span><span class="p">,</span> <span class="n">DownloaderStats</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">39</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">scrapy</span><span class="p">]</span> <span class="n">INFO</span><span class="p">:</span> <span class="n">Enabled</span> <span class="n">spider</span> <span class="n">middlewares</span><span class="p">:</span> <span class="n">HttpErrorMiddleware</span><span class="p">,</span> <span class="n">OffsiteMiddleware</span><span class="p">,</span> <span class="n">RefererMiddleware</span><span class="p">,</span> <span class="n">UrlLengthMiddleware</span><span class="p">,</span> <span class="n">DepthMiddleware</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python2</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">dist</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">scrapy</span><span class="o">/</span><span class="n">contrib</span><span class="o">/</span><span class="n">pipeline</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span> <span class="n">ScrapyDeprecationWarning</span><span class="p">:</span> <span class="n">ITEM_PIPELINES</span> <span class="n">defined</span> <span class="k">as</span> <span class="n">a</span> <span class="nb">list</span> <span class="ow">or</span> <span class="n">a</span> <span class="nb">set</span> <span class="ow">is</span> <span class="n">deprecated</span><span class="p">,</span> <span class="n">switch</span> <span class="n">to</span> <span class="n">a</span> <span class="nb">dict</span>
  <span class="n">category</span><span class="o">=</span><span class="n">ScrapyDeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">39</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">scrapy</span><span class="p">]</span> <span class="n">INFO</span><span class="p">:</span> <span class="n">Enabled</span> <span class="n">item</span> <span class="n">pipelines</span><span class="p">:</span> <span class="n">MongoDBPipeline</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">39</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">dmoz</span><span class="p">]</span> <span class="n">INFO</span><span class="p">:</span> <span class="n">Spider</span> <span class="n">opened</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">39</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">dmoz</span><span class="p">]</span> <span class="n">INFO</span><span class="p">:</span> <span class="n">Crawled</span> <span class="mi">0</span> <span class="n">pages</span> <span class="p">(</span><span class="n">at</span> <span class="mi">0</span> <span class="n">pages</span><span class="o">/</span><span class="nb">min</span><span class="p">),</span> <span class="n">scraped</span> <span class="mi">0</span> <span class="n">items</span> <span class="p">(</span><span class="n">at</span> <span class="mi">0</span> <span class="n">items</span><span class="o">/</span><span class="nb">min</span><span class="p">)</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">39</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">scrapy</span><span class="p">]</span> <span class="n">DEBUG</span><span class="p">:</span> <span class="n">Telnet</span> <span class="n">console</span> <span class="n">listening</span> <span class="n">on</span> <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">6023</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">39</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">scrapy</span><span class="p">]</span> <span class="n">DEBUG</span><span class="p">:</span> <span class="n">Web</span> <span class="n">service</span> <span class="n">listening</span> <span class="n">on</span> <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">6080</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">45</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">dmoz</span><span class="p">]</span> <span class="n">DEBUG</span><span class="p">:</span> <span class="n">Crawled</span> <span class="p">(</span><span class="mi">200</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">GET</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">dmoz</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">Computers</span><span class="o">/</span><span class="n">Programming</span><span class="o">/</span><span class="n">Languages</span><span class="o">/</span><span class="n">Python</span><span class="o">/</span><span class="n">Resources</span><span class="o">/&gt;</span> <span class="p">(</span><span class="n">referer</span><span class="p">:</span> <span class="bp">None</span><span class="p">)</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">45</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">dmoz</span><span class="p">]</span> <span class="n">DEBUG</span><span class="p">:</span> <span class="n">Question</span> <span class="n">added</span> <span class="n">to</span> <span class="n">MongoDB</span> <span class="n">database</span><span class="err">!</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">45</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">dmoz</span><span class="p">]</span> <span class="n">DEBUG</span><span class="p">:</span> <span class="n">Scraped</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="mi">200</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">dmoz</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">Computers</span><span class="o">/</span><span class="n">Programming</span><span class="o">/</span><span class="n">Languages</span><span class="o">/</span><span class="n">Python</span><span class="o">/</span><span class="n">Resources</span><span class="o">/&gt;</span>
 <span class="p">{</span><span class="s1">&#39;desc&#39;</span><span class="p">:</span> <span class="p">[</span><span class="sa">u</span><span class="s1">&#39;</span><span class="se">\r\n\t\r\n</span><span class="s1">                                &#39;</span><span class="p">,</span>
           <span class="sa">u</span><span class="s1">&#39; </span><span class="se">\r\n\t\t\t\r\n</span><span class="s1">                                - Scripts, examples and news about Python programming for the Windows platform.</span><span class="se">\r\n</span><span class="s1">                                </span><span class="se">\r\n</span><span class="s1">                                &#39;</span><span class="p">,</span>
           <span class="sa">u</span><span class="s1">&#39;</span><span class="se">\r\n</span><span class="s1">                                &#39;</span><span class="p">],</span>
  <span class="s1">&#39;link&#39;</span><span class="p">:</span> <span class="p">[</span><span class="sa">u</span><span class="s1">&#39;http://win32com.goermezer.de/&#39;</span><span class="p">],</span>
  <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="p">[</span><span class="sa">u</span><span class="s1">&#39;Social Bug&#39;</span><span class="p">]}</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">46</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">dmoz</span><span class="p">]</span> <span class="n">DEBUG</span><span class="p">:</span> <span class="n">Crawled</span> <span class="p">(</span><span class="mi">200</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">GET</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">dmoz</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">Computers</span><span class="o">/</span><span class="n">Programming</span><span class="o">/</span><span class="n">Languages</span><span class="o">/</span><span class="n">Python</span><span class="o">/</span><span class="n">Books</span><span class="o">/&gt;</span> <span class="p">(</span><span class="n">referer</span><span class="p">:</span> <span class="bp">None</span><span class="p">)</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">46</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">dmoz</span><span class="p">]</span> <span class="n">DEBUG</span><span class="p">:</span> <span class="n">Question</span> <span class="n">added</span> <span class="n">to</span> <span class="n">MongoDB</span> <span class="n">database</span><span class="err">!</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">46</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">dmoz</span><span class="p">]</span> <span class="n">DEBUG</span><span class="p">:</span> <span class="n">Scraped</span> <span class="kn">from</span> <span class="o">&lt;</span><span class="mi">200</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">dmoz</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">Computers</span><span class="o">/</span><span class="n">Programming</span><span class="o">/</span><span class="n">Languages</span><span class="o">/</span><span class="n">Python</span><span class="o">/</span><span class="n">Books</span><span class="o">/&gt;</span>
 <span class="p">{</span><span class="s1">&#39;desc&#39;</span><span class="p">:</span> <span class="p">[</span><span class="sa">u</span><span class="s1">&#39;</span><span class="se">\r\n\t\r\n</span><span class="s1">                                &#39;</span><span class="p">,</span>
           <span class="sa">u</span><span class="s1">&#39; </span><span class="se">\r\n\t\t\t\r\n</span><span class="s1">                                - By Sean McGrath; Prentice Hall PTR, 2000, ISBN 0130211192, has CD-ROM. Methods to build XML applications fast, Python tutorial, DOM and SAX, new Pyxie open source XML processing library. [Prentice Hall PTR]</span><span class="se">\r\n</span><span class="s1">                                </span><span class="se">\r\n</span><span class="s1">                                &#39;</span><span class="p">,</span>
           <span class="sa">u</span><span class="s1">&#39;</span><span class="se">\r\n</span><span class="s1">                                &#39;</span><span class="p">],</span>
  <span class="s1">&#39;link&#39;</span><span class="p">:</span> <span class="p">[</span><span class="sa">u</span><span class="s1">&#39;http://www.informit.com/store/product.aspx?isbn=0130211192&#39;</span><span class="p">],</span>
  <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="p">[</span><span class="sa">u</span><span class="s1">&#39;XML Processing with Python&#39;</span><span class="p">]}</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">46</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">dmoz</span><span class="p">]</span> <span class="n">INFO</span><span class="p">:</span> <span class="n">Closing</span> <span class="n">spider</span> <span class="p">(</span><span class="n">finished</span><span class="p">)</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">46</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">dmoz</span><span class="p">]</span> <span class="n">INFO</span><span class="p">:</span> <span class="n">Dumping</span> <span class="n">Scrapy</span> <span class="n">stats</span><span class="p">:</span>
 <span class="p">{</span><span class="s1">&#39;downloader/request_bytes&#39;</span><span class="p">:</span> <span class="mi">516</span><span class="p">,</span>
  <span class="s1">&#39;downloader/request_count&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s1">&#39;downloader/request_method_count/GET&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s1">&#39;downloader/response_bytes&#39;</span><span class="p">:</span> <span class="mi">16342</span><span class="p">,</span>
  <span class="s1">&#39;downloader/response_count&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s1">&#39;downloader/response_status_count/200&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s1">&#39;finish_reason&#39;</span><span class="p">:</span> <span class="s1">&#39;finished&#39;</span><span class="p">,</span>
  <span class="s1">&#39;finish_time&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">119507</span><span class="p">),</span>
  <span class="s1">&#39;item_scraped_count&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s1">&#39;log_count/DEBUG&#39;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="s1">&#39;log_count/INFO&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
  <span class="s1">&#39;response_received_count&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s1">&#39;scheduler/dequeued&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s1">&#39;scheduler/dequeued/memory&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s1">&#39;scheduler/enqueued&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s1">&#39;scheduler/enqueued/memory&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s1">&#39;start_time&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">404138</span><span class="p">)}</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">46</span><span class="o">-</span><span class="mo">0430</span> <span class="p">[</span><span class="n">dmoz</span><span class="p">]</span> <span class="n">INFO</span><span class="p">:</span> <span class="n">Spider</span> <span class="n">closed</span> <span class="p">(</span><span class="n">finished</span><span class="p">)</span>
</pre></div>


<p>Se guarda la información en el archivo json:</p>
<div class="highlight"><pre><span></span>scrapy crawl dmoz -o dmoz.json -t json
</pre></div>


<p>El archivo <code>dmoz.json</code> contiene lo siguiente:</p>
<div class="highlight"><pre><span></span>[{&quot;desc&quot;: [&quot;\r\n\t\r\n                                &quot;, &quot; \r\n\t\t\t\r\n                                - Scripts, examples and news about Python programming for the Windows platform.\r\n                                \r\n                                &quot;, &quot;\r\n                                &quot;], &quot;link&quot;: [&quot;http://win32com.goermezer.de/&quot;], &quot;title&quot;: [&quot;Social Bug&quot;]},
{&quot;desc&quot;: [&quot;\r\n\t\r\n                                &quot;, &quot; \r\n\t\t\t\r\n                                - By Sean McGrath; Prentice Hall PTR, 2000, ISBN 0130211192, has CD-ROM. Methods to build XML applications fast, Python tutorial, DOM and SAX, new Pyxie open source XML processing library. [Prentice Hall PTR]\r\n                                \r\n                                &quot;, &quot;\r\n                                &quot;], &quot;link&quot;: [&quot;http://www.informit.com/store/product.aspx?isbn=0130211192&quot;], &quot;
</pre></div>


<p>Para configurar el acceso a MongoDB se edita el archivo <code>dmoz/dmoz/settings.py</code>, se agrega lo siguiente:</p>
<div class="highlight"><pre><span></span>ITEM_PIPELINES = [&#39;dmoz.pipelines.MongoDBPipeline&#39;, ]

#información de conexión con el servidor mongodb, host, puerto, base de datos y colección.
MONGODB_SERVER = &quot;localhost&quot;
MONGODB_PORT = 27017
MONGODB_DB = &quot;dmoz&quot;
MONGODB_COLLECTION = &quot;links&quot;
</pre></div>


<p>Se edita <code>dmoz/dmoz/pipelines.py</code> para generar el flujo del proceso de extracción de datos, se define la conexión a la base de datos y luego se inserta los datos a mongodb:</p>
<div class="highlight"><pre><span></span><span class="c1">#Se importa pymongo</span>
<span class="kn">import</span> <span class="nn">pymongo</span>

<span class="c1">#Se importa la configuración de settings</span>
<span class="kn">from</span> <span class="nn">scrapy.conf</span> <span class="kn">import</span> <span class="n">settings</span>

<span class="c1">#Se importa DropItem y log</span>
<span class="kn">from</span> <span class="nn">scrapy.exceptions</span> <span class="kn">import</span> <span class="n">DropItem</span>
<span class="kn">from</span> <span class="nn">scrapy</span> <span class="kn">import</span> <span class="n">log</span>


<span class="c1">#Se crea la clase MongoDBPipeline</span>
<span class="k">class</span> <span class="nc">MongoDBPipeline</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#Se conecta al servidor mongodb</span>
        <span class="n">connection</span> <span class="o">=</span> <span class="n">pymongo</span><span class="o">.</span><span class="n">Connection</span><span class="p">(</span>
            <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;MONGODB_SERVER&#39;</span><span class="p">],</span>
            <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;MONGODB_PORT&#39;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="c1">#Se instancia los datos de conexión y la colección de los datos</span>
        <span class="n">db</span> <span class="o">=</span> <span class="n">connection</span><span class="p">[</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;MONGODB_DB&#39;</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collection</span> <span class="o">=</span> <span class="n">db</span><span class="p">[</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;MONGODB_COLLECTION&#39;</span><span class="p">]]</span>

    <span class="c1">#Se procesa los items</span>
    <span class="k">def</span> <span class="nf">process_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">spider</span><span class="p">):</span>
        <span class="n">valid</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="c1">#Se recorre los datos si no hay datos se descarta, si los hay se inserta y se agrega un mensaje al log.</span>
        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">valid</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">raise</span> <span class="n">DropItem</span><span class="p">(</span><span class="s2">&quot;Missing {0}!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">valid</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">collection</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
            <span class="n">log</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span><span class="s2">&quot;Question added to MongoDB database!&quot;</span><span class="p">,</span>
                    <span class="n">level</span><span class="o">=</span><span class="n">log</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">spider</span><span class="o">=</span><span class="n">spider</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">item</span>
</pre></div>


<p>Se vuelve a probar la extracción de datos:</p>
<div class="highlight"><pre><span></span>scrapy crawl dmoz
</pre></div>


<p>Desde el shell se ejecuta el cliente de mongo:</p>
<div class="highlight"><pre><span></span><span class="n">mongo</span>
<span class="n">MongoDB</span> <span class="n">shell</span> <span class="n">version</span><span class="p">:</span> <span class="mf">2.4</span><span class="o">.</span><span class="mi">10</span>
<span class="n">connecting</span> <span class="n">to</span><span class="p">:</span> <span class="n">test</span>
<span class="o">&gt;</span>
</pre></div>


<p>Se muestra las base de datos existentes:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">show</span> <span class="n">dbs</span>
<span class="n">dmoz</span> <span class="mf">0.203125</span><span class="n">GB</span>
<span class="n">local</span> <span class="mf">0.078125</span><span class="n">GB</span>
</pre></div>


<p>Se usa la base de datos <code>dmoz</code>:</p>
<div class="highlight"><pre><span></span>&gt; use dmoz
switched to db dmoz
</pre></div>


<p>Se muestra las colecciones existentes de la base de datos:</p>
<div class="highlight"><pre><span></span>&gt; show collections
links
system.indexes
</pre></div>


<p>Se muestra el contenido de la colección links:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="nt">db</span><span class="p">.</span><span class="nc">links</span><span class="p">.</span><span class="nc">find</span><span class="o">()</span>
<span class="p">{</span> <span class="err">&quot;_id&quot;</span> <span class="err">:</span> <span class="err">ObjectId(&quot;54a6ef962b405e3dc6fd96b8&quot;),</span> <span class="err">&quot;title&quot;</span> <span class="err">:</span> <span class="cp">[</span>  <span class="s2">&quot;XML Processing with Python&quot;</span> <span class="cp">]</span><span class="err">,</span> <span class="err">&quot;link&quot;</span> <span class="err">:</span> <span class="cp">[</span>  <span class="s2">&quot;http://www.informit.com/store/product.aspx?isbn=0130211192&quot;</span> <span class="cp">]</span><span class="err">,</span> <span class="err">&quot;desc&quot;</span> <span class="err">:</span> <span class="cp">[</span>  <span class="s2">&quot;</span><span class="se">\r\n\t\r\n</span><span class="s2">                                &quot;</span><span class="p">,</span>  <span class="s2">&quot; </span><span class="se">\r\n\t\t\t\r\n</span><span class="s2">                                - By Sean McGrath; Prentice Hall PTR, 2000, ISBN 0130211192, has CD-ROM. Methods to build XML applications fast, Python tutorial, DOM and SAX, new Pyxie open source XML processing library. [Prentice Hall PTR]</span><span class="se">\r\n</span><span class="s2">                                </span><span class="se">\r\n</span><span class="s2">                                &quot;</span><span class="p">,</span>  <span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">                                &quot;</span> <span class="cp">]</span> <span class="p">}</span>
<span class="p">{</span> <span class="err">&quot;_id&quot;</span> <span class="err">:</span> <span class="err">ObjectId(&quot;54a6ef962b405e3dc6fd96b9&quot;),</span> <span class="err">&quot;title&quot;</span> <span class="err">:</span> <span class="cp">[</span>  <span class="s2">&quot;Social Bug&quot;</span> <span class="cp">]</span><span class="err">,</span> <span class="err">&quot;link&quot;</span> <span class="err">:</span> <span class="cp">[</span>  <span class="s2">&quot;http://win32com.goermezer.de/&quot;</span> <span class="cp">]</span><span class="err">,</span> <span class="err">&quot;desc&quot;</span> <span class="err">:</span> <span class="cp">[</span>  <span class="s2">&quot;</span><span class="se">\r\n\t\r\n</span><span class="s2">                                &quot;</span><span class="p">,</span>  <span class="s2">&quot; </span><span class="se">\r\n\t\t\t\r\n</span><span class="s2">                                - Scripts, examples and news about Python programming for the Windows platform.</span><span class="se">\r\n</span><span class="s2">                                </span><span class="se">\r\n</span><span class="s2">                                &quot;</span><span class="p">,</span>  <span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">                                &quot;</span> <span class="cp">]</span> <span class="p">}</span>
</pre></div>


<p>Para finalizar se muestra la captura de pantalla de la aplicación robomongo que muestra el mismo contenido de la colección links:</p>
<p><img alt="" src="./images/extracciondedatosdepaginaswebconscrapyymongodb-1.png"></p>
<h2></h2>
<p>¡Haz tu donativo!
Si te gustó el artículo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
dirección: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el código QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"></p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://ecrespo.github.io/tag/debian.html">Debian</a>
      <a href="https://ecrespo.github.io/tag/linux.html">Linux</a>
      <a href="https://ecrespo.github.io/tag/python.html">Python</a>
      <a href="https://ecrespo.github.io/tag/ubuntu.html">Ubuntu</a>
      <a href="https://ecrespo.github.io/tag/webscraping.html">Webscraping</a>
    </p>
  </div>
  
<section>
  <p id="post-share-links">
    Share on:
    <a href="https://twitter.com/intent/tweet?text=Extracci%C3%B3n%20de%20datos%20de%20p%C3%A1ginas%20web%20con%20scrapy%20y%20MongoDB&url=https%3A//ecrespo.github.io/extraccion-de-datos-de-paginas-web-con-scrapy-y-mongodb.html&hashtags=debian,linux,python,ubuntu,webscraping" target="_blank" title="Share on Twitter">Twitter</a>
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//ecrespo.github.io/extraccion-de-datos-de-paginas-web-con-scrapy-y-mongodb.html" target="_blank" title="Share on Facebook">Facebook</a>
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A//ecrespo.github.io/extraccion-de-datos-de-paginas-web-con-scrapy-y-mongodb.html&title=Extracci%C3%B3n%20de%20datos%20de%20p%C3%A1ginas%20web%20con%20scrapy%20y%20MongoDB&summary=En%20el%20art%C3%ADculo%20anterior%20%28Extracci%C3%B3n%20de%20datos%20de%20p%C3%A1ginas%20web%20con%20scrapy%20se%20hizo%20una%20introducci%C3%B3n%20del%20uso%20de%20scrapy%20bas%C3%A1ndose%20en%20el%20tutorial%20de%20la%20p%C3%A1gina%20del%20proyecto.%0AEste%20art%C3%ADculo%20continua%20la%20serie%20de%20art%C3%ADculos%20sobre%20extracci%C3%B3n%20de%20datos%20de%20p%C3%A1ginas%20web%20%28webscraping.%0AEn%20el%20art%C3%ADculo%20anterior%20se%20extrajo%20%E2%80%A6&source=https%3A//ecrespo.github.io/extraccion-de-datos-de-paginas-web-con-scrapy-y-mongodb.html" target="_blank" title="Share on LinkedIn">LinkedIn</a>
    <a href="mailto:?subject=Extracci%C3%B3n%20de%20datos%20de%20p%C3%A1ginas%20web%20con%20scrapy%20y%20MongoDB&amp;body=https%3A//ecrespo.github.io/extraccion-de-datos-de-paginas-web-con-scrapy-y-mongodb.html" target="_blank" title="Share via Email">Email</a>
  </p>
</section>


  <div class="neighbors">
    <a class="btn float-left" href="https://ecrespo.github.io/extraccion-de-datos-de-paginas-web-con-scrapy.html" title="Extracción de datos de páginas web con scrapy">
      <i class="fa fa-angle-left"></i>     Previous Post

    </a>
    <a class="btn float-right" href="https://ecrespo.github.io/generacion-de-un-histograma-de-frecuencia-con-numpy-scipy-y-matplotlib.html" title="Generación de un histograma de frecuencia con numpy, Scipy y Matplotlib">
          Next Post
 <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>    You might enjoy
</h4>
    <ul class="related-posts">
      <li><a href="https://ecrespo.github.io/extraccion-de-datos-de-paginas-web-con-scrapy.html">Extracción de datos de páginas web con scrapy</a></li>
      <li><a href="https://ecrespo.github.io/webscraping-con-python-mechanize-y-beautifulsoup4.html">Webscraping con Python Mechanize y BeautifulSoup4</a></li>
      <li><a href="https://ecrespo.github.io/extraccion-de-datos-de-pagina-web-con-pyquery-y-python.html">Extracción de datos de página web con pyquery y Python</a></li>
      <li><a href="https://ecrespo.github.io/extraccion-de-datos-de-paginas-web-con-scrapemark-y-python.html">Extracción de datos de páginas web con Scrapemark y Python</a></li>
      <li><a href="https://ecrespo.github.io/extraccion-de-datos-en-paginas-web-con-webscraping-y-python.html">Extracción de datos en páginas web con Webscraping y Python</a></li>
    </ul>
  </div>


<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https://seraphto.disqus.com';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>&copy;  2006</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Página de Seraph ",
  "url" : "https://ecrespo.github.io",
  "image": "//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120",
  "description": " Software Libre, Ciencia de Datos y Python"
}
</script>

</body>
</html>