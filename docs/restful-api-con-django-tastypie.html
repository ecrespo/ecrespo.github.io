
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="http://localhost:8000/theme/pygments/monokai.min.css">


  <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/font-awesome/css/solid.css">


    <link href="http://localhost:8000/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Página de Seraph Atom">



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131517246-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#e5e5ff">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#e5e5ff">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#e5e5ff">

<meta name="author" content="Ernesto Crespo" />
<meta name="description" content="Siguiendo con la serie de artículos sobre django, ahora se mostrará como crear un API restful con django tastypie, su documentación la pueden encontrar acá. En el caso de Debian/Ubuntu y otras distribuciones basadas se instalarán los siguientes programas: Django south. lxml. mimeparse. tastypie. Este artículo se basa en …" />
<meta name="keywords" content="Canaima, Debian, General, Python, Ubuntu, Django">


<meta property="og:site_name" content="Página de Seraph"/>
<meta property="og:title" content="Restful API con Django-tastypie"/>
<meta property="og:description" content="Siguiendo con la serie de artículos sobre django, ahora se mostrará como crear un API restful con django tastypie, su documentación la pueden encontrar acá. En el caso de Debian/Ubuntu y otras distribuciones basadas se instalarán los siguientes programas: Django south. lxml. mimeparse. tastypie. Este artículo se basa en …"/>
<meta property="og:locale" content="es_VE"/>
<meta property="og:url" content="http://localhost:8000/restful-api-con-django-tastypie.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2014-05-03 09:00:00-04:30"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="http://localhost:8000/author/ernesto-crespo.html">
<meta property="article:section" content="Tutorial Python"/>
<meta property="article:tag" content="Canaima"/>
<meta property="article:tag" content="Debian"/>
<meta property="article:tag" content="General"/>
<meta property="article:tag" content="Python"/>
<meta property="article:tag" content="Ubuntu"/>
<meta property="article:tag" content="Django"/>
<meta property="og:image" content="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120">

  <title>Página de Seraph &ndash; Restful API con Django-tastypie</title>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "pub-0261001661746989",
      enable_page_level_ads: true
    });
  </script>
</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="http://localhost:8000">
        <img src="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120" alt="Ernesto Crespo" title="Ernesto Crespo">
      </a>

      <h1>
        <a href="http://localhost:8000">Ernesto Crespo</a>
      </h1>

<p>Data Scientist </p>

      <nav>
        <ul class="list">


              <li>
                <a target="_self"
                   href="http://localhost:8000/pages/About.html#About">
                  Acerca
                </a>
              </li>
              <li>
                <a target="_self"
                   href="http://localhost:8000/pages/Contacto.html#Contacto">
                  Contacto
                </a>
              </li>

        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-medium" href="https://medium.com/@_seraph1" target="_blank">
              <i class="fab fa-medium"></i>
            </a>
          </li>
          <li>
            <a  class="sc-linkedin" href="http://ve.linkedin.com/in/ernestocrespo" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a  class="sc-github" href="https://github.com/ecrespo" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-google" href="https://google.com/+ErnestoCrespo" target="_blank">
              <i class="fab fa-google"></i>
            </a>
          </li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/_seraph1" target="_blank">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
          <li>
            <a  class="sc-facebook" href="https://www.facebook.com/ernesto.crespo" target="_blank">
              <i class="fab fa-facebook"></i>
            </a>
          </li>
          <li>
            <a  class="sc-gitlab" href="https://gitlab.com/ecrespo" target="_blank">
              <i class="fab fa-gitlab"></i>
            </a>
          </li>
          <li>
            <a  class="sc-soundcloud" href="https://soundcloud.com/ernesto-crespo" target="_blank">
              <i class="fab fa-soundcloud"></i>
            </a>
          </li>
          <li>
            <a  class="sc-rss" href="//www.seraph.to/feeds/all.atom.xml" target="_blank">
              <i class="fas fa-rss"></i>
            </a>
          </li>
      </ul>
    </div>

      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-aside"
           data-ad-client="pub-0261001661746989"
           data-ad-slot="1234561"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
  </aside>
  <main>
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-responsive"
           data-ad-client="pub-0261001661746989"
           data-ad-slot="1234562"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>

    <nav>
      <a href="http://localhost:8000">Inicio</a>

      <a href="/archives.html">Archivos</a>
      <a href="/categories.html">Categorías</a>
      <a href="/tags.html">Etiquetas</a>

      <a href="http://localhost:8000/feeds/all.atom.xml">Atom</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="restful-api-con-django-tastypie">Restful API con Django-tastypie</h1>
    <p>
      Publicado el sáb 03 mayo 2014 en <a href="http://localhost:8000/category/tutorial-python.html">Tutorial Python</a>

        &#8226; 6 min de lectura
    </p>
  </header>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234565"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

  <div>
    <p><a href="https://www.seraph.to/tag/django.html">Siguiendo con la serie de artículos sobre django</a>, ahora se  mostrará como crear un API restful con django tastypie, su documentación la pueden encontrar <a href="https://django-tastypie.readthedocs.io/en/latest/tutorial.html">acá</a>.</p>
<p>En el caso de Debian/Ubuntu y otras distribuciones basadas se instalarán los siguientes programas:</p>
<ul>
<li><code>Django south</code>.</li>
<li><code>lxml</code>.</li>
<li><code>mimeparse</code>.</li>
<li><code>tastypie</code>.</li>
</ul>
<p>Este artículo se basa en el <a href="http://bogdan-ivanov.com/entry/django-tastypie-tutorial-part-1/">siguiente artículo en inglés</a>.
Para instalar los programas se ejecuta apt-get:</p>
<div class="highlight"><pre><span class="code-line"><span></span>#apt-get install python-django-south python-tastypie python-mimeparse python-lxml python3-lxml</span>
</pre></div>


<p>La instalación por medio de <code>pip</code> es la siguiente:</p>
<div class="highlight"><pre><span class="code-line"><span></span>#pip install Django South python-mimeparse dateutil django-tastypie lxml</span>
</pre></div>


<p>Ahora a crear el proyecto pasarela con django-admin:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">mkdir</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">pruebas</span><span class="w"></span></span>
<span class="code-line"><span class="n">cd</span><span class="w"> </span><span class="n">pruebas</span><span class="w"></span></span>
<span class="code-line"><span class="n">ernesto</span><span class="nv">@pruebas</span><span class="err">:</span><span class="o">~/</span><span class="n">pruebas</span><span class="err">$</span><span class="w"> </span><span class="n">django</span><span class="o">-</span><span class="k">admin</span><span class="w"> </span><span class="n">startproject</span><span class="w"> </span><span class="n">pasarela</span><span class="w"></span></span>
</pre></div>


<p>Se lista el contenido del directorio pasarela:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">ernesto</span><span class="nv">@pruebas</span><span class="err">:</span><span class="o">~/</span><span class="n">pruebas</span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">pasarela</span><span class="o">/</span><span class="w"></span></span>
<span class="code-line"><span class="n">total</span><span class="w"> </span><span class="mi">8</span><span class="w"></span></span>
<span class="code-line"><span class="o">-</span><span class="n">rwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">ernesto</span><span class="w"> </span><span class="n">ernesto</span><span class="w">  </span><span class="mi">251</span><span class="w"> </span><span class="n">may</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="mi">18</span><span class="err">:</span><span class="mi">17</span><span class="w"> </span><span class="n">manage</span><span class="p">.</span><span class="n">py</span><span class="w"></span></span>
<span class="code-line"><span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">ernesto</span><span class="w"> </span><span class="n">ernesto</span><span class="w"> </span><span class="mi">4096</span><span class="w"> </span><span class="n">may</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="mi">18</span><span class="err">:</span><span class="mi">17</span><span class="w"> </span><span class="n">pasarela</span><span class="w"></span></span>
</pre></div>


<p>Se edita el <code>settings.py</code> dentro de pasarela:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">ernesto</span><span class="nv">@pruebas</span><span class="err">:</span><span class="o">~/</span><span class="n">pruebas</span><span class="err">$</span><span class="w"> </span><span class="n">vim</span><span class="w"> </span><span class="n">pasarela</span><span class="o">/</span><span class="n">pasarela</span><span class="o">/</span><span class="n">settings</span><span class="p">.</span><span class="n">py</span><span class="w"></span></span>
</pre></div>


<p>A continuación se muestra la parte que se modificó del archivo <code>settings.py</code>:
El admin del proyecto:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">ADMINS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w"></span></span>
<span class="code-line"><span class="w">    </span><span class="p">(</span><span class="s1">&#39;Ernesto Crespo&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ecrespo@xxxx&#39;</span><span class="p">),</span><span class="w"></span></span>
<span class="code-line"><span class="p">)</span><span class="w"></span></span>
</pre></div>


<p>La base de datos que se usará por pruebas será sqlite3 y el nombre de la base de datos será pasarela.db:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="nv">DATABASES</span> <span class="o">=</span> {</span>
<span class="code-line">    <span class="s1">&#39;</span><span class="s">default</span><span class="s1">&#39;</span>: {</span>
<span class="code-line">        <span class="s1">&#39;</span><span class="s">ENGINE</span><span class="s1">&#39;</span>: <span class="s1">&#39;</span><span class="s">django.db.backends.sqlite3</span><span class="s1">&#39;</span>, # <span class="nv">Add</span> <span class="s1">&#39;</span><span class="s">postgresql_psycopg2</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">mysql</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">sqlite3</span><span class="s1">&#39;</span> <span class="nv">or</span> <span class="s1">&#39;</span><span class="s">oracle</span><span class="s1">&#39;</span>.</span>
<span class="code-line">        <span class="s1">&#39;</span><span class="s">NAME</span><span class="s1">&#39;</span>: <span class="s1">&#39;</span><span class="s">pasarela.db</span><span class="s1">&#39;</span>,                      # <span class="nv">Or</span> <span class="nv">path</span> <span class="nv">to</span> <span class="nv">database</span> <span class="nv">file</span> <span class="k">if</span> <span class="nv">using</span> <span class="nv">sqlite3</span>.</span>
<span class="code-line">        <span class="s1">&#39;</span><span class="s">USER</span><span class="s1">&#39;</span>: <span class="s1">&#39;&#39;</span>,                      # <span class="nv">Not</span> <span class="nv">used</span> <span class="nv">with</span> <span class="nv">sqlite3</span>.</span>
<span class="code-line">        <span class="s1">&#39;</span><span class="s">PASSWORD</span><span class="s1">&#39;</span>: <span class="s1">&#39;&#39;</span>,                  # <span class="nv">Not</span> <span class="nv">used</span> <span class="nv">with</span> <span class="nv">sqlite3</span>.</span>
<span class="code-line">        <span class="s1">&#39;</span><span class="s">HOST</span><span class="s1">&#39;</span>: <span class="s1">&#39;&#39;</span>,                      # <span class="nv">Set</span> <span class="nv">to</span> <span class="nv">empty</span> <span class="nv">string</span> <span class="k">for</span> <span class="nv">localhost</span>. <span class="nv">Not</span> <span class="nv">used</span> <span class="nv">with</span> <span class="nv">sqlite3</span>.</span>
<span class="code-line">        <span class="s1">&#39;</span><span class="s">PORT</span><span class="s1">&#39;</span>: <span class="s1">&#39;&#39;</span>,                      # <span class="nv">Set</span> <span class="nv">to</span> <span class="nv">empty</span> <span class="nv">string</span> <span class="k">for</span> <span class="nv">default</span>. <span class="nv">Not</span> <span class="nv">used</span> <span class="nv">with</span> <span class="nv">sqlite3</span>.</span>
<span class="code-line">    }</span>
<span class="code-line">}</span>
</pre></div>


<p>Hosts permitidos son el servidor donde se encuentra django y el equipo donde se hará las pruebas: </p>
<div class="highlight"><pre><span class="code-line"><span></span>ALLOWED_HOSTS = [&quot;127.0.0.1&quot;,&quot;192.168.0.106&quot;]</span>
</pre></div>


<p>El huso horario será el de Caracas Venezuela:</p>
<div class="highlight"><pre><span class="code-line"><span></span>TIME_ZONE = &#39;America/Caracas&#39;</span>
</pre></div>


<p>El idioma de la aplicación será Español Venezuela:</p>
<div class="highlight"><pre><span class="code-line"><span></span>LANGUAGE_CODE = &#39;es-ve</span>
</pre></div>


<p>Las aplicaciones a instalar son: <code>django.contribution.admin</code>, <code>south</code>, <code>tastypie</code>, <code>pasarela.apps.sms</code>:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="nv">INSTALLED_APPS</span> <span class="o">=</span> <span class="ss">(</span></span>
<span class="code-line">    <span class="s1">&#39;</span><span class="s">django.contrib.auth</span><span class="s1">&#39;</span>,</span>
<span class="code-line">    <span class="s1">&#39;</span><span class="s">django.contrib.contenttypes</span><span class="s1">&#39;</span>,</span>
<span class="code-line">    <span class="s1">&#39;</span><span class="s">django.contrib.sessions</span><span class="s1">&#39;</span>,</span>
<span class="code-line">    <span class="s1">&#39;</span><span class="s">django.contrib.sites</span><span class="s1">&#39;</span>,</span>
<span class="code-line">    <span class="s1">&#39;</span><span class="s">django.contrib.messages</span><span class="s1">&#39;</span>,</span>
<span class="code-line">    <span class="s1">&#39;</span><span class="s">django.contrib.staticfiles</span><span class="s1">&#39;</span>,</span>
<span class="code-line">    # <span class="nv">Uncomment</span> <span class="nv">the</span> <span class="k">next</span> <span class="nv">line</span> <span class="nv">to</span> <span class="nv">enable</span> <span class="nv">the</span> <span class="nv">admin</span>:</span>
<span class="code-line">    <span class="s1">&#39;</span><span class="s">django.contrib.admin</span><span class="s1">&#39;</span>,</span>
<span class="code-line">    <span class="s1">&#39;</span><span class="s">south</span><span class="s1">&#39;</span>,</span>
<span class="code-line">    <span class="s1">&#39;</span><span class="s">tastypie</span><span class="s1">&#39;</span>,</span>
<span class="code-line">    <span class="s1">&#39;</span><span class="s">pasarela.apps.sms</span><span class="s1">&#39;</span>,</span>
<span class="code-line">    # <span class="nv">Uncomment</span> <span class="nv">the</span> <span class="k">next</span> <span class="nv">line</span> <span class="nv">to</span> <span class="nv">enable</span> <span class="nv">admin</span> <span class="nv">documentation</span>:</span>
<span class="code-line">    # <span class="s1">&#39;</span><span class="s">django.contrib.admindocs</span><span class="s1">&#39;</span>,</span>
<span class="code-line"><span class="ss">)</span></span>
</pre></div>


<p>Se crea el directorio <code>apps</code> y dentro de el se crea el archivo <code>__init__.py</code>:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">ernesto</span><span class="nv">@pruebas</span><span class="err">:</span><span class="o">~/</span><span class="n">pruebas</span><span class="o">/</span><span class="n">pasarela</span><span class="o">/</span><span class="n">pasarela</span><span class="err">$</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">apps</span><span class="w"></span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">ernesto</span><span class="nv">@pruebas</span><span class="err">:</span><span class="o">~/</span><span class="n">pruebas</span><span class="o">/</span><span class="n">pasarela</span><span class="o">/</span><span class="n">pasarela</span><span class="err">$</span><span class="w"> </span><span class="n">touch</span><span class="w"> </span><span class="n">apps</span><span class="o">/</span><span class="n">__init__</span><span class="p">.</span><span class="n">py</span><span class="w"></span></span>
</pre></div>


<p>Se listan los archivos dentro de <code>apps</code>:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">ernesto</span><span class="nv">@pruebas</span><span class="err">:</span><span class="o">~/</span><span class="n">pruebas</span><span class="o">/</span><span class="n">pasarela</span><span class="o">/</span><span class="n">pasarela</span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">apps</span><span class="w"> </span></span>
<span class="code-line"><span class="n">total</span><span class="w"> </span><span class="mi">0</span><span class="w"></span></span>
<span class="code-line"><span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="c1">--r-- 1 ernesto ernesto 0 may  3 18:41 __init__.py</span></span>
</pre></div>


<p>Ahora se crea la aplicación django sms dentro de apps:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">ernesto</span><span class="nv">@pruebas</span><span class="err">:</span><span class="o">~/</span><span class="n">pruebas</span><span class="o">/</span><span class="n">pasarela</span><span class="o">/</span><span class="n">pasarela</span><span class="o">/</span><span class="n">apps</span><span class="err">$</span><span class="w"> </span><span class="n">django</span><span class="o">-</span><span class="k">admin</span><span class="w"> </span><span class="n">startapp</span><span class="w"> </span><span class="n">sms</span><span class="w"></span></span>
</pre></div>


<p>Se lista el contenido de <code>sms</code>:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">ernesto</span><span class="nv">@pruebas</span><span class="err">:</span><span class="o">~/</span><span class="n">pruebas</span><span class="o">/</span><span class="n">pasarela</span><span class="o">/</span><span class="n">pasarela</span><span class="o">/</span><span class="n">apps</span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">sms</span><span class="o">/</span><span class="w"></span></span>
<span class="code-line"><span class="n">total</span><span class="w"> </span><span class="mi">12</span><span class="w"></span></span>
<span class="code-line"><span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">ernesto</span><span class="w"> </span><span class="n">ernesto</span><span class="w">   </span><span class="mi">0</span><span class="w"> </span><span class="n">may</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="mi">18</span><span class="err">:</span><span class="mi">42</span><span class="w"> </span><span class="n">__init__</span><span class="p">.</span><span class="n">py</span><span class="w"></span></span>
<span class="code-line"><span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">ernesto</span><span class="w"> </span><span class="n">ernesto</span><span class="w">  </span><span class="mi">57</span><span class="w"> </span><span class="n">may</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="mi">18</span><span class="err">:</span><span class="mi">42</span><span class="w"> </span><span class="n">models</span><span class="p">.</span><span class="n">py</span><span class="w"></span></span>
<span class="code-line"><span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">ernesto</span><span class="w"> </span><span class="n">ernesto</span><span class="w"> </span><span class="mi">383</span><span class="w"> </span><span class="n">may</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="mi">18</span><span class="err">:</span><span class="mi">42</span><span class="w"> </span><span class="n">tests</span><span class="p">.</span><span class="n">py</span><span class="w"></span></span>
<span class="code-line"><span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="c1">--r-- 1 ernesto ernesto  26 may  3 18:42 views.py</span></span>
</pre></div>


<p>Ahora se creará el modelo de datos que se usará, se edita el archivo <code>models.py</code> de <code>sms</code>:
Se manejarán dos tablas, en una se maneja el historico de mensajes enviados y en la segunda tabla la culminación del envío de todos los mensajes.</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="c1">#se importa models de django.db</span></span>
<span class="code-line"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1"># Create your models here.</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se crea la clase Evento que hereda de model.Model</span></span>
<span class="code-line"><span class="k">class</span> <span class="nc">Evento</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span></span>
<span class="code-line">    <span class="c1">#Se crea la columna evento que será entero y clave primaria de la base de datos</span></span>
<span class="code-line">    <span class="n">evento</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></span>
<span class="code-line">    <span class="c1">#Se crea el campo estatus que será booleano y por defecto será falso.</span></span>
<span class="code-line">    <span class="n">estatus</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></span>
<span class="code-line"></span>
<span class="code-line">    <span class="c1">#Se define la información que se requiere en el panel de administración web de django.</span></span>
<span class="code-line">    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></span>
<span class="code-line">       <span class="n">evento</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%E</span><span class="s2">vento: </span><span class="si">%s</span><span class="s2">, Estatus: </span><span class="si">%s</span><span class="s2"> &quot;</span> <span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">evento</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">estatus</span><span class="p">)</span></span>
<span class="code-line">       <span class="k">return</span> <span class="n">evento</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se crea la clase historicoSMS que hereda de models.Model</span></span>
<span class="code-line"><span class="k">class</span> <span class="nc">HistoricoSMS</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span></span>
<span class="code-line">    <span class="c1">#Se crea la columna evento que es clave foranea de la tabla evento.</span></span>
<span class="code-line">    <span class="n">evento</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Evento</span><span class="p">)</span></span>
<span class="code-line">    <span class="c1">#se crea mensaje con un tamaño de 150 caracteres</span></span>
<span class="code-line">    <span class="n">mensaje</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span></span>
<span class="code-line">    <span class="c1">#Se crea numcel con un tamaño de 11 caracteres que será el numero celular.</span></span>
<span class="code-line">    <span class="n">numcel</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span></span>
<span class="code-line">    <span class="c1">#Se crea estatus que tiene el valor booleano si se envío o no el mensaje al número celular.</span></span>
<span class="code-line">    <span class="n">estatus</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></span>
<span class="code-line"></span>
<span class="code-line">    <span class="c1">#Se define la información que se requiere en el panel de administración web de django.</span></span>
<span class="code-line">    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></span>
<span class="code-line">        <span class="n">mensaje</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">  </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> &quot;</span>  <span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">evento</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">mensaje</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">numcel</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">estatus</span><span class="p">)</span></span>
<span class="code-line">        <span class="k">return</span> <span class="n">mensaje</span></span>
</pre></div>


<p>Ahora se crea el archivo <code>api.py</code> en la aplicación <code>sms</code> (este archivo es el que define que información se va a mostrar por medio de API restful):</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="c1">#Se importa ModelResource de tastypie.resources</span></span>
<span class="code-line"><span class="kn">from</span> <span class="nn">tastypie.resources</span> <span class="kn">import</span> <span class="n">ModelResource</span></span>
<span class="code-line"><span class="c1">#Se importa de models.py en la apps sms HistoricoSMS y Evento</span></span>
<span class="code-line"><span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">HistoricoSMS</span><span class="p">,</span><span class="n">Evento</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se crea la clase SMSResource que hereda de ModelResource</span></span>
<span class="code-line"><span class="k">class</span> <span class="nc">SMSResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span></span>
<span class="code-line">    <span class="c1">#Se crea una clase Meta</span></span>
<span class="code-line">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span></span>
<span class="code-line">        <span class="c1">#queryset se trae todo el contenido de la tabla HistoricoSMS</span></span>
<span class="code-line">        <span class="n">queryset</span> <span class="o">=</span> <span class="n">HistoricoSMS</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></span>
<span class="code-line">        <span class="c1">#El nombre del recurso es mensajes, de está forma se consulta en el restful api</span></span>
<span class="code-line">        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;msg&#39;</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se crea la clase EventoResource que hereda de ModelResource</span></span>
<span class="code-line"><span class="k">class</span> <span class="nc">EventoResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span></span>
<span class="code-line">    <span class="c1">#Se crea la clase Meta</span></span>
<span class="code-line">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span></span>
<span class="code-line">        <span class="c1">#Se define queryset que se trae todos los datos de la tabla Evento</span></span>
<span class="code-line">        <span class="n">queryset</span> <span class="o">=</span> <span class="n">Evento</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></span>
<span class="code-line">       <span class="c1">#El nombre del recurso es evento.</span></span>
<span class="code-line">        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;event&#39;</span></span>
</pre></div>


<p>Ahora se busca que se puedan ver las consultas de Restful API, para ello se edita el archivo <code>urls.py</code> de pasarela (se comentarán sólo los cambios que se le hagan al archivo):</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">patterns</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1"># Uncomment the next two lines to enable the admin:</span></span>
<span class="code-line"><span class="c1">#Se descomento la importación de admin y admin.autodiscover() .</span></span>
<span class="code-line"><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span></span>
<span class="code-line"><span class="n">admin</span><span class="o">.</span><span class="n">autodiscover</span><span class="p">()</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se importa Api de tastypie.api</span></span>
<span class="code-line"><span class="kn">from</span> <span class="nn">tastypie.api</span> <span class="kn">import</span> <span class="n">Api</span></span>
<span class="code-line"><span class="c1">#Se importa SMSResource y EventoResource del api de la aplicación sms.</span></span>
<span class="code-line"><span class="kn">from</span> <span class="nn">apps.sms.api</span> <span class="kn">import</span> <span class="n">SMSResource</span><span class="p">,</span><span class="n">EventoResource</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se instancia Api con la versión v1.</span></span>
<span class="code-line"><span class="n">v1_api</span> <span class="o">=</span> <span class="n">Api</span><span class="p">(</span><span class="n">api_name</span><span class="o">=</span><span class="s1">&#39;v1&#39;</span><span class="p">)</span></span>
<span class="code-line"><span class="c1">#Se registra los recursos en la instancia del api.</span></span>
<span class="code-line"><span class="n">v1_api</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">SMSResource</span><span class="p">())</span></span>
<span class="code-line"><span class="n">v1_api</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">EventoResource</span><span class="p">())</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span></span>
<span class="code-line">    <span class="c1"># Examples:</span></span>
<span class="code-line">    <span class="c1"># url(r&#39;^$&#39;, &#39;pasarela.views.home&#39;, name=&#39;home&#39;),</span></span>
<span class="code-line">    <span class="c1"># url(r&#39;^pasarela/&#39;, include(&#39;pasarela.foo.urls&#39;)),</span></span>
<span class="code-line"></span>
<span class="code-line">    <span class="c1"># Uncomment the admin/doc line below to enable admin documentation:</span></span>
<span class="code-line">    <span class="c1"># url(r&#39;^admin/doc/&#39;, include(&#39;django.contrib.admindocs.urls&#39;)),</span></span>
<span class="code-line"></span>
<span class="code-line">    <span class="c1"># Uncomment the next line to enable the admin:</span></span>
<span class="code-line">    <span class="c1">#Se descomenta admin</span></span>
<span class="code-line">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span></span>
<span class="code-line">    <span class="c1">#Se define el url del api.</span></span>
<span class="code-line">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^api/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">v1_api</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span></span>
<span class="code-line"><span class="p">)</span></span>
</pre></div>


<p>Ahora se sincroniza o crea la base de datos:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">ernesto</span><span class="nv">@pruebas</span><span class="err">:</span><span class="o">~/</span><span class="n">pruebas</span><span class="o">/</span><span class="n">pasarela</span><span class="err">$</span><span class="w"> </span><span class="n">python</span><span class="w"> </span><span class="n">manage</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="n">syncdb</span><span class="w"> </span></span>
<span class="code-line"><span class="n">Syncing</span><span class="p">...</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="p">...</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">auth_permission</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">auth_group_permissions</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">auth_group</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">auth_user_user_permissions</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">auth_user_groups</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">auth_user</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">django_content_type</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">django_session</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">django_site</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">django_admin_log</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">south_migrationhistory</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">tastypie_apiaccess</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">tastypie_apikey</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">sms_evento</span><span class="w"></span></span>
<span class="code-line"><span class="n">Creating</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">sms_historicosms</span><span class="w"></span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">You</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">installed</span><span class="w"> </span><span class="n">Django</span><span class="s1">&#39;s auth system, which means you don&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="ow">any</span><span class="w"> </span><span class="n">superusers</span><span class="w"> </span><span class="n">defined</span><span class="p">.</span><span class="w"></span></span>
<span class="code-line"><span class="n">Would</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="ow">like</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">now</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">yes</span><span class="o">/</span><span class="k">no</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">yes</span><span class="w"></span></span>
<span class="code-line"><span class="n">Username</span><span class="w"> </span><span class="p">(</span><span class="n">leave</span><span class="w"> </span><span class="n">blank</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="s1">&#39;ernesto&#39;</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">ernesto</span><span class="w"></span></span>
<span class="code-line"><span class="n">E</span><span class="o">-</span><span class="n">mail</span><span class="w"> </span><span class="nl">address</span><span class="p">:</span><span class="w"> </span><span class="n">ecrespo</span><span class="nv">@xyzw</span><span class="p">.</span><span class="n">com</span><span class="w"></span></span>
<span class="code-line"><span class="nl">Password</span><span class="p">:</span><span class="w"> </span></span>
<span class="code-line"><span class="n">Password</span><span class="w"> </span><span class="p">(</span><span class="n">again</span><span class="p">)</span><span class="err">:</span><span class="w"> </span></span>
<span class="code-line"><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python2</span><span class="mf">.7</span><span class="o">/</span><span class="n">dist</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">django</span><span class="o">/</span><span class="n">db</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="n">fields</span><span class="o">/</span><span class="n">__init__</span><span class="p">.</span><span class="nl">py</span><span class="p">:</span><span class="mi">808</span><span class="err">:</span><span class="w"> </span><span class="nl">RuntimeWarning</span><span class="p">:</span><span class="w"> </span><span class="n">DateTimeField</span><span class="w"> </span><span class="n">received</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">naive</span><span class="w"> </span><span class="nc">datetime</span><span class="w"> </span><span class="p">(</span><span class="mi">2014</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">20</span><span class="err">:</span><span class="mi">30</span><span class="err">:</span><span class="mf">49.555592</span><span class="p">)</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nc">time</span><span class="w"> </span><span class="k">zone</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">active</span><span class="p">.</span><span class="w"></span></span>
<span class="code-line"><span class="w">  </span><span class="n">RuntimeWarning</span><span class="p">)</span><span class="w"></span></span>
<span class="code-line"><span class="n">Superuser</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">successfully</span><span class="p">.</span><span class="w"></span></span>
<span class="code-line"><span class="n">Installing</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="p">...</span><span class="w"></span></span>
<span class="code-line"><span class="n">Installing</span><span class="w"> </span><span class="n">indexes</span><span class="w"> </span><span class="p">...</span><span class="w"></span></span>
<span class="code-line"><span class="n">Installed</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">object</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">fixture</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"></span></span>
<span class="code-line"></span>
<span class="code-line"><span class="nl">Synced</span><span class="p">:</span><span class="w"></span></span>
<span class="code-line"><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">django</span><span class="p">.</span><span class="n">contrib</span><span class="p">.</span><span class="n">auth</span><span class="w"></span></span>
<span class="code-line"><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">django</span><span class="p">.</span><span class="n">contrib</span><span class="p">.</span><span class="n">contenttypes</span><span class="w"></span></span>
<span class="code-line"><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">django</span><span class="p">.</span><span class="n">contrib</span><span class="p">.</span><span class="n">sessions</span><span class="w"></span></span>
<span class="code-line"><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">django</span><span class="p">.</span><span class="n">contrib</span><span class="p">.</span><span class="n">sites</span><span class="w"></span></span>
<span class="code-line"><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">django</span><span class="p">.</span><span class="n">contrib</span><span class="p">.</span><span class="n">messages</span><span class="w"></span></span>
<span class="code-line"><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">django</span><span class="p">.</span><span class="n">contrib</span><span class="p">.</span><span class="n">staticfiles</span><span class="w"></span></span>
<span class="code-line"><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">django</span><span class="p">.</span><span class="n">contrib</span><span class="p">.</span><span class="k">admin</span><span class="w"></span></span>
<span class="code-line"><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">south</span><span class="w"></span></span>
<span class="code-line"><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">tastypie</span><span class="w"></span></span>
<span class="code-line"><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">pasarela</span><span class="p">.</span><span class="n">apps</span><span class="p">.</span><span class="n">sms</span><span class="w"></span></span>
<span class="code-line"></span>
<span class="code-line"><span class="ow">Not</span><span class="w"> </span><span class="n">synced</span><span class="w"> </span><span class="p">(</span><span class="k">use</span><span class="w"> </span><span class="n">migrations</span><span class="p">)</span><span class="err">:</span><span class="w"></span></span>
<span class="code-line"><span class="w"> </span><span class="o">-</span><span class="w"> </span></span>
<span class="code-line"><span class="p">(</span><span class="k">use</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">manage</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="n">migrate</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">migrate</span><span class="w"> </span><span class="n">these</span><span class="p">)</span><span class="w"></span></span>
</pre></div>


<p>Ahora pide migrar los esquemas con <code>south</code>:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span> </span>
</pre></div>


<p>Ahora se necesitan algunos datos en la base de datos, se usará la parte interactiva de sqlite3. 
Se insertarán varios datos como lo indica el siguiente comando sql
Para el caso de la tabla eventos: </p>
<div class="highlight"><pre><span class="code-line"><span></span>insert into sms_evento (evento,estatus)  values (3,0);</span>
</pre></div>


<p>Para el caso de la tabla historicosms:</p>
<div class="highlight"><pre><span class="code-line"><span></span>insert into sms_historicosms (evento_id,mensaje,numcel,estatus)  values (2,&quot;otra prueba&quot;,&quot;04158339101&quot;,&quot;False&quot;);</span>
</pre></div>


<p>El resultado se muestra a continuación:</p>
<div class="highlight"><pre><span class="code-line"><span></span>sqlite&gt; select * from sms_evento;</span>
<span class="code-line">1|1</span>
<span class="code-line">2|1</span>
<span class="code-line">3|0</span>
<span class="code-line"></span>
<span class="code-line">sqlite&gt; select * from sms_historicosms;</span>
<span class="code-line">1|1|prueba|04158339191|True</span>
<span class="code-line">2|1|prueba|04158339192|True</span>
<span class="code-line">3|1|prueba|04158339193|False</span>
<span class="code-line">4|1|prueba|04158339194|False</span>
<span class="code-line">5|1|prueba|04158339195|True</span>
<span class="code-line">6|2|otra prueba|04158339197|True</span>
<span class="code-line">7|2|otra prueba|04158339198|True</span>
<span class="code-line">8|2|otra prueba|04158339199|True</span>
<span class="code-line">9|2|otra prueba|04158339100|True</span>
<span class="code-line">10|2|otra prueba|04158339100|False</span>
<span class="code-line">11|2|otra prueba|04158339101|False</span>
</pre></div>


<p>Ya con estos datos se puede iniciar el servicio para mostrar la información del api restful:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">ernesto</span><span class="nv">@pruebas</span><span class="err">:</span><span class="o">~/</span><span class="n">pruebas</span><span class="o">/</span><span class="n">pasarela</span><span class="err">$</span><span class="w"> </span><span class="n">python</span><span class="w"> </span><span class="n">manage</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="n">runserver</span><span class="w"> </span><span class="mf">192.168.0.100</span><span class="err">:</span><span class="mi">8080</span><span class="w"></span></span>
<span class="code-line"><span class="n">Validating</span><span class="w"> </span><span class="n">models</span><span class="p">...</span><span class="w"></span></span>
<span class="code-line"></span>
<span class="code-line"><span class="mi">0</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="k">found</span><span class="w"></span></span>
<span class="code-line"><span class="n">Django</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mf">1.4.5</span><span class="p">,</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">settings</span><span class="w"> </span><span class="s1">&#39;pasarela.settings&#39;</span><span class="w"></span></span>
<span class="code-line"><span class="n">Development</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="mf">192.168.0.100</span><span class="err">:</span><span class="mi">8080</span><span class="o">/</span><span class="w"></span></span>
<span class="code-line"><span class="n">Quit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">CONTROL</span><span class="o">-</span><span class="n">C</span><span class="p">.</span><span class="w"></span></span>
</pre></div>


<p>A continuación se muestra la captura de pantalla del resultado de la consulta de los mensajes:
http://192.168.0.100:8080/api/v1/msg/?format=json</p>
<p><img alt="" src="./images/restfulapicondjangotastypie-1.png"></p>
<p>La siguiente figura muestra la consulta de los eventos
http://192.168.0.100:8080/api/v1/event/?format=json:</p>
<p><img alt="" src="./images/restfulapicondjangotastypie-2.png"></p>
<p>Si se quiere consultar el evento 1 de eventos:
http://192.168.0.100:8080/api/v1/event/1/?format=json</p>
<div class="highlight"><pre><span class="code-line"><span></span>{&quot;estatus&quot;: true, &quot;evento&quot;: 1, &quot;resource_uri&quot;: &quot;/api/v1/event/1/&quot;}</span>
</pre></div>


<p>Si se quiere consultar el mensaje 1 de msg:
http://192.168.0.100:8080/api/v1/msg/1/?format=json</p>
<div class="highlight"><pre><span class="code-line"><span></span>{&quot;estatus&quot;: false, &quot;id&quot;: &quot;1&quot;, &quot;mensaje&quot;: &quot;prueba&quot;, &quot;numcel&quot;: &quot;04158339191&quot;, &quot;resource_uri&quot;: &quot;/api/v1/msg/1/&quot;}</span>
</pre></div>


<p>Luego se explicará como realizar aparte de un get, un POST/PUT/DELETE, pero para ello se requiere autenticación.</p>
<p>Otros artículos sobre tastypie:</p>
<ul>
<li>
<p><a href="http://blog.brabadu.com/2011/06/easy-rest-api-with-django-tastypie.html">http://blog.brabadu.com/2011/06/easy-rest-api-with-django-tastypie.html</a></p>
</li>
<li>
<p><a href="http://jlafon.io/django-tastypie.html">http://jlafon.io/django-tastypie.html</a></p>
</li>
<li>
<p><a href="http://www.realpython.com/blog/python/create-a-super-basic-rest-api-with-django-tastypie/">http://www.realpython.com/blog/python/create-a-super-basic-rest-api-with-django-tastypie/</a></p>
</li>
<li>
<p><a href="http://bixly.com/blog/django-tastypie/">http://bixly.com/blog/django-tastypie/</a></p>
</li>
</ul>
<h2></h2>
<p>¡Haz tu donativo!
Si te gustó el artículo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
dirección: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el código QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png">file:///home/ernesto/Documentos/day/parte%204/2014-restfulapicondjangotastypie.md</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="http://localhost:8000/tag/canaima.html">Canaima</a>
      <a href="http://localhost:8000/tag/debian.html">Debian</a>
      <a href="http://localhost:8000/tag/general.html">General</a>
      <a href="http://localhost:8000/tag/python.html">Python</a>
      <a href="http://localhost:8000/tag/ubuntu.html">Ubuntu</a>
      <a href="http://localhost:8000/tag/django.html">Django</a>
    </p>
  </div>


  <div class="neighbors">
    <a class="btn float-left" href="http://localhost:8000/manejo-de-colas-de-rabbitmq-en-django-con-django-celery.html" title="Manejo de colas de RabbitMQ en Django con Django-Celery">
      <i class="fa fa-angle-left"></i> Artículo anterior
    </a>
    <a class="btn float-right" href="http://localhost:8000/micro-framework-de-desarrollo-web-flask.html" title="Micro Framework de desarrollo web Flask">
      Próximo artículo <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>Te puede gustar</h4>
    <ul class="related-posts">
      <li><a href="http://localhost:8000/restful-api-con-django-tastypie-y-django-celery.html">Restful API con Django-tastypie y Django-Celery</a></li>
      <li><a href="http://localhost:8000/iniciando-django-usando-docker.html">Iniciando Django usando Docker</a></li>
      <li><a href="http://localhost:8000/usar-mongodb-en-django.html">Usar mongodb en Django</a></li>
      <li><a href="http://localhost:8000/darle-estilo-material-design-a-django-parte-1-el-admin.html">Darle estilo material design a Django (parte 1, el admin)</a></li>
      <li><a href="http://localhost:8000/geometria-analitica-con-sympy-triangulos.html">Geometría Analítica con Sympy (triángulos)</a></li>
    </ul>
  </div>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234566"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https://seraphto.disqus.com';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Por favor, habilita JavaScript para ver los comentarios.
</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>&copy; 2022 </p>
<p>
Construido con <a href="http://getpelican.com" target="_blank">Pelican</a> usando el tema <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> 
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Página de Seraph ",
  "url" : "http://localhost:8000",
  "image": "//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120",
  "description": " Software Libre, Ciencia de Datos y Python"
}
</script>


</body>
</html>