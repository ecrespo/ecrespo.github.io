
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://blog.seraph.to/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="https://blog.seraph.to/theme/pygments/monokai.min.css">



  <link rel="stylesheet" type="text/css" href="https://blog.seraph.to/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://blog.seraph.to/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://blog.seraph.to/theme/font-awesome/css/solid.css">



  <!-- Chrome, Firefox OS and Opera -->
  <meta name="theme-color" content="#e5e5ff">
  <!-- Windows Phone -->
  <meta name="msapplication-navbutton-color" content="#e5e5ff">
  <!-- iOS Safari -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <!-- Microsoft EDGE -->
  <meta name="msapplication-TileColor" content="#e5e5ff">

  <link href="https://blog.seraph.to/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Página de Seraph Atom">


<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131517246-1', 'auto');
  ga('send', 'pageview');
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-300366206"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-300366206');
</script>






 

<meta name="author" content="Ernesto Crespo" />
<meta name="description" content="Hace tiempo explique como crear unas tablas para la base de datos sqlite3, insertar datos, removerlos y consultarlos,el artículo se llama Abstracción del motor de Base de Datos con el ORM Sqlalchemy y python. Antes de comenzar a probar lo que se escribe en este artículo es necesario que …" />
<meta name="keywords" content="General, Python">


  <meta property="og:site_name" content="Página de Seraph"/>
  <meta property="og:title" content="Manejo de sesión en el ORM sqlalchemy"/>
  <meta property="og:description" content="Hace tiempo explique como crear unas tablas para la base de datos sqlite3, insertar datos, removerlos y consultarlos,el artículo se llama Abstracción del motor de Base de Datos con el ORM Sqlalchemy y python. Antes de comenzar a probar lo que se escribe en este artículo es necesario que …"/>
  <meta property="og:locale" content="es_VE"/>
  <meta property="og:url" content="https://blog.seraph.to/manejo-de-sesion-en-el-orm-sqlalchemy.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2013-09-18 09:00:00-04:30"/>
  <meta property="article:modified_time" content=""/>
  <meta property="article:author" content="https://blog.seraph.to/author/ernesto-crespo.html">
  <meta property="article:section" content="General"/>
  <meta property="article:tag" content="General"/>
  <meta property="article:tag" content="Python"/>
  <meta property="og:image" content="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120">

  <title>Página de Seraph &ndash; Manejo de sesión en el ORM sqlalchemy</title>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "pub-0261001661746989",
      enable_page_level_ads: true
    });
  </script>

</head>
<body class="light-theme">

<aside>
  <div>
    <a href="https://blog.seraph.to/">
      <img src="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120" alt="Ernesto Crespo" title="Ernesto Crespo">
    </a>

    <h1>
      <a href="https://blog.seraph.to/">Ernesto Crespo</a>
    </h1>

    <p>Data Scientist </p>


    <nav>
      <ul class="list">


            <li>
              <a target="_self"
                 href="https://blog.seraph.to/pages/About.html#About">
                Acerca
              </a>
            </li>
            <li>
              <a target="_self"
                 href="https://blog.seraph.to/pages/Contacto.html#Contacto">
                Contacto
              </a>
            </li>

      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-medium"
           href="https://medium.com/@_seraph1"
           target="_blank">
          <i class="fa-brands fa-medium"></i>
        </a>
      </li>
      <li>
        <a class="sc-linkedin"
           href="http://ve.linkedin.com/in/ernestocrespo"
           target="_blank">
          <i class="fa-brands fa-linkedin"></i>
        </a>
      </li>
      <li>
        <a class="sc-github"
           href="https://github.com/ecrespo"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
      <li>
        <a class="sc-google"
           href="https://google.com/+ErnestoCrespo"
           target="_blank">
          <i class="fa-brands fa-google"></i>
        </a>
      </li>
      <li>
        <a class="sc-twitter"
           href="https://twitter.com/_seraph1"
           target="_blank">
          <i class="fa-brands fa-twitter"></i>
        </a>
      </li>
      <li>
        <a class="sc-facebook"
           href="https://www.facebook.com/ernesto.crespo"
           target="_blank">
          <i class="fa-brands fa-facebook"></i>
        </a>
      </li>
      <li>
        <a class="sc-gitlab"
           href="https://gitlab.com/ecrespo"
           target="_blank">
          <i class="fa-brands fa-gitlab"></i>
        </a>
      </li>
      <li>
        <a class="sc-soundcloud"
           href="https://soundcloud.com/ernesto-crespo"
           target="_blank">
          <i class="fa-brands fa-soundcloud"></i>
        </a>
      </li>
      <li>
        <a class="sc-deepnote"
           href="https://deepnote.com/@ernesto-crespo"
           target="_blank">
          <i class="fa-brands fa-deepnote"></i>
        </a>
      </li>
      <li>
        <a class="sc-kaggle"
           href="https://www.kaggle.com/ecrespoa"
           target="_blank">
          <i class="fa-brands fa-kaggle"></i>
        </a>
      </li>
      <li>
        <a class="sc-rss"
           href="//blog.seraph.to/feeds/all.atom.xml"
           target="_blank">
          <i class="fa-solid fa-rss"></i>
        </a>
      </li>
    </ul>
  </div>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-aside"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234561"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</aside>
  <main>
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-responsive"
           data-ad-client="pub-0261001661746989"
           data-ad-slot="1234562"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>

<nav>
  <a href="https://blog.seraph.to/">Home</a>

  <a href="/archives.html">Archives</a>
  <a href="/categories.html">Categories</a>
  <a href="/tags.html">Tags</a>

  <a href="https://blog.seraph.to/feeds/all.atom.xml">Atom</a>

</nav>

<article class="single">
  <header>
      
    <h1 id="manejo-de-sesion-en-el-orm-sqlalchemy">Manejo de sesión en el ORM sqlalchemy</h1>
    <p>
      Posted on Wed 18 September 2013 in <a href="https://blog.seraph.to/category/general.html">General</a>

        &#8226; 3 min read
    </p>
  </header>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234565"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

  <div>
    <p>Hace tiempo explique como crear unas tablas para la base de datos <code>sqlite3</code>, insertar datos, removerlos y consultarlos,el artículo se llama <a href="http://blog.crespo.org.ve/2012/04/abstraccion-del-motor-de-base-de-datos.html">Abstracción del motor de Base de Datos con el ORM Sqlalchemy y python</a>.</p>
<p>Antes de comenzar a probar lo que se escribe en este artículo es necesario que realicen pruebas con el artículo mencionado anteriormente para que tengan la base de datos con sus datos listas para ser utilizadas en este artículo.</p>
<p>Ahora se explica como usar unas tablas con sus datos ya creada, creando una sesión para la base de datos.</p>
<p>Este artículo se basa en un <a href="mapfish.org/doc/tutorials/sqlalchemy.html">tutorial en inglés de sqlalchemy</a> o el <a href="http://www.rmunn.com/sqlalchemy-tutorial/tutorial.html">tutorial paso a paso de sqlalchemy</a>.</p>
<p>Lo primero que se hará es crear un archivo <code>model.py</code> que contendrá el modelo de la base de datos.</p>
<div class="highlight"><pre><span class="code-line"><span></span><code><span class="c1">#Se importa el módulo datetime</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="kn">import</span> <span class="nn">datetime</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se importa schema y tupes de sqlalchemy</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">schema</span><span class="p">,</span> <span class="n">types</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se instancia la clase MetaData.</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">metadata</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">MetaData</span><span class="p">()</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se crea la función now que devuelve la hora actual.</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="k">def</span> <span class="nf">now</span><span class="p">():</span></span>
<span class="code-line"></span>
<span class="code-line">    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se crea la instancia table con los campos de la tabla grupos</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">grupos_table</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;grupos&#39;</span><span class="p">,</span><span class="n">metadata</span><span class="p">,</span></span>
<span class="code-line"></span>
<span class="code-line">        <span class="n">schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="n">types</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span></span>
<span class="code-line"></span>
<span class="code-line">        <span class="n">schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;grupo&#39;</span><span class="p">,</span><span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">300</span><span class="p">),</span><span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span></span>
<span class="code-line"></span>
<span class="code-line">        <span class="n">schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;descripcion&#39;</span><span class="p">,</span><span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span><span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="p">)</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se crea la instancia table con los campos de la tabla contactos</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">contactos_table</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;contactos&#39;</span><span class="p">,</span><span class="n">metadata</span><span class="p">,</span></span>
<span class="code-line"></span>
<span class="code-line">        <span class="n">schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="n">types</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span></span>
<span class="code-line"></span>
<span class="code-line">        <span class="n">schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;nombre&#39;</span><span class="p">,</span><span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span><span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span></span>
<span class="code-line"></span>
<span class="code-line">        <span class="n">schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;telefono&#39;</span><span class="p">,</span><span class="n">types</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span><span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span></span>
<span class="code-line"></span>
<span class="code-line">        <span class="n">schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;grupo_id&#39;</span><span class="p">,</span><span class="n">types</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span><span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="p">)</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se crea la clase Contactos y Grupos que heredan de object y sólo tienen pass.</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="k">class</span> <span class="nc">Contactos</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> <span class="k">pass</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="k">class</span> <span class="nc">Grupos</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> <span class="k">pass</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se mapea la Clase Contactos con la tabla contactos_table</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">orm</span><span class="o">.</span><span class="n">mapper</span><span class="p">(</span><span class="n">Contactos</span><span class="p">,</span> <span class="n">contactos_table</span><span class="p">)</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se mapea la Clase Grupos con la tabla grupos_table</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">orm</span><span class="o">.</span><span class="n">mapper</span><span class="p">(</span><span class="n">Grupos</span><span class="p">,</span><span class="n">grupos_table</span><span class="p">)</span></span>
<span class="code-line"></code></pre></div>

<p>Ya con este código se logra el mapeo de las tablas existentes con sus campos.</p>
<p>Ahora se crea un archivo llamado <code>prueba-db.py</code> que va a realizar la sesión a la base de datos por medio del módulo <code>model.py</code>  donde se realizará unas consultas, inserciones y remociones de datos.</p>
<div class="highlight"><pre><span class="code-line"><span></span><code><span class="ch">#!/usr/bin/env python</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1"># -*- coding: utf-8 -*-</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="kn">import</span> <span class="nn">model</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">orm</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Crear un engine y crear todas las tablas necesarias</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///tutorial.db&#39;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">model</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">bind</span> <span class="o">=</span> <span class="n">engine</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">model</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1"># Configurar la sesion</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">sm</span> <span class="o">=</span> <span class="n">orm</span><span class="o">.</span><span class="n">sessionmaker</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">,</span> <span class="n">autoflush</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">autocommit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span></span>
<span class="code-line"></span>
<span class="code-line">            <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">session</span> <span class="o">=</span> <span class="n">orm</span><span class="o">.</span><span class="n">scoped_session</span><span class="p">(</span><span class="n">sm</span><span class="p">)</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se realiza una consulta a la tabla grupos</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="nb">print</span> <span class="s2">&quot;Consulta inicial de la tabla contactos&quot;</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">consulta</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Contactos</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="k">for</span> <span class="n">lista</span> <span class="ow">in</span> <span class="n">consulta</span><span class="p">:</span></span>
<span class="code-line"></span>
<span class="code-line">    <span class="nb">print</span> <span class="n">lista</span><span class="o">.</span><span class="n">nombre</span><span class="p">,</span><span class="n">lista</span><span class="o">.</span><span class="n">telefono</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="nb">print</span> <span class="s2">&quot;--------------------------------&quot;</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Agregar un contacto</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">contacto</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Contactos</span><span class="p">()</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">contacto</span><span class="o">.</span><span class="n">nombre</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;Luisa Gonzalez&quot;</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">contacto</span><span class="o">.</span><span class="n">telefono</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;04155555555&quot;</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">contacto</span><span class="o">.</span><span class="n">grupo_id</span> <span class="o">=</span> <span class="mi">2</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">contacto</span><span class="p">)</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">session</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se realiza una consulta a la tabla grupos</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="nb">print</span> <span class="s2">&quot;Consulta la tabla contactos con el dato incorporado&quot;</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">consulta</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Contactos</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="k">for</span> <span class="n">lista</span> <span class="ow">in</span> <span class="n">consulta</span><span class="p">:</span></span>
<span class="code-line"></span>
<span class="code-line">    <span class="nb">print</span> <span class="n">lista</span><span class="o">.</span><span class="n">nombre</span><span class="p">,</span><span class="n">lista</span><span class="o">.</span><span class="n">telefono</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="nb">print</span> <span class="s2">&quot;--------------------------------&quot;</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Borrar un contacto</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">contacto</span><span class="p">)</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">session</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1">#Se realiza una consulta a la tabla grupos</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="nb">print</span> <span class="s2">&quot;Consulta la tabla contactos luego de borrar el dato&quot;</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="n">consulta</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Contactos</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="k">for</span> <span class="n">lista</span> <span class="ow">in</span> <span class="n">consulta</span><span class="p">:</span></span>
<span class="code-line"></span>
<span class="code-line">    <span class="nb">print</span> <span class="n">lista</span><span class="o">.</span><span class="n">nombre</span><span class="p">,</span><span class="n">lista</span><span class="o">.</span><span class="n">telefono</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="nb">print</span> <span class="s2">&quot;--------------------------------&quot;</span></span>
<span class="code-line"></code></pre></div>

<p>El resultado de ejecutar el script <code>pruebas-db.py</code> se muestra a continuación:</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>Consulta inicial de la tabla contactos</span>
<span class="code-line"></span>
<span class="code-line">Ernesto Crespo 04155673029</span>
<span class="code-line"></span>
<span class="code-line">Pedro Perez 0295212223</span>
<span class="code-line"></span>
<span class="code-line">Jhon Doe 04184488484</span>
<span class="code-line"></span>
<span class="code-line">Jane Doe 04184488482</span>
<span class="code-line"></span>
<span class="code-line">Pepito de los palotes 04184588484</span>
<span class="code-line"></span>
<span class="code-line">--------------------------------</span>
<span class="code-line"></span>
<span class="code-line">Consulta la tabla contactos con el dato incorporado</span>
<span class="code-line"></span>
<span class="code-line">Ernesto Crespo 04155673029</span>
<span class="code-line"></span>
<span class="code-line">Pedro Perez 0295212223</span>
<span class="code-line"></span>
<span class="code-line">Jhon Doe 04184488484</span>
<span class="code-line"></span>
<span class="code-line">Jane Doe 04184488482</span>
<span class="code-line"></span>
<span class="code-line">Pepito de los palotes 04184588484</span>
<span class="code-line"></span>
<span class="code-line">Luisa Gonzalez 04155555555</span>
<span class="code-line"></span>
<span class="code-line">--------------------------------</span>
<span class="code-line"></span>
<span class="code-line">Consulta la tabla contactos luego de borrar el dato</span>
<span class="code-line"></span>
<span class="code-line">Ernesto Crespo 04155673029</span>
<span class="code-line"></span>
<span class="code-line">Pedro Perez 0295212223</span>
<span class="code-line"></span>
<span class="code-line">Jhon Doe 04184488484</span>
<span class="code-line"></span>
<span class="code-line">Jane Doe 04184488482</span>
<span class="code-line"></span>
<span class="code-line">Pepito de los palotes 04184588484</span>
<span class="code-line"></span>
<span class="code-line">--------------------------------</span>
<span class="code-line"></code></pre></div>

<p>De esta forma se puede realizar consultas, remociones e inserciones por medio de <code>sqlalchemy</code> con sesiones.</p>
<h2></h2>
<p>¡Haz tu donativo!
Si te gustó el artículo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
dirección: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el código QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"></p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://blog.seraph.to/tag/general.html">General</a>
      <a href="https://blog.seraph.to/tag/python.html">Python</a>
    </p>
  </div>

<section>
  <p id="post-share-links">
    Share on:
    <a href="mailto:?subject=Manejo%20de%20sesi%C3%B3n%20en%20el%20ORM%20sqlalchemy&amp;body=https%3A//blog.seraph.to/manejo-de-sesion-en-el-orm-sqlalchemy.html" title="Share via Email">Email</a>
    |
    <a href="https://sharetodiaspora.github.io/?title=Manejo%20de%20sesi%C3%B3n%20en%20el%20ORM%20sqlalchemy&url=https%3A//blog.seraph.to/manejo-de-sesion-en-el-orm-sqlalchemy.html" title="Share on Diaspora">Diaspora</a>
    |
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//blog.seraph.to/manejo-de-sesion-en-el-orm-sqlalchemy.html" title="Share on Facebook">Facebook</a>
    |
    <a href="https://news.ycombinator.com/submitlink?t=Manejo%20de%20sesi%C3%B3n%20en%20el%20ORM%20sqlalchemy&u=https%3A//blog.seraph.to/manejo-de-sesion-en-el-orm-sqlalchemy.html" title="Share on Hacker News">Hacker News</a>
    |
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A//blog.seraph.to/manejo-de-sesion-en-el-orm-sqlalchemy.html&title=Manejo%20de%20sesi%C3%B3n%20en%20el%20ORM%20sqlalchemy&summary=Hace%20tiempo%20explique%20como%20crear%20unas%20tablas%20para%20la%20base%20de%20datos%20sqlite3%2C%20insertar%20datos%2C%20removerlos%20y%20consultarlos%2Cel%20art%C3%ADculo%20se%20llama%20Abstracci%C3%B3n%20del%20motor%20de%20Base%20de%20Datos%20con%20el%20ORM%20Sqlalchemy%20y%20python.%0AAntes%20de%20comenzar%20a%20probar%20lo%20que%20se%20escribe%20en%20este%20art%C3%ADculo%20es%20necesario%20que%20%E2%80%A6&source=https%3A//blog.seraph.to/manejo-de-sesion-en-el-orm-sqlalchemy.html" title="Share on LinkedIn">LinkedIn</a>
    |
    <a href="" title="Share on Mastodon">Mastodon</a>
    |
    <a href="https://www.reddit.com/submit?url=https%3A//blog.seraph.to/manejo-de-sesion-en-el-orm-sqlalchemy.html&title=Manejo%20de%20sesi%C3%B3n%20en%20el%20ORM%20sqlalchemy" title="Share via Reddit">Reddit</a>
    |
    <a href="https://twitter.com/intent/tweet?text=Manejo%20de%20sesi%C3%B3n%20en%20el%20ORM%20sqlalchemy&url=https%3A//blog.seraph.to/manejo-de-sesion-en-el-orm-sqlalchemy.html&hashtags=general,python" title="Share on Twitter">Twitter</a>
    |
    <a href="" title="Share on Bluesky">Bluesky</a>
  </p>
</section>


  <div class="neighbors">
    <a class="btn float-left" href="https://blog.seraph.to/bajar-videos-de-youtube-desde-python-con-pafy.html" title="Bajar vídeos de youtube desde Python con Pafy.">
      <i class="fa fa-angle-left"></i> Previous Post
    </a>
    <a class="btn float-right" href="https://blog.seraph.to/descubriendo-trending-topics-de-twitter-con-twython-y-python.html" title="Descubriendo Trending Topics de Twitter con twython y python">
      Next Post <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>You might enjoy</h4>
    <ul class="related-posts">
      <li><a href="https://blog.seraph.to/arbol-de-decision-hecho-en-python.html">Árbol de decisión hecho en Python</a></li>
      <li><a href="https://blog.seraph.to/consultar-dns-por-medio-de-scapy.html">Consultar DNS por medio de Scapy</a></li>
      <li><a href="https://blog.seraph.to/calculo-de-pi-por-el-metodo-montecarlo-usando-python.html">Cálculo de Pi por el método MonteCarlo usando Python.</a></li>
      <li><a href="https://blog.seraph.to/estructura-de-datos-en-python-lista-enlazada.html">Estructura de datos en Python (Lista Enlazada)</a></li>
      <li><a href="https://blog.seraph.to/instalar-gitlab-runner-de-gitlab-ci-por-medio-de-docker.html">Instalar gitlab-runner de gitlab-ci por medio de Docker</a></li>
    </ul>
  </div>


    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234566"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https://seraphto.disqus.com';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

<footer>
<p>&copy; 2022 </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Página de Seraph ",
  "url" : "https://blog.seraph.to",
  "image": "//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120",
  "description": " Software Libre, Ciencia de Datos y Python"
}
</script>
</body>
</html>