
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="https://ecrespo.github.io/theme/pygments/monokai.min.css">



  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/solid.css">



  <!-- Chrome, Firefox OS and Opera -->
  <meta name="theme-color" content="#e5e5ff">
  <!-- Windows Phone -->
  <meta name="msapplication-navbutton-color" content="#e5e5ff">
  <!-- iOS Safari -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <!-- Microsoft EDGE -->
  <meta name="msapplication-TileColor" content="#e5e5ff">

  <link href="https://ecrespo.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Página de Seraph Atom">


<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131517246-1', 'auto');
  ga('send', 'pageview');
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-300366206"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-300366206');
</script>






 

<meta name="author" content="Ernesto Crespo" />
<meta name="description" content="En el primer artículo se tocó el tema del api rest ful con eve de manera sencilla. En este artículo se toca el uso de mongodb para majejo del api rest con mongodb, el artículo se basa en la guía rápida de eve que se encuentra en su sitio. Los …" />
<meta name="keywords" content="Debian, Linux, Python, Ubuntu, API Restfull, Eve">


  <meta property="og:site_name" content="Página de Seraph"/>
  <meta property="og:title" content="API rest ful con Eve (parte 2)"/>
  <meta property="og:description" content="En el primer artículo se tocó el tema del api rest ful con eve de manera sencilla. En este artículo se toca el uso de mongodb para majejo del api rest con mongodb, el artículo se basa en la guía rápida de eve que se encuentra en su sitio. Los …"/>
  <meta property="og:locale" content="es_VE"/>
  <meta property="og:url" content="https://ecrespo.github.io/api-rest-ful-con-eve-parte-2.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2016-02-07 09:00:00-04:30"/>
  <meta property="article:modified_time" content=""/>
  <meta property="article:author" content="https://ecrespo.github.io/author/ernesto-crespo.html">
  <meta property="article:section" content="Tutorial Python"/>
  <meta property="article:tag" content="Debian"/>
  <meta property="article:tag" content="Linux"/>
  <meta property="article:tag" content="Python"/>
  <meta property="article:tag" content="Ubuntu"/>
  <meta property="article:tag" content="API Restfull"/>
  <meta property="article:tag" content="Eve"/>
  <meta property="og:image" content="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120">

  <title>Página de Seraph &ndash; API rest ful con Eve (parte 2)</title>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "pub-0261001661746989",
      enable_page_level_ads: true
    });
  </script>

</head>
<body class="light-theme">

<aside>
  <div>
    <a href="https://ecrespo.github.io/">
      <img src="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120" alt="Ernesto Crespo" title="Ernesto Crespo">
    </a>

    <h1>
      <a href="https://ecrespo.github.io/">Ernesto Crespo</a>
    </h1>

    <p>Data Scientist </p>


    <nav>
      <ul class="list">


            <li>
              <a target="_self"
                 href="https://ecrespo.github.io/pages/About.html#About">
                Acerca
              </a>
            </li>
            <li>
              <a target="_self"
                 href="https://ecrespo.github.io/pages/Contacto.html#Contacto">
                Contacto
              </a>
            </li>

      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-medium"
           href="https://medium.com/@_seraph1"
           target="_blank">
          <i class="fa-brands fa-medium"></i>
        </a>
      </li>
      <li>
        <a class="sc-linkedin"
           href="http://ve.linkedin.com/in/ernestocrespo"
           target="_blank">
          <i class="fa-brands fa-linkedin"></i>
        </a>
      </li>
      <li>
        <a class="sc-github"
           href="https://github.com/ecrespo"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
      <li>
        <a class="sc-google"
           href="https://google.com/+ErnestoCrespo"
           target="_blank">
          <i class="fa-brands fa-google"></i>
        </a>
      </li>
      <li>
        <a class="sc-twitter"
           href="https://twitter.com/_seraph1"
           target="_blank">
          <i class="fa-brands fa-twitter"></i>
        </a>
      </li>
      <li>
        <a class="sc-facebook"
           href="https://www.facebook.com/ernesto.crespo"
           target="_blank">
          <i class="fa-brands fa-facebook"></i>
        </a>
      </li>
      <li>
        <a class="sc-gitlab"
           href="https://gitlab.com/ecrespo"
           target="_blank">
          <i class="fa-brands fa-gitlab"></i>
        </a>
      </li>
      <li>
        <a class="sc-soundcloud"
           href="https://soundcloud.com/ernesto-crespo"
           target="_blank">
          <i class="fa-brands fa-soundcloud"></i>
        </a>
      </li>
      <li>
        <a class="sc-deepnote"
           href="https://deepnote.com/@ernesto-crespo"
           target="_blank">
          <i class="fa-brands fa-deepnote"></i>
        </a>
      </li>
      <li>
        <a class="sc-kaggle"
           href="https://www.kaggle.com/ecrespoa"
           target="_blank">
          <i class="fa-brands fa-kaggle"></i>
        </a>
      </li>
      <li>
        <a class="sc-rss"
           href="//blog.seraph.to/feeds/all.atom.xml"
           target="_blank">
          <i class="fa-solid fa-rss"></i>
        </a>
      </li>
    </ul>
  </div>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-aside"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234561"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</aside>
  <main>
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-responsive"
           data-ad-client="pub-0261001661746989"
           data-ad-slot="1234562"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>

<nav>
  <a href="https://ecrespo.github.io/">Home</a>

  <a href="/archives.html">Archives</a>
  <a href="/categories.html">Categories</a>
  <a href="/tags.html">Tags</a>

  <a href="https://ecrespo.github.io/feeds/all.atom.xml">Atom</a>

</nav>

<article class="single">
  <header>
      
    <h1 id="api-rest-ful-con-eve-parte-2">API rest ful con Eve (parte 2)</h1>
    <p>
      Posted on Sun 07 February 2016 in <a href="https://ecrespo.github.io/category/tutorial-python.html">Tutorial Python</a>

        &#8226; 3 min read
    </p>
  </header>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234565"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

  <div>
    <p>En el primer <a href="https://www.seraph.to/api-rest-full-para-python-con-eve-parte-1.html#api-rest-full-para-python-con-eve-parte-1">artículo</a> se tocó el tema del api rest ful con eve de manera sencilla.</p>
<p>En este artículo se toca el uso de mongodb para majejo del api rest con mongodb, el artículo se basa en la guía rápida de eve que se encuentra en su <a href="https://docs.python-eve.org/en/stable/quickstart.html">sitio</a>.</p>
<p>Los artículos relacionados con mongodb del blog son:</p>
<ol>
<li><a href="https://www.seraph.to/habilitar-autenticacion-en-un-servidor-mongodb.html#habilitar-autenticacion-en-un-servidor-mongodb">Instalar un servidor mongodb en Debian.</a>  </li>
<li><a href="https://www.seraph.to/instalar-un-servidor-mongodb-en-debian.html#instalar-un-servidor-mongodb-en-debian">Habilitar la autenticación en un servidor mongodb.</a>  </li>
</ol>
<p>Para ver la base de datos en mongodb se usará el cliente <a href="https://app.robomongo.org/">robomongo</a> que lo pueden descargar en el siguiente <a href="https://app.robomongo.org/download.html">enlace</a>.</p>
<p>El archivo <code>run.py</code> contiene lo mismo que en el artículo anterior:</p>
<div class="highlight"><pre><span class="code-line"><span></span><code><span class="ch">#!/usr/bin/env python</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="kn">from</span> <span class="nn">eve</span> <span class="kn">import</span> <span class="n">Eve</span></span>
<span class="code-line"><span class="n">app</span> <span class="o">=</span> <span class="n">Eve</span><span class="p">()</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span></span>
<span class="code-line">    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span></span>
<span class="code-line"></code></pre></div>

<p>El archivo <code>settings.py</code> contendrá algunas directivas.</p>
<p>Configuración de la base de datos mongodb:</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>MONGO_HOST = &#39;localhost&#39;</span>
<span class="code-line">MONGO_PORT = 27017</span>
<span class="code-line"><span class="gh">#</span>MONGO_USERNAME = &#39;user&#39;</span>
<span class="code-line"><span class="gh">#</span>MONGO_PASSWORD = &#39;user&#39;</span>
<span class="code-line">MONGO_DBNAME = &#39;eve&#39;</span>
<span class="code-line"></code></pre></div>

<p>Como a mongodb no se le ha configurado un usuario y clave se comentan esas líneas, la base de datos a usar se llama eve.</p>
<p>Configurar todas las opciones del CRUD (leer, editar, update y borrar):</p>
<div class="highlight"><pre><span class="code-line"><span></span><code><span class="gh">#</span> Enable reads (GET), inserts (POST) and DELETE for resources/collections</span>
<span class="code-line"><span class="gh">#</span> (if you omit this line, the API will default to [&#39;GET&#39;] and provide</span>
<span class="code-line"><span class="gh">#</span> read-only access to the endpoint).</span>
<span class="code-line">RESOURCE_METHODS = [&#39;GET&#39;, &#39;POST&#39;, &#39;DELETE&#39;]</span>
<span class="code-line"></span>
<span class="code-line"><span class="gh">#</span> Enable reads (GET), edits (PATCH), replacements (PUT) and deletes of</span>
<span class="code-line"><span class="gh">#</span> individual items  (defaults to read-only item access).</span>
<span class="code-line">ITEM_METHODS = [&#39;GET&#39;, &#39;PATCH&#39;, &#39;PUT&#39;, &#39;DELETE&#39;]</span>
<span class="code-line"></code></pre></div>

<p>Se define un esquema el cual permite validar los datos:</p>
<div class="highlight"><pre><span class="code-line"><span></span><code><span class="nx">schema</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{</span></span>
<span class="code-line"><span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="nx">Schema</span><span class="w"> </span><span class="nx">definition</span><span class="p">,</span><span class="w"> </span><span class="nx">based</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">Cerberus</span><span class="w"> </span><span class="nx">grammar</span><span class="p">.</span><span class="w"> </span><span class="nx">Check</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">Cerberus</span><span class="w"> </span><span class="nx">project</span></span>
<span class="code-line"><span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="nx">https</span><span class="p">:</span><span class="c1">//github.com/nicolaiarocci/cerberus) for details.</span></span>
<span class="code-line"><span class="w">    </span><span class="err">&#39;</span><span class="nx">nombre</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span></span>
<span class="code-line"><span class="w">        </span><span class="err">&#39;</span><span class="k">type</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="kt">string</span><span class="err">&#39;</span><span class="p">,</span></span>
<span class="code-line"><span class="w">        </span><span class="err">&#39;</span><span class="nx">minlength</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span></span>
<span class="code-line"><span class="w">        </span><span class="err">&#39;</span><span class="nx">maxlength</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span></span>
<span class="code-line"><span class="w">    </span><span class="p">},</span></span>
<span class="code-line"><span class="w">    </span><span class="err">&#39;</span><span class="nx">apellido</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span></span>
<span class="code-line"><span class="w">        </span><span class="err">&#39;</span><span class="k">type</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="kt">string</span><span class="err">&#39;</span><span class="p">,</span></span>
<span class="code-line"><span class="w">        </span><span class="err">&#39;</span><span class="nx">minlength</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span></span>
<span class="code-line"><span class="w">        </span><span class="err">&#39;</span><span class="nx">maxlength</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span></span>
<span class="code-line"><span class="w">        </span><span class="err">&#39;</span><span class="nx">required</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="nx">True</span><span class="p">,</span></span>
<span class="code-line"><span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="nx">talk</span><span class="w"> </span><span class="nx">about</span><span class="w"> </span><span class="nx">hard</span><span class="w"> </span><span class="nx">constraints</span><span class="p">!</span><span class="w"> </span><span class="nx">For</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">purpose</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">demo</span></span>
<span class="code-line"><span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">lastname</span><span class="err">&#39;</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">an</span><span class="w"> </span><span class="nx">API</span><span class="w"> </span><span class="nx">entry</span><span class="o">-</span><span class="nx">point</span><span class="p">,</span><span class="w"> </span><span class="nx">so</span><span class="w"> </span><span class="nx">we</span><span class="w"> </span><span class="nx">need</span><span class="w"> </span><span class="nx">it</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">unique</span><span class="p">.</span></span>
<span class="code-line"><span class="w">        </span><span class="err">&#39;</span><span class="nx">unique</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="nx">True</span><span class="p">,</span></span>
<span class="code-line"><span class="w">    </span><span class="p">},</span></span>
<span class="code-line"><span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">role</span><span class="err">&#39;</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">list</span><span class="p">,</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">can</span><span class="w"> </span><span class="nx">only</span><span class="w"> </span><span class="nx">contain</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">allowed</span><span class="err">&#39;</span><span class="p">.</span></span>
<span class="code-line"><span class="w">    </span><span class="err">&#39;</span><span class="nx">role</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span></span>
<span class="code-line"><span class="w">        </span><span class="err">&#39;</span><span class="k">type</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">list</span><span class="err">&#39;</span><span class="p">,</span></span>
<span class="code-line"><span class="w">        </span><span class="err">&#39;</span><span class="nx">allowed</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;author&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;contributor&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;copy&quot;</span><span class="p">],</span></span>
<span class="code-line"><span class="w">    </span><span class="p">},</span></span>
<span class="code-line"><span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="nx">An</span><span class="w"> </span><span class="nx">embedded</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">strongly</span><span class="o">-</span><span class="nx">typed</span><span class="err">&#39;</span><span class="w"> </span><span class="nx">dictionary</span><span class="p">.</span></span>
<span class="code-line"><span class="w">    </span><span class="err">&#39;</span><span class="nx">localizacion</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span></span>
<span class="code-line"><span class="w">        </span><span class="err">&#39;</span><span class="k">type</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">dict</span><span class="err">&#39;</span><span class="p">,</span></span>
<span class="code-line"><span class="w">        </span><span class="err">&#39;</span><span class="nx">schema</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span></span>
<span class="code-line"><span class="w">            </span><span class="err">&#39;</span><span class="nx">direccion</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">&#39;</span><span class="k">type</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="kt">string</span><span class="err">&#39;</span><span class="p">},</span></span>
<span class="code-line"><span class="w">            </span><span class="err">&#39;</span><span class="nx">ciudad</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">&#39;</span><span class="k">type</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="kt">string</span><span class="err">&#39;</span><span class="p">}</span></span>
<span class="code-line"><span class="w">        </span><span class="p">},</span></span>
<span class="code-line"><span class="w">    </span><span class="p">},</span></span>
<span class="code-line"><span class="w">    </span><span class="err">&#39;</span><span class="nx">nacimiento</span><span class="p">:</span><span class="w"> </span><span class="p">{</span></span>
<span class="code-line"><span class="w">        </span><span class="err">&#39;</span><span class="k">type</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">datetime</span><span class="err">&#39;</span><span class="p">,</span></span>
<span class="code-line"><span class="w">    </span><span class="p">},</span></span>
<span class="code-line"><span class="p">}</span></span>
<span class="code-line"></code></pre></div>

<p>Definición de persona:</p>
<div class="highlight"><pre><span class="code-line"><span></span><code><span class="n">persona</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span></span>
<span class="code-line"><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="p">&#39;</span><span class="n">title</span><span class="p">&#39;</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="n">links</span><span class="p">.</span><span class="w"> </span><span class="n">Defaults</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="n">minus</span></span>
<span class="code-line"><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">final</span><span class="p">,</span><span class="w"> </span><span class="n">plural</span><span class="w"> </span><span class="sc">&#39;s&#39;</span><span class="w"> </span><span class="p">(</span><span class="n">works</span><span class="w"> </span><span class="n">fine</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">cases</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="p">&#39;</span><span class="n">people</span><span class="p">&#39;)</span></span>
<span class="code-line"><span class="w">    </span><span class="p">&#39;</span><span class="n">titulo</span><span class="p">&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">&#39;</span><span class="n">persona</span><span class="p">&#39;,</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">as</span></span>
<span class="code-line"><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="p">&#39;</span><span class="o">/</span><span class="n">people</span><span class="o">/&lt;</span><span class="n">ObjectId</span><span class="o">&gt;</span><span class="p">&#39;.</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">untouched</span><span class="p">,</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">enable</span><span class="w"> </span><span class="n">an</span></span>
<span class="code-line"><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="n">point</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="n">consumers</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">perform</span></span>
<span class="code-line"><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="n">GET</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="p">&#39;</span><span class="o">/</span><span class="n">people</span><span class="o">/&lt;</span><span class="n">lastname</span><span class="o">&gt;</span><span class="p">&#39;.</span></span>
<span class="code-line"><span class="w">    </span><span class="p">&#39;</span><span class="n">additional_lookup</span><span class="p">&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span></span>
<span class="code-line"><span class="w">        </span><span class="p">&#39;</span><span class="n">url</span><span class="p">&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">&#39;</span><span class="n">regex</span><span class="p">(</span><span class="s">&quot;[\w]+&quot;</span><span class="p">)&#39;,</span></span>
<span class="code-line"><span class="w">        </span><span class="p">&#39;</span><span class="n">field</span><span class="p">&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">&#39;</span><span class="n">apellido</span><span class="p">&#39;</span></span>
<span class="code-line"><span class="w">    </span><span class="p">},</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">choose</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="n">global</span><span class="w"> </span><span class="n">cache</span><span class="o">-</span><span class="n">control</span><span class="w"> </span><span class="n">directives</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">resource</span><span class="p">.</span></span>
<span class="code-line"><span class="w">    </span><span class="p">&#39;</span><span class="n">cache_control</span><span class="p">&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">&#39;</span><span class="n">max</span><span class="o">-</span><span class="n">age</span><span class="o">=</span><span class="mh">10</span><span class="p">,</span><span class="n">must</span><span class="o">-</span><span class="n">revalidate</span><span class="p">&#39;,</span></span>
<span class="code-line"><span class="w">    </span><span class="p">&#39;</span><span class="n">cache_expires</span><span class="p">&#39;</span><span class="o">:</span><span class="w"> </span><span class="mh">10</span><span class="p">,</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">global</span><span class="w"> </span><span class="n">settings</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">overridden</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">level</span></span>
<span class="code-line"><span class="w">    </span><span class="p">&#39;</span><span class="n">resource_methods</span><span class="p">&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">[&#39;</span><span class="n">GET</span><span class="p">&#39;,</span><span class="w"> </span><span class="p">&#39;</span><span class="n">POST</span><span class="p">&#39;],</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="w">    </span><span class="p">&#39;</span><span class="n">schema</span><span class="p">&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">schema</span></span>
<span class="code-line"><span class="p">}</span></span>
<span class="code-line"></code></pre></div>

<p>Por último se define el recurso como un dominio, el recurso persona toma la definición dada anteriormente:</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>DOMAIN = {</span>
<span class="code-line">    &#39;persona&#39;: persona,</span>
<span class="code-line">}</span>
<span class="code-line"></code></pre></div>

<p>Con robomongo se puede observar que ya se tiene dos documentos agregados a la colección persona de la base de datos eve:</p>
<p><img alt="" src="./images/apirestfulconeve2-1.png"></p>
<p>Se consulta vía GET a http://127.0.0.1:500 por medio de la extensión de google chrome restclient:</p>
<p><img alt="" src="./images/apirestfulconeve2-2.png"></p>
<p>Al hacer una consulta GET a http://127.0.0.1:5000/persona se tiene lo siguiente:</p>
<p><img alt="" src="./images/apirestfulconeve2-3.png"></p>
<p><img alt="" src="./images/apirestfulconeve2-4.png"></p>
<p>Desde la línea de comandos se agregará dos documentos, se usará curl para ello:</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>curl -d &#39;[{&quot;nombre&quot;: &quot;Ernesto&quot;, &quot;apellido&quot;: &quot;Crespo&quot;}, {&quot;nombre&quot;: &quot;Argimiro&quot;, &quot;apellido&quot;: &quot;Crespo&quot;}]&#39; -H &#39;Content-Type: application/json&#39;  http://127.0.0.1:5000/persona</span>
<span class="code-line"></code></pre></div>

<p>Al ejecutar devuelve lo siguiente:</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>{</span>
<span class="code-line">   &quot;_status&quot;: &quot;OK&quot;,</span>
<span class="code-line">   &quot;_items&quot;: [</span>
<span class="code-line">      {</span>
<span class="code-line">         &quot;_updated&quot;: &quot;Mon, 08 Feb 2016 03:34:41 GMT&quot;,</span>
<span class="code-line">         &quot;_links&quot;: {</span>
<span class="code-line">            &quot;self&quot;: {</span>
<span class="code-line">               &quot;href&quot;: &quot;persona/56b80cd146b4402633320fd5&quot;,</span>
<span class="code-line">               &quot;title&quot;: &quot;Persona&quot;</span>
<span class="code-line">            }</span>
<span class="code-line">         },</span>
<span class="code-line">         &quot;_created&quot;: &quot;Mon, 08 Feb 2016 03:34:41 GMT&quot;,</span>
<span class="code-line">         &quot;_status&quot;: &quot;OK&quot;,</span>
<span class="code-line">         &quot;_id&quot;: &quot;56b80cd146b4402633320fd5&quot;,</span>
<span class="code-line">         &quot;_etag&quot;: &quot;cb32857db339920319adeb23b29359936c92680f&quot;</span>
<span class="code-line">      },</span>
<span class="code-line">      {</span>
<span class="code-line">         &quot;_updated&quot;: &quot;Mon, 08 Feb 2016 03:34:41 GMT&quot;,</span>
<span class="code-line">         &quot;_links&quot;: {</span>
<span class="code-line">            &quot;self&quot;: {</span>
<span class="code-line">               &quot;href&quot;: &quot;persona/56b80cd146b4402633320fd6&quot;,</span>
<span class="code-line">               &quot;title&quot;: &quot;Persona&quot;</span>
<span class="code-line">            }</span>
<span class="code-line">         },</span>
<span class="code-line">         &quot;_created&quot;: &quot;Mon, 08 Feb 2016 03:34:41 GMT&quot;,</span>
<span class="code-line">         &quot;_status&quot;: &quot;OK&quot;,</span>
<span class="code-line">         &quot;_id&quot;: &quot;56b80cd146b4402633320fd6&quot;,</span>
<span class="code-line">         &quot;_etag&quot;: &quot;c14c62e94c88dd227ccffaf5c248f18492040ee2&quot;</span>
<span class="code-line">      }</span>
<span class="code-line">   ]</span>
<span class="code-line">}</span>
<span class="code-line"></code></pre></div>

<p>Al revisar la base de datos mongodb se tiene que se insertaron dos documentos:</p>
<p><img alt="" src="./images/apirestfulconeve2-5.png"></p>
<h2></h2>
<p>¡Haz tu donativo!
Si te gustó el artículo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
dirección: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el código QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"></p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://ecrespo.github.io/tag/debian.html">Debian</a>
      <a href="https://ecrespo.github.io/tag/linux.html">Linux</a>
      <a href="https://ecrespo.github.io/tag/python.html">Python</a>
      <a href="https://ecrespo.github.io/tag/ubuntu.html">Ubuntu</a>
      <a href="https://ecrespo.github.io/tag/api-restfull.html">API Restfull</a>
      <a href="https://ecrespo.github.io/tag/eve.html">Eve</a>
    </p>
  </div>

<section>
  <p id="post-share-links">
    Share on:
    <a href="mailto:?subject=API%20rest%20ful%20con%20Eve%20%28parte%202%29&amp;body=https%3A//ecrespo.github.io/api-rest-ful-con-eve-parte-2.html" title="Share via Email">Email</a>
    |
    <a href="https://sharetodiaspora.github.io/?title=API%20rest%20ful%20con%20Eve%20%28parte%202%29&url=https%3A//ecrespo.github.io/api-rest-ful-con-eve-parte-2.html" title="Share on Diaspora">Diaspora</a>
    |
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//ecrespo.github.io/api-rest-ful-con-eve-parte-2.html" title="Share on Facebook">Facebook</a>
    |
    <a href="https://news.ycombinator.com/submitlink?t=API%20rest%20ful%20con%20Eve%20%28parte%202%29&u=https%3A//ecrespo.github.io/api-rest-ful-con-eve-parte-2.html" title="Share on Hacker News">Hacker News</a>
    |
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A//ecrespo.github.io/api-rest-ful-con-eve-parte-2.html&title=API%20rest%20ful%20con%20Eve%20%28parte%202%29&summary=En%20el%20primer%20art%C3%ADculo%20se%20toc%C3%B3%20el%20tema%20del%20api%20rest%20ful%20con%20eve%20de%20manera%20sencilla.%0AEn%20este%20art%C3%ADculo%20se%20toca%20el%20uso%20de%20mongodb%20para%20majejo%20del%20api%20rest%20con%20mongodb%2C%20el%20art%C3%ADculo%20se%20basa%20en%20la%20gu%C3%ADa%20r%C3%A1pida%20de%20eve%20que%20se%20encuentra%20en%20su%20sitio.%0ALos%20%E2%80%A6&source=https%3A//ecrespo.github.io/api-rest-ful-con-eve-parte-2.html" title="Share on LinkedIn">LinkedIn</a>
    |
    <a href="" title="Share on Mastodon">Mastodon</a>
    |
    <a href="https://www.reddit.com/submit?url=https%3A//ecrespo.github.io/api-rest-ful-con-eve-parte-2.html&title=API%20rest%20ful%20con%20Eve%20%28parte%202%29" title="Share via Reddit">Reddit</a>
    |
    <a href="https://twitter.com/intent/tweet?text=API%20rest%20ful%20con%20Eve%20%28parte%202%29&url=https%3A//ecrespo.github.io/api-rest-ful-con-eve-parte-2.html&hashtags=debian,linux,python,ubuntu,api-restfull,eve" title="Share on Twitter">Twitter</a>
    |
    <a href="" title="Share on Bluesky">Bluesky</a>
  </p>
</section>


  <div class="neighbors">
    <a class="btn float-left" href="https://ecrespo.github.io/crear-un-paquete-python-del-modulo-pywrapper_config.html" title="Crear un paquete python del módulo pywrapper_config">
      <i class="fa fa-angle-left"></i> Previous Post
    </a>
    <a class="btn float-right" href="https://ecrespo.github.io/extraccion-de-datos-del-pdf-de-reporte-de-salud-de-cencoex.html" title="Extracción de Datos del PDF de reporte de salud de Cencoex">
      Next Post <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>You might enjoy</h4>
    <ul class="related-posts">
      <li><a href="https://ecrespo.github.io/api-rest-full-para-python-con-eve-parte-1.html">API rest Full para Python con Eve (parte 1).</a></li>
      <li><a href="https://ecrespo.github.io/entorno_desarrollo_datascience.html">Crear entorno de desarrollo para Ciencia de Datos con Anaconda, Jupyter, git y cookiecutter</a></li>
      <li><a href="https://ecrespo.github.io/desarrollar-un-api-con-graphql-en-flask.html">Desarrollar un API con GraphQL en Flask</a></li>
      <li><a href="https://ecrespo.github.io/instalacion-de-open365io-en-un-servidor-debian-jessie-local.html">Instalación de open365.io en un servidor Debian Jessie local</a></li>
      <li><a href="https://ecrespo.github.io/ejecutando-micros-servicios-con-docker-usando-docker-compose.html">Ejecutando micros servicios con docker usando docker-compose</a></li>
    </ul>
  </div>


    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234566"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https://seraphto.disqus.com';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

<footer>
<p>&copy; 2022 </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Página de Seraph ",
  "url" : "https://ecrespo.github.io",
  "image": "//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120",
  "description": " Software Libre, Ciencia de Datos y Python"
}
</script>
</body>
</html>