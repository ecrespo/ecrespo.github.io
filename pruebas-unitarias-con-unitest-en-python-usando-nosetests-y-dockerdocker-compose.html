<!doctype html>
<html lang="es" itemscope itemtype="http://schema.org/Person">
<head>
            <meta charset="utf-8">
        <!-- Site Meta Data -->
        <title>Pruebas unitarias con unitest en Python usando nosetests y Docker/docker-compose</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="Ernesto Crespo">

        <link rel="shortcut icon" href="">

        <!-- schema.org -->
        <meta itemprop="name" content="Página de Seraph">
        <meta itemprop="image" content="">
        <meta itemprop="description" content="">

        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
        <!-- Style Meta Data -->
        <link rel="stylesheet" href="https://ecrespo.github.io/theme/css/style.css" type="text/css"/>
        <link rel="stylesheet" href="https://ecrespo.github.io/theme/css/pygments.css" type="text/css"/>

        <!-- Feed Meta Data -->
            <link href="https://ecrespo.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
                  title="Página de Seraph ATOM Feed"/>

        <!-- Twitter Feed -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="">
        <meta name="twitter:image" content="">

    <meta name="twitter:creator" content="">
    <meta name="twitter:url" content="https://ecrespo.github.io/pruebas-unitarias-con-unitest-en-python-usando-nosetests-y-dockerdocker-compose.html">
    <meta name="twitter:title" content="Página de Seraph ~ Pruebas unitarias con unitest en Python usando nosetests y Docker/docker-compose">
    <meta name="twitter:description" content="Ya se han tocado en el blog el tema de pruebas unitarias, y usando Docker, los artículos anteriores lo pueden encontrar en la etiqueta unittest. En este artículo se mostrará una clase calculadora que hace una suma y raíz cuadrada, y se tiene la clase para las pruebas unitarias. Estructura …">

    <!-- Facebook Meta Data -->
    <meta property="og:title" content="Página de Seraph ~ Pruebas unitarias con unitest en Python usando nosetests y Docker/docker-compose"/>
    <meta property="og:description" content="Ya se han tocado en el blog el tema de pruebas unitarias, y usando Docker, los artículos anteriores lo pueden encontrar en la etiqueta unittest. En este artículo se mostrará una clase calculadora que hace una suma y raíz cuadrada, y se tiene la clase para las pruebas unitarias. Estructura …"/>
    <meta property="og:image" content=""/>
</head>

<body>
<!-- Sidebar -->
<aside>
    <!--<center><a href="https://ecrespo.github.io"><img id="avatar" src=""></a></center>-->
    <h1>Página de Seraph</h1>
    <br>


    <nav class="nav">
        <ul class="list-bare">

                <li><a class="nav__link" href="/archives.html">Archives</a></li>
                <li><a class="nav__link" href="/categories.html">Categories</a></li>
                <li><a class="nav__link" href="/tags.html">Tags</a></li>

                <li><a class="nav__link" href="https://ecrespo.github.io/pages/About.html">Acerca</a></li>
                <li><a class="nav__link" href="https://ecrespo.github.io/pages/Contacto.html">Contacto</a></li>

        </ul>
    </nav>

    <p class="social">
                <a href="https://medium.com/@_seraph1" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/medium.png"></a>
                <a href="http://ve.linkedin.com/in/ernestocrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/linkedin.png"></a>
                <a href="https://github.com/ecrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/github.png"></a>
                <a href="https://google.com/+ErnestoCrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/google.png"></a>
                <a href="https://twitter.com/_seraph1" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/twitter.png"></a>
                <a href="https://www.facebook.com/ernesto.crespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/facebook.png"></a>
                <a href="https://gitlab.com/ecrespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/gitlab.png"></a>
                <a href="https://soundcloud.com/ernesto-crespo" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/soundcloud.png"></a>
                <a href="//www.seraph.to/feeds/all.atom.xml" target="_blank"><img
                        src="https://ecrespo.github.io/theme/images/icons/rss.png"></a>
            <a href="https://ecrespo.github.io/feeds/all.atom.xml" rel="alternate">
                <img src="https://ecrespo.github.io/theme/images/icons/rss.png"></a>
    </p>

        <h2>Categories</h2>
        <ul class="navbar">
                <li><a
                        href="https://ecrespo.github.io/category/accesibilidad.html">Accesibilidad</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/anuncio.html">Anuncio</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/anuncios.html">Anuncios</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/aplicacion-android.html">Aplicación Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/asterisk-debian-linux.html">Asterisk, Debian, Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/charla.html">Charla</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/charla-python.html">Charla Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/debian-linux-mac-book.html">Debian, Linux, Mac Book</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/debian-maemo-nokia-n810-python.html">Debian, maemo, Nokia N810, Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/demostracion-aplicacion-para-android.html">Demostración Aplicación para Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/desarrollomovil.html">Desarrollo,Movil</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/evento.html">Evento</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/general.html">General</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linux.html">Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxdebian.html">Linux,Debian</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxdesarrollo.html">Linux,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxempaquetado.html">Linux,Empaquetado</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/linuxofimaticadesarrollo.html">Linux,Ofimatica,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/movil-nokia.html">Movil, Nokia</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/nokia-n810.html">Nokia N810</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/nokia-n810-debian-maemo.html">Nokia N810 Debian Maemo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/posts.html">posts</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/resumen-2010.html">Resumen 2010</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/sistemas-operativos.html">Sistemas Operativos</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial.html">Tutorial</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-android.html">Tutorial Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-arduino.html">Tutorial de Arduino</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-data-science.html">Tutorial de Data Science</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-docker.html">Tutorial de Docker</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-integracion-continua.html">Tutorial de integración continua</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-linux.html">Tutorial de Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python.html">Tutorial de Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-en-android.html">Tutorial de Python en Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-y-linux.html">Tutorial de Python y Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-de-python-y-pyqt.html">Tutorial de Python y PyQt</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-debian-bsd-y-python.html">Tutorial Debian BSD y Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-linux.html">Tutorial Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-linux-y-python.html">Tutorial Linux y Python</a></li>
                <li class="active"><a
                        href="https://ecrespo.github.io/category/tutorial-python.html">Tutorial Python</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-python-en-android.html">Tutorial Python en Android</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorial-python-y-linux.html">Tutorial Python y Linux</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/tutorialdesarrollo.html">Tutorial,Desarrollo</a></li>
                <li><a
                        href="https://ecrespo.github.io/category/xml-rpcpython.html">XML-RPC,Python</a></li>
        </ul>


</aside>

<!-- Content -->
<article>
    <section id="content">
        <article>
            <h2 class="post_title post_detail"><a href="https://ecrespo.github.io/pruebas-unitarias-con-unitest-en-python-usando-nosetests-y-dockerdocker-compose.html" rel="bookmark"
                                                  title="Permalink to Pruebas unitarias con unitest en Python usando nosetests y Docker/docker-compose">Pruebas unitarias con unitest en Python usando nosetests y Docker/docker-compose</a></h2>
            <div class="entry-content blog-post">
                <p>Ya se han tocado en el blog el tema de pruebas unitarias, y usando Docker, los artículos anteriores lo pueden encontrar en la etiqueta <a href="https://www.seraph.to/tag/unittest.html">unittest</a>.</p>
<p>En este artículo se mostrará una clase calculadora que hace una suma y raíz cuadrada, y se tiene la clase para las pruebas unitarias. </p>
<h4>Estructura de archivos y directorios</h4>
<p>La estructura de archivos y directorios del directorio de trabajo del repositorio es la siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="err">tutoriales-pruebas</span>
<span class="err">├── app</span>
<span class="err">│   ├── calculadora.py</span>
<span class="err">│   └── __init__.py</span>
<span class="err">├── docker-compose.yml</span>
<span class="err">├── Dockerfile</span>
<span class="err">└── test</span>
<span class="err">    └── unit</span>
<span class="err">        ├── calculadora_test.py</span>
<span class="err">        └── __init__.py</span>
</code></pre></div>

<p>Archivo <code>Dockerfile</code> y <code>docker-compose.yml</code></p>
<p>En el archivo Dockerfile se define como sistema base python, se pasa las dependencias  para usar nosetests y cobertura. </p>
<p>A continuación el código del archivo Dockerfile:</p>
<div class="highlight"><pre><span></span><code><span class="n">FROM</span> <span class="n">python</span>


<span class="n">WORKDIR</span> <span class="o">/</span><span class="n">code</span><span class="o">/</span>



<span class="n">RUN</span> <span class="n">pip3</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pip</span>


<span class="n">RUN</span> <span class="n">pip3</span> <span class="n">install</span> <span class="n">nose</span>


<span class="n">RUN</span> <span class="n">pip3</span> <span class="n">install</span> <span class="n">nose</span><span class="o">-</span><span class="n">cov</span>


<span class="n">RUN</span> <span class="n">pip3</span> <span class="n">install</span> <span class="n">rednose</span>


<span class="n">RUN</span> <span class="n">pip3</span> <span class="n">install</span> <span class="n">pytest</span>


<span class="n">RUN</span> <span class="n">pip3</span> <span class="n">install</span> <span class="n">pytest</span><span class="o">-</span><span class="n">cov</span>


<span class="n">RUN</span> <span class="n">pip3</span> <span class="n">install</span> <span class="n">mock</span>





<span class="n">ADD</span> <span class="o">.</span> <span class="o">/</span><span class="n">code</span><span class="o">/</span>


<span class="n">COPY</span> <span class="o">.</span> <span class="o">/</span><span class="n">code</span><span class="o">/</span>





<span class="n">CMD</span> <span class="n">nosetests</span>  <span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">coverage</span>

<span class="c1">#CMD nosetests -sv --rednose </span>
</code></pre></div>

<p>Toca comentar y descomentar las dos líneas de CMD si se requiere usar cobertura o no.</p>
<p>El archivo <code>docker-compose.yml</code> contiene lo siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="n">pruebas</span><span class="o">:</span>

  <span class="n">build</span><span class="o">:</span> <span class="o">.</span>



  <span class="n">volumes</span><span class="o">:</span>

    <span class="o">-</span> <span class="s2">&quot;.:/code&quot;</span>
</code></pre></div>

<p>Se define el microservicio pruebas que usará el archivo Dockerfile, y se define el volumen.</p>
<h4>Módulo cálculadora</h4>
<p>Este módulo tiene la clase calculadora con los métodos suma y raíz cuadrada, el código se muestra a continuación: </p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python</span>


<span class="c1">#Se importa sqrt de math</span>


<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>


<span class="c1">#Clase calculadora</span>


<span class="k">class</span> <span class="nc">Calculadora</span><span class="p">:</span>


    <span class="c1">#Metodo suma de x y y, se evalua si son enteros si no, devuelve error.</span>


    <span class="k">def</span> <span class="nf">suma</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>


        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>


            <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>


        <span class="k">else</span><span class="p">:</span>


            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Invalid type: </span><span class="si">{}</span><span class="s2"> and </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="nb">type</span><span class="p">(</span><span class="n">y</span><span class="p">)))</span>





    <span class="c1">#Metodo raizcuadrada de X, devuelve la raiz cuadrada si es entero positivo, si no</span>


    <span class="c1">#devuelve mensaje de error.</span>


    <span class="k">def</span> <span class="nf">raizCuadrada</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>


        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>


            <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>


        <span class="k">else</span><span class="p">:</span>


            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Invalid type: </span><span class="si">{}</span><span class="s2"> &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>



<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>


    <span class="c1">#Se crea una instancia de la clase</span>


    <span class="n">calc</span> <span class="o">=</span> <span class="n">Calculadora</span><span class="p">()</span>


    <span class="c1">#Se calcula la suma de 2 y 2, se muestra en pantalla.</span>


    <span class="n">results</span> <span class="o">=</span> <span class="n">calc</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>


    <span class="nb">print</span> <span class="p">(</span><span class="n">results</span><span class="p">)</span>
</code></pre></div>

<h4>Módulo de las pruebas</h4>
<p>El archivo <code>calculadora_tests.py</code> contiene las pruebas para la suma y para la raíz cuadrada, adicional muestra una serie de métodos de otras pruebas que existen en unittest (que no tiene que ver con las pruebas de calculadora, sólo con fines ilustrativos del uso de unittest).</p>
<p>A continuación se muestra el código:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>


<span class="kn">import</span> <span class="nn">unittest</span>


<span class="kn">from</span> <span class="nn">app.calculadora</span> <span class="kn">import</span> <span class="n">Calculadora</span>




<span class="k">class</span> <span class="nc">TestCalculadora</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>


    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">calc</span> <span class="o">=</span> <span class="n">Calculadora</span><span class="p">()</span>



    <span class="k">def</span> <span class="nf">test_suma_retorna_resultado_correcto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">##Asegura que sea igual la operacion de suma 2+2 a 4</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">suma</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>



    <span class="k">def</span> <span class="nf">test_suma_devuelve_error_si_el_tipo_no_es_entero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Asegura error, si es de tipo, cuando se le pasa dos string.</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">suma</span><span class="p">,</span> <span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="s2">&quot;World&quot;</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">test_asegura_que_sea_verdadero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Se asegura que el valor 1 es true y un string.</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s2">&quot;Hello, World&quot;</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">test_aseura_que_sea_falso</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Se asegura que el string vacio y cero son falso.</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>




    <span class="k">def</span> <span class="nf">test_asegura_que_es_mayor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Se asegura que 2&gt;1</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertGreater</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">test_asegura_que_es_mayor_e_igual</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Se asegura que 2&gt;=2</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertGreaterEqual</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">test_asegura_que_es_casi_igual_a_delta_0_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Se asegura que sea casi igual 1 y 1.2 con delta de 0.5</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">test_asegura_lugares_casi_igual</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Se asegura que es casi igual 1 y 1.00001 por 4 lugares.</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.00001</span><span class="p">,</span> <span class="n">places</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>




    <span class="k">def</span> <span class="nf">test_asegura_diccionario_contiene_subconjunto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="n">esperado</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>


        <span class="n">actual</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="s1">&#39;f&#39;</span><span class="p">}</span>


        <span class="c1">#Se asegura que el diccionario actual contiene lo esperado.</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertDictContainsSubset</span><span class="p">(</span><span class="n">esperado</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">test_asegura_diccionarios_iguales</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="n">esperado</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="s1">&#39;d&#39;</span><span class="p">}</span>


        <span class="n">actual</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>


        <span class="c1">#Se asegra que el diccionario esperado sea igual al actual.</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertDictEqual</span><span class="p">(</span><span class="n">esperado</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">test_asegura_que_esta_en</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Se asegura que 1 este en la lista</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>



    <span class="k">def</span> <span class="nf">test_asegura_expresiones_iguales</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Se asegura que las expresiones son iguales expre1 y expre2</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">test_asegura_objeto_es_instancia_de_una_clase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Se asegura que el objeto 2 sea de la clase entero</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">test_asegura_objeto_no_es_instancia_de_una_clase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Se asegura que el objeto 2 no sea una clase str</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIsInstance</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">test_asegura_que_es_none</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Se asegura que es None.</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">test_asegura_expresiones_no_sean_iguales</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNot</span><span class="p">([],</span> <span class="p">[])</span>



    <span class="k">def</span> <span class="nf">test_asegura_que_no_sea_none</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Se asegura que 1 no es None.</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">test_asegura_que_es_menor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Se asegura que 3 es menor que 5</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertLess</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">test_asegura_que_es_menor_e_igual</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="c1">#Se asegura que 7 es menor o igual que 7.</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertLessEqual</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>




<span class="k">if</span> <span class="vm">__name__</span> <span class="o">=</span>




<span class="o">=</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>



  <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</code></pre></div>

<h3>Ejecución de las pruebas</h3>
<h4>Ejecución de pruebas unitarias</h4>
<p>Para ejecutar las pruebas se deja descomentada la línea en el archivo Dockerfile que dice:</p>
<div class="highlight"><pre><span></span><code><span class="err">#CMD nosetests  --with-coverage</span>
<span class="err">CMD nosetests -sv --rednose</span>
</code></pre></div>

<p>Se construye la imagen:</p>
<div class="highlight"><pre><span></span><code><span class="err">docker-compose build</span>
</code></pre></div>

<p>Se ejecuta el contenedor:</p>
<div class="highlight"><pre><span></span><code><span class="err">docker-compose up</span>
</code></pre></div>

<p>El resultado de la ejecución se muestra a continuación:</p>
<div class="highlight"><pre><span></span><code><span class="err">Recreating tutorialespruebas_pruebas_1</span>
<span class="err">Attaching to tutorialespruebas_pruebas_1</span>
<span class="err">pruebas_1 | test_asegura_diccionario_contiene_subconjunto (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_diccionarios_iguales (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_expresiones_iguales (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_expresiones_no_sean_iguales (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_lugares_casi_igual (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_objeto_es_instancia_de_una_clase (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_objeto_no_es_instancia_de_una_clase (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_que_es_casi_igual_a_delta_0_5 (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_que_es_mayor (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_que_es_mayor_e_igual (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_que_es_menor (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_que_es_menor_e_igual (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_que_es_none (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_que_esta_en (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_que_no_sea_none (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_asegura_que_sea_verdadero (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_aseura_que_sea_falso (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_suma_devuelve_error_si_el_tipo_no_es_entero (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | test_suma_retorna_resultado_correcto (unit.calculadora_test.TestCalculadora) ... passed</span>
<span class="err">pruebas_1 | </span>
<span class="err">pruebas_1 | -----------------------------------------------------------------------------</span>
<span class="err">pruebas_1 | 19 tests run in 0.072 seconds (19 tests passed)</span>
<span class="err">tutorialespruebas_pruebas_1 exited with code 0</span>
</code></pre></div>

<p>Se ejecutaron 19 pruebas y todas pasaron, la ejecución se tardó 0.072 segundos.</p>
<p>Ejecución de pruebas de cobertura
La cobertura de código permite medir la calidad de las pruebas ( más información en wikipedia).</p>
<p>Para ejecutar la prueba es necesario modificar el archivo Dockerfile para que se use la cobertura:</p>
<div class="highlight"><pre><span></span><code><span class="err">CMD nosetests  --with-coverage</span>
<span class="err">#CMD nosetests -sv --rednose</span>
</code></pre></div>

<p>Se construye la imagen Docker:</p>
<div class="highlight"><pre><span></span><code><span class="err">docker-compose build </span>
</code></pre></div>

<p>Se ejecuta el contendor de la prueba:</p>
<div class="highlight"><pre><span></span><code><span class="err">docker-compose up</span>
</code></pre></div>

<p>El resultado se muestra a continuación:</p>
<div class="highlight"><pre><span></span><code><span class="err">Recreating tutorialespruebas_pruebas_1</span>
<span class="err">Attaching to tutorialespruebas_pruebas_1</span>
<span class="err">pruebas_1 | ...................</span>
<span class="err">pruebas_1 | Name                 Stmts   Miss  Cover</span>
<span class="err">pruebas_1 | ----------------------------------------</span>
<span class="err">pruebas_1 | app.py                   0      0   100%</span>
<span class="err">pruebas_1 | app/calculadora.py      14      6    57%</span>
<span class="err">pruebas_1 | unit.py                  0      0   100%</span>
<span class="err">pruebas_1 | ----------------------------------------</span>
<span class="err">pruebas_1 | TOTAL                   14      6    57%</span>
<span class="err">pruebas_1 | ----------------------------------------------------------------------</span>
<span class="err">pruebas_1 | Ran 19 tests in 0.019s</span>
<span class="err">pruebas_1 | </span>
<span class="err">pruebas_1 | OK</span>
<span class="err">tutorialespruebas_pruebas_1 exited with code 0</span>
</code></pre></div>

<p>Como se ve el módulo calculadora cubre un 57% de cobertura.</p>
<p>El código de este proyecto se encuentra en el <a href="gitlab.com/ecrespo/tutoriales-pruebas/tree/nosetests">repo tutoriales de pruebas en la rama nosetests</a>. </p>
<h2></h2>
<p>¡Haz tu donativo!
Si te gustó el artículo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
dirección: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el código QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"></p>
<p><img alt="" src="./images/.png"></p>
            </div>
            <div class="post_list">
                <span>By </span>
                <a href="https://ecrespo.github.io/author/ernesto-crespo.html">@Ernesto Crespo</a>
                <span> in </span>
                <span class="post_category"><a href="https://ecrespo.github.io/category/tutorial-python.html" rel="bookmark"
                                               title="Permalink to Tutorial Python">[ Tutorial Python ]</a></span>
                <span class="post_date">mié 05 octubre 2016</span>
                <div><span>Tags : </span>
                            <span><a href="https://ecrespo.github.io/tag/docker.html">#Docker, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/docker-compose.html">#Docker-compose, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/nosetests.html">#nosetests, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/prueba-de-cobertura.html">#Prueba de cobertura, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/pruebas-unitarias.html">#Pruebas unitarias, </a></span>
                            <span><a href="https://ecrespo.github.io/tag/unittest.html">#unittest, </a></span>
                </div>

                <div class="entry-social">
                    <span class="twitter"><a target="_blank" rel="nofollow"
                                             onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=700');return false;"
                                             title="Twitter"
                                             href="https://twitter.com/share?url=https://ecrespo.github.io/pruebas-unitarias-con-unitest-en-python-usando-nosetests-y-dockerdocker-compose.html&text=Pruebas unitarias con unitest en Python usando nosetests y Docker/docker-compose&via="><img
                            src="https://ecrespo.github.io/theme/images/icons/twitter-s.png"></a></span>

                    <span class="gplus"><a target="_blank" title="Google +"
                                           href="https://plus.google.com/share?url=https://ecrespo.github.io/pruebas-unitarias-con-unitest-en-python-usando-nosetests-y-dockerdocker-compose.html&hl=fr"
                                           rel="nofollow"
                                           onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img
                            src="https://ecrespo.github.io/theme/images/icons/google-s.png"></a></span>

                    <span class="facebook"><a target="_blank" title="Facebook" rel="nofollow"
                                              onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=700');return false;"
                                              href="https://www.facebook.com/sharer.php?u=https://ecrespo.github.io/pruebas-unitarias-con-unitest-en-python-usando-nosetests-y-dockerdocker-compose.html&t=Pruebas unitarias con unitest en Python usando nosetests y Docker/docker-compose"><img
                            src="https://ecrespo.github.io/theme/images/icons/facebook-s.png"></a></span>

                    <a target="_blank" title="Linkedin"
                       href="https://www.linkedin.com/shareArticle?mini=true&url=https://ecrespo.github.io/pruebas-unitarias-con-unitest-en-python-usando-nosetests-y-dockerdocker-compose.html&title=Pruebas unitarias con unitest en Python usando nosetests y Docker/docker-compose"
                       rel="nofollow"
                       onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img
                            src="https://ecrespo.github.io/theme/images/icons/linkedin-s.png"></a>

                    <span class="mail"><a
                            href="mailto:?subject=Pruebas unitarias con unitest en Python usando nosetests y Docker/docker-compose&amp;body=Viens découvrir un article à propos de [Pruebas unitarias con unitest en Python usando nosetests y Docker/docker-compose] sur le site de Ernesto Crespo. https://ecrespo.github.io/pruebas-unitarias-con-unitest-en-python-usando-nosetests-y-dockerdocker-compose.html"
                            title="Share by Email" target="_blank"><img
                            src="https://ecrespo.github.io/theme/images/icons/mail-s.png"></a></span>
                </div>
            </div>
                <div class="comments">
                    <h2>Comments !</h2>
                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                        var disqus_identifier = "pruebas-unitarias-con-unitest-en-python-usando-nosetests-y-dockerdocker-compose.html";
                        (function () {
                            var dsq = document.createElement('script');
                            dsq.type = 'text/javascript';
                            dsq.async = true;
                            dsq.src = 'https://https://seraphto.disqus.com.disqus.com/embed.js';
                            (document.getElementsByTagName('head')[0] ||
                            document.getElementsByTagName('body')[0]).appendChild(dsq);
                        })();
                    </script>
                </div>
        </article>
    </section>
</article>

<!-- Footer -->
    <footer>
        <p>
            Blog powered by <a href="http://getpelican.com/">Pelican</a>,
            which takes great advantage of <a href="http://python.org">Python</a>.
            Theme <a href="https://github.com/parbhat/pelican-blue">Pelican-Blue</a> by <a
                href="https://parbhatpuri.com/">@parbhat</a>.
        </p>
    </footer>

    <!-- Analytics -->
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-131517246-1']);
        _gaq.push(['_trackPageview']);
        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>

</body>
</html>