
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="https://ecrespo.github.io/theme/pygments/monokai.min.css">


  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://ecrespo.github.io/theme/font-awesome/css/solid.css">


    <link href="https://ecrespo.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Página de Seraph Atom">



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131517246-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#e5e5ff">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#e5e5ff">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#e5e5ff">

<meta name="author" content="Ernesto Crespo" />
<meta name="description" content="En los artículos anteriores sobre docker se tiene: Instalar Docker en Debian Jessie Uso de Docker en Debian Jessie (parte 1) Uso de Docker en Debian Jessie (parte 2) En este artículo se muestra como construir una imagen Docker a partir de un archivo llamado Dockerfile. Se usará una imagen …" />
<meta name="keywords" content="Canaima, Debian, Linux, Python, Ubuntu, Docker">


<meta property="og:site_name" content="Página de Seraph"/>
<meta property="og:title" content="Crear una imagen Docker a partir de un archivo dockerfile."/>
<meta property="og:description" content="En los artículos anteriores sobre docker se tiene: Instalar Docker en Debian Jessie Uso de Docker en Debian Jessie (parte 1) Uso de Docker en Debian Jessie (parte 2) En este artículo se muestra como construir una imagen Docker a partir de un archivo llamado Dockerfile. Se usará una imagen …"/>
<meta property="og:locale" content="es_VE"/>
<meta property="og:url" content="https://ecrespo.github.io/crear-una-imagen-docker-a-partir-de-un-archivo-dockerfile.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2016-01-17 09:00:00-04:30"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://ecrespo.github.io/author/ernesto-crespo.html">
<meta property="article:section" content="Tutorial de Linux"/>
<meta property="article:tag" content="Canaima"/>
<meta property="article:tag" content="Debian"/>
<meta property="article:tag" content="Linux"/>
<meta property="article:tag" content="Python"/>
<meta property="article:tag" content="Ubuntu"/>
<meta property="article:tag" content="Docker"/>
<meta property="og:image" content="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120">

  <title>Página de Seraph &ndash; Crear una imagen Docker a partir de un archivo dockerfile.</title>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "pub-0261001661746989",
      enable_page_level_ads: true
    });
  </script>
</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="https://ecrespo.github.io">
        <img src="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120" alt="Ernesto Crespo" title="Ernesto Crespo">
      </a>

      <h1>
        <a href="https://ecrespo.github.io">Ernesto Crespo</a>
      </h1>

<p>Data Scientist </p>

      <nav>
        <ul class="list">


              <li>
                <a target="_self"
                   href="https://ecrespo.github.io/pages/About.html#About">
                  Acerca
                </a>
              </li>
              <li>
                <a target="_self"
                   href="https://ecrespo.github.io/pages/Contacto.html#Contacto">
                  Contacto
                </a>
              </li>

        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-medium" href="https://medium.com/@_seraph1" target="_blank">
              <i class="fab fa-medium"></i>
            </a>
          </li>
          <li>
            <a  class="sc-linkedin" href="http://ve.linkedin.com/in/ernestocrespo" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a  class="sc-github" href="https://github.com/ecrespo" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-google" href="https://google.com/+ErnestoCrespo" target="_blank">
              <i class="fab fa-google"></i>
            </a>
          </li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/_seraph1" target="_blank">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
          <li>
            <a  class="sc-facebook" href="https://www.facebook.com/ernesto.crespo" target="_blank">
              <i class="fab fa-facebook"></i>
            </a>
          </li>
          <li>
            <a  class="sc-gitlab" href="https://gitlab.com/ecrespo" target="_blank">
              <i class="fab fa-gitlab"></i>
            </a>
          </li>
          <li>
            <a  class="sc-soundcloud" href="https://soundcloud.com/ernesto-crespo" target="_blank">
              <i class="fab fa-soundcloud"></i>
            </a>
          </li>
          <li>
            <a  class="sc-rss" href="//www.seraph.to/feeds/all.atom.xml" target="_blank">
              <i class="fas fa-rss"></i>
            </a>
          </li>
      </ul>
    </div>

      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-aside"
           data-ad-client="pub-0261001661746989"
           data-ad-slot="1234561"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
  </aside>
  <main>
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-responsive"
           data-ad-client="pub-0261001661746989"
           data-ad-slot="1234562"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>

    <nav>
      <a href="https://ecrespo.github.io">Inicio</a>

      <a href="/archives.html">Archivos</a>
      <a href="/categories.html">Categorías</a>
      <a href="/tags.html">Etiquetas</a>

      <a href="https://ecrespo.github.io/feeds/all.atom.xml">Atom</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="crear-una-imagen-docker-a-partir-de-un-archivo-dockerfile">Crear una imagen Docker a partir de un archivo dockerfile.</h1>
    <p>
      Publicado el dom 17 enero 2016 en <a href="https://ecrespo.github.io/category/tutorial-de-linux.html">Tutorial de Linux</a>

        &#8226; 3 min de lectura
    </p>
  </header>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234565"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

  <div>
    <p>En los artículos anteriores sobre docker se tiene:</p>
<ol>
<li><a href="https://www.seraph.to/instalar-docker-en-debian-jessie.html#instalar-docker-en-debian-jessie">Instalar Docker en Debian Jessie</a>  </li>
<li><a href="https://www.seraph.to/uso-de-docker-en-debian-jessie-parte-1.html#uso-de-docker-en-debian-jessie-parte-1">Uso de Docker en Debian Jessie (parte 1)</a>  </li>
<li><a href="https://www.seraph.to/uso-de-docker-en-debian-jessie-parte-2.html#uso-de-docker-en-debian-jessie-parte-2">Uso de Docker en Debian Jessie (parte 2)</a>  </li>
</ol>
<p>En este artículo se muestra como construir una imagen Docker a partir de un archivo llamado Dockerfile.</p>
<p>Se usará una imagen de Debian como base que a partir de allí se tendrá una con apache corriendo, en el directorio <code>/var/www/html</code> se tendrá un archivo index.html con dos encabezados html que mostrarán que se tiene corriendo apache por medio de docker.</p>
<p>Lo primero que se tiene que hacer es crear el archivo Dockerfile en un directorio por ejemplo dockerbuilds, el archivo contendrá lo siguiente:</p>
<div class="highlight"><pre><span class="code-line"><span></span>FROM debian</span>
<span class="code-line">MAINTAINER Ernesto Crespo</span>
<span class="code-line">RUN apt-get update</span>
<span class="code-line">RUN apt-get install apache2 -y --force-yes</span>
<span class="code-line">RUN echo &quot;<span class="nt">&lt;h1&gt;</span>Apache con docker<span class="nt">&lt;/h1&gt;</span> <span class="nt">&lt;h2&gt;</span>Prueba hecha por Seraph1<span class="nt">&lt;/h2&gt;</span>&quot; &gt; /var/www/html/index.html</span>
<span class="code-line">EXPOSE 80</span>
<span class="code-line">ENTRYPOINT apache2ctl -D FOREGROUND</span>
</pre></div>


<p>Descripción del archivo:</p>
<ul>
<li>FROM:Lo primero que se define es la imagen que se va a usar, en este caso Debian.  </li>
<li>MAINTAINER: El nombre del mantenedor de la imagen.  </li>
<li>RUN: Instrucción que permite ejecutar comandos dentro del contenedor. En este caso se  actualiza la lista de paquetes de Debian, se instala apache y se copia el contenido de index.html en la ruta que le corresponde.</li>
<li>Se expone el puerto 80 del servidor  apache.    </li>
<li>Se indica que se ejecute apache en primer plano cada vez que se inicie el contenedor.  </li>
</ul>
<p>Luego de tener el archivo listo, se ejecuta el comando para la creación de la imagen usando dicho archivo:</p>
<div class="highlight"><pre><span class="code-line"><span></span>docker build -t ecrespo/apache .</span>
</pre></div>


<p>Se define que el nombre de la imagen será <code>ecrespo/apache</code>.</p>
<p>Al terminar de realizar el proceso de construcción se tendrá la imagen en el equipo:</p>
<div class="highlight"><pre><span class="code-line"><span></span>$docker images</span>
<span class="code-line">REPOSITORY                                      TAG                 IMAGE ID            CREATED              VIRTUAL SIZE</span>
<span class="code-line">ecrespo/apache                                  latest              ae0d4610be9d        About a minute ago   197.8 MB</span>
<span class="code-line">debian-django                                   latest              36896e115e32        2 weeks ago          601.1 MB</span>
<span class="code-line">ecrespo/empaquetadodebian                       latest              ee5883957d64        2 weeks ago          656.9 MB</span>
<span class="code-line">debian                                          latest              8b9a99209d5c        6 weeks ago          125.1 MB</span>
<span class="code-line">sonarqube                                       latest              dd47274097f7        10 weeks ago         942.5 MB</span>
<span class="code-line">debian                                          8.1                 f05335696a9b        4 months ago         125.2 MB</span>
</pre></div>


<p>Se tiene la imagen de 197.8MB. </p>
<p>Para terminar se ejecuta la imagen que se llama <code>ecrespo/apache</code>, la instancia se llamará apache1, se captura el puerto local 80 y lo muestra en el equipo como puerto 90.</p>
<div class="highlight"><pre><span class="code-line"><span></span>docker run --name apache1 -d -p 90:80 ecrespo/apache</span>
</pre></div>


<p>Se lista los procesos de docker y se tiene el contenedor de apache corriendo:</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="err">$</span><span class="n">docker</span><span class="w"> </span><span class="n">ps</span><span class="w"></span></span>
<span class="code-line"><span class="n">CONTAINER</span><span class="w"> </span><span class="n">ID</span><span class="w">        </span><span class="n">IMAGE</span><span class="w">               </span><span class="n">COMMAND</span><span class="w">                  </span><span class="n">CREATED</span><span class="w">             </span><span class="n">STATUS</span><span class="w">              </span><span class="n">PORTS</span><span class="w">                </span><span class="n">NAMES</span><span class="w"></span></span>
<span class="code-line"><span class="mo">01</span><span class="mi">95</span><span class="n">ebf31328</span><span class="w">        </span><span class="n">ecrespo</span><span class="o">/</span><span class="n">apache</span><span class="w">      </span><span class="s">&quot;/bin/sh -c &#39;</span><span class="n">apache2c</span><span class="s">&quot;   44 minutes ago      Up 44 minutes       0.0.0.0:90-&gt;80/tcp   apache1</span></span>
</pre></div>


<p>El nombre es <code>ecrespo/apache</code>, el comando que se ejecuta es el de <code>apachectl</code>, tiempo de creado 44 minutos y arriba desde hace 44 minutos, el nombre de la instancia es <code>apache1</code> y redirecciona el puerto 90 al puerto 80.</p>
<p>Con <code>docker stats</code> pasando el id del contenedor se puede tener información de consumo de recursos de dicho contenedor.</p>
<p><img alt="" src="./images/crearunaimagendockerapartirdeunarchivodockerfile-1.png"></p>
<p>Ahora se abre el navegador con localhost:90 y se tiene lo que muestra el mensaje que veremos en la siguiente figura:</p>
<p><img alt="" src="./images/crearunaimagendockerapartirdeunarchivodockerfile-2.png"></p>
<p>Para detener el contenedor se ejecuta <code>docker stop</code> con el id del contenedor:</p>
<div class="highlight"><pre><span class="code-line"><span></span>$ docker stop 0195ebf31328</span>
<span class="code-line">0195ebf31328</span>
</pre></div>


<p>Al listar los procesos se nota que ya no se tiene el contenedor <code>apache1</code> corriendo.</p>
<div class="highlight"><pre><span class="code-line"><span></span>$ docker ps</span>
<span class="code-line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span>
</pre></div>


<p>En este artículo se muestra una pequeña personalización del apache, poco a poco se irá aumentando el nivel de personalización de los contenedores para tener servicios reales en funcionamiento. </p>
<h2></h2>
<p>¡Haz tu donativo!
Si te gustó el artículo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
dirección: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el código QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"></p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://ecrespo.github.io/tag/canaima.html">Canaima</a>
      <a href="https://ecrespo.github.io/tag/debian.html">Debian</a>
      <a href="https://ecrespo.github.io/tag/linux.html">Linux</a>
      <a href="https://ecrespo.github.io/tag/python.html">Python</a>
      <a href="https://ecrespo.github.io/tag/ubuntu.html">Ubuntu</a>
      <a href="https://ecrespo.github.io/tag/docker.html">Docker</a>
    </p>
  </div>


  <div class="neighbors">
    <a class="btn float-left" href="https://ecrespo.github.io/automatizar-prueba-funcional-del-inicio-y-fin-de-sesion-del-admin-de-django.html" title="Automatizar prueba funcional del Inicio y fin de sesión del Admin de Django">
      <i class="fa fa-angle-left"></i> Artículo anterior
    </a>
    <a class="btn float-right" href="https://ecrespo.github.io/iniciando-django-usando-docker.html" title="Iniciando Django usando Docker">
      Próximo artículo <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>Te puede gustar</h4>
    <ul class="related-posts">
      <li><a href="https://ecrespo.github.io/ejecutando-micros-servicios-con-docker-usando-docker-compose.html">Ejecutando micros servicios con docker usando docker-compose</a></li>
      <li><a href="https://ecrespo.github.io/instalar-gitlab-runner-de-gitlab-ci-por-medio-de-docker.html">Instalar gitlab-runner de gitlab-ci por medio de Docker</a></li>
      <li><a href="https://ecrespo.github.io/analizar-codigo-python-con-pylint-desde-docker.html">Analizar código python con pylint desde Docker</a></li>
      <li><a href="https://ecrespo.github.io/crear-una-imagen-docker-de-rethinkdb.html">Crear una imagen Docker de RethinkDB</a></li>
      <li><a href="https://ecrespo.github.io/usar-dockerui-para-la-gestion-de-imagenes-y-contenedores-de-docker.html">Usar dockerui para la gestión de imágenes y contenedores de Docker</a></li>
    </ul>
  </div>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234566"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https://seraphto.disqus.com';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Por favor, habilita JavaScript para ver los comentarios.
</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>&copy; 2022 </p>
<p>
Construido con <a href="http://getpelican.com" target="_blank">Pelican</a> usando el tema <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> 
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Página de Seraph ",
  "url" : "https://ecrespo.github.io",
  "image": "//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120",
  "description": " Software Libre, Ciencia de Datos y Python"
}
</script>


</body>
</html>