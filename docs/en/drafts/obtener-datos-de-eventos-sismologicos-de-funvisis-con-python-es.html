
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="http://localhost:8000/en/../theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="http://localhost:8000/en/../theme/pygments/monokai.min.css">


  <link rel="stylesheet" type="text/css" href="http://localhost:8000/en/../theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="http://localhost:8000/en/../theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="http://localhost:8000/en/../theme/font-awesome/css/solid.css">


    <link href="http://localhost:8000/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Seraph's Blog Atom">



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131517246-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#e5e5ff">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#e5e5ff">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#e5e5ff">

<meta name="author" content="Ernesto Crespo" />
<meta name="description" content="Este artículo es gracias al código desarrollado por William Cabrera, donde en su blog menciona que creó un Canal en Telegram sobre los Sismos en Venezuela. El código fuente de sus scripts en php fueron la base para el código Python que se muestra en este artículo. Gracias William por …" />
<meta name="keywords" content="Python, Mechanize, BeautifulSoup, Webscraping">


<meta property="og:site_name" content="Seraph's Blog"/>
<meta property="og:title" content="Obtener datos de eventos sismológicos de Funvisis con Python"/>
<meta property="og:description" content="Este artículo es gracias al código desarrollado por William Cabrera, donde en su blog menciona que creó un Canal en Telegram sobre los Sismos en Venezuela. El código fuente de sus scripts en php fueron la base para el código Python que se muestra en este artículo. Gracias William por …"/>
<meta property="og:locale" content="es_VE"/>
<meta property="og:url" content="http://localhost:8000/en/drafts/obtener-datos-de-eventos-sismologicos-de-funvisis-con-python-es.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2017-05-19 09:00:00-04:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="http://localhost:8000/en/author/ernesto-crespo.html">
<meta property="article:section" content="Tutorial Python"/>
<meta property="article:tag" content="Python"/>
<meta property="article:tag" content="Mechanize"/>
<meta property="article:tag" content="BeautifulSoup"/>
<meta property="article:tag" content="Webscraping"/>
<meta property="og:image" content="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120">

  <title>Seraph's Blog &ndash; Obtener datos de eventos sismológicos de Funvisis con Python</title>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "pub-0261001661746989",
      enable_page_level_ads: true
    });
  </script>
</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="http://localhost:8000/en">
        <img src="//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120" alt="Ernesto Crespo" title="Ernesto Crespo">
      </a>

      <h1>
        <a href="http://localhost:8000/en">Ernesto Crespo</a>
      </h1>

<p>Data Scientist </p>

      <nav>
        <ul class="list">


              <li>
                <a target="_self"
                   href="http://localhost:8000/en/pages/About.html#About">
                  Acerca
                </a>
              </li>
              <li>
                <a target="_self"
                   href="http://localhost:8000/en/pages/Contacto.html#Contacto">
                  Contacto
                </a>
              </li>

        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-medium" href="https://medium.com/@_seraph1" target="_blank">
              <i class="fab fa-medium"></i>
            </a>
          </li>
          <li>
            <a  class="sc-linkedin" href="http://ve.linkedin.com/in/ernestocrespo" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a  class="sc-github" href="https://github.com/ecrespo" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-google" href="https://google.com/+ErnestoCrespo" target="_blank">
              <i class="fab fa-google"></i>
            </a>
          </li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/_seraph1" target="_blank">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
          <li>
            <a  class="sc-facebook" href="https://www.facebook.com/ernesto.crespo" target="_blank">
              <i class="fab fa-facebook"></i>
            </a>
          </li>
          <li>
            <a  class="sc-gitlab" href="https://gitlab.com/ecrespo" target="_blank">
              <i class="fab fa-gitlab"></i>
            </a>
          </li>
          <li>
            <a  class="sc-soundcloud" href="https://soundcloud.com/ernesto-crespo" target="_blank">
              <i class="fab fa-soundcloud"></i>
            </a>
          </li>
          <li>
            <a  class="sc-rss" href="//www.seraph.to/feeds/all.atom.xml" target="_blank">
              <i class="fas fa-rss"></i>
            </a>
          </li>
      </ul>
    </div>

      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-aside"
           data-ad-client="pub-0261001661746989"
           data-ad-slot="1234561"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
  </aside>
  <main>
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-responsive"
           data-ad-client="pub-0261001661746989"
           data-ad-slot="1234562"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>

    <nav>
      <a href="http://localhost:8000/en">Home</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="http://localhost:8000/feeds/all.atom.xml">Atom</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="obtener-datos-de-eventos-sismologicos-de-funvisis-con-python">Obtener datos de eventos sismológicos de Funvisis con Python</h1>
    <p>
      Posted on vie 19 mayo 2017 in <a href="http://localhost:8000/en/category/tutorial-python.html">Tutorial Python</a>

        &#8226; 3 min read
    </p>
  </header>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234565"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

  <div>
    <p>Este artículo es gracias al código desarrollado por William Cabrera, donde en su <a href="http://blog.willicab.com.ve/nuevo-canal-de-telegram-sismos-en-venezuela/">blog</a> menciona que creó un <a href="http://t.me/joinchat/AAAAAEJXSsCWnafdokiAEA">Canal en Telegram sobre los Sismos en Venezuela</a>. El código <a href="http://bitbucket.org/willicab/tgbot-sismove">fuente de sus scripts en php</a> fueron la base para el código Python que se muestra en este artículo.</p>
<p>Gracias William por esta herramienta de información que es el Canal en Telegram.</p>
<p>Se usará <a href="https://www.seraph.to/tag/mechanize.html">mechanize</a> y <a href="https://www.seraph.to/tag/beautifulsoup.html">BeautifulSoup</a> para obtener la información del sitio de funvisis por medio de <a href="https://www.seraph.to/tag/webscraping.html">WebScraping</a>.  La información que se quiere obtener se muestra en un recuadro en la siguiente figura:</p>
<p><img alt="" src="./images/obtenerdatosdeeventossismologicosdefunvisisconpython-1.png"></p>
<p>Para ver cual sección del código html se tiene que buscar, se le da boton derecho a inspeccionar elemento y la siguiente figura muestra el resultado:</p>
<p><img alt="" src="./images/obtenerdatosdeeventossismologicosdefunvisisconpython-2.png"></p>
<p>Ahí se ve claramente  el tag html que es necesario buscar.</p>
<p>A continuación se muestra el código de la aplicación:</p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span><span class="ch">#!/usr/bin/env python</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"><span class="c1">#Se importa mechanize y cookielib</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"><span class="kn">import</span> <span class="nn">mechanize</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"><span class="kn">import</span> <span class="nn">cookielib</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"><span class="c1">#Se importa beautifulSoup</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"><span class="kn">from</span> <span class="nn">BeautifulSoup</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"><span class="k">def</span> <span class="nf">Sismo</span><span class="p">():</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="n">br</span> <span class="o">=</span> <span class="n">mechanize</span><span class="o">.</span><span class="n">Browser</span><span class="p">()</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="c1">#Se crea una instancia para la Cookie</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="n">cj</span> <span class="o">=</span> <span class="n">cookielib</span><span class="o">.</span><span class="n">LWPCookieJar</span><span class="p">()</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="c1">#Se asocia la instancia del cookie con el navegador.</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="n">br</span><span class="o">.</span><span class="n">set_cookiejar</span><span class="p">(</span><span class="n">cj</span><span class="p">)</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="c1">#Se deshabilita el manejo de robots.txt</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_robots</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="c1">#Se define el tiempo de refrescamiento</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_refresh</span><span class="p">(</span><span class="n">mechanize</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">HTTPRefreshProcessor</span><span class="p">(),</span> <span class="n">max_time</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="c1">#Se pasa el url del sitio timeanddate con la informacion</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://www.funvisis.gob.ve/&quot;</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="n">urlhome</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="s2">&quot;index.php&quot;</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="c1">#de la salida y ocultamiento del sol en Venezuela.</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="c1">#Se define las cabeceras del navegador, en este caso se le esta diciendo</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="c1"># que el navegador es un firefox desde Linux Debian</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="n">br</span><span class="o">.</span><span class="n">addheaders</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;SSL_VERIFYHOST&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>\</span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="p">(</span><span class="s1">&#39;FRESH_CONNECT&#39;</span><span class="p">,</span><span class="kc">True</span><span class="p">),</span>\</span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="p">(</span><span class="s1">&#39;RETURNTRANSFER&#39;</span><span class="p">,</span><span class="kc">True</span><span class="p">),</span>\</span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="p">(</span><span class="s1">&#39;SSL_VERIFYPEER&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>\</span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="p">(</span><span class="s1">&#39;Referer&#39;</span><span class="p">,</span> <span class="s1">&#39;http://www.cantv.com.ve&#39;</span><span class="p">),</span>\</span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="p">(</span><span class="s1">&#39;User-agent&#39;</span><span class="p">,</span><span class="s1">&#39;Mozilla/5.0 (X11; U; Linux i686; es-VE; rv:1.9.0.1)Gecko/2008071615 Debian/6.0 Firefox/9&#39;</span><span class="p">)]</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="c1">#Se abre el url</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="n">r</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">urlhome</span><span class="p">)</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="c1">#Se lee el htmml de la pagina</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="n">html</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">response</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="c1">#Se crea una instancia de BeautifulSoup pasando el html</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="c1">#a verificar</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="n">sismo</span> <span class="o">=</span> <span class="p">{}</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="c1">#SE obtiene el primer  div que tengan class module</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">soup</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;module&#39;</span><span class="p">})[</span><span class="mi">0</span><span class="p">]:</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="c1">#Se obtiene el tag a para luego obtener el href y tener el url</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="c1">#del gif del sitio de funvisis que tiene la imagen del sitio donde</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="c1">#fue el sismo.</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="n">trs</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="k">if</span> <span class="n">trs</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">            <span class="k">continue</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="n">sismo</span><span class="p">[</span><span class="s1">&#39;urlref&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>  <span class="o">+</span> <span class="n">trs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="n">trs</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="k">if</span> <span class="n">trs</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">            <span class="k">continue</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="c1">#Obtiene los datos del sismo del sitio de funvisis</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="n">datos</span> <span class="o">=</span> <span class="n">trs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;td&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="n">sismo</span><span class="p">[</span><span class="s1">&#39;fecha&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datos</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&amp;nbsp;&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="n">sismo</span><span class="p">[</span><span class="s1">&#39;hora&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">datos</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&amp;nbsp;&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">][</span><span class="o">-</span><span class="mi">20</span><span class="p">:</span><span class="o">-</span><span class="mi">14</span><span class="p">]</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="n">sismo</span><span class="p">[</span><span class="s1">&#39;magnitud&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datos</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&amp;nbsp;&#39;</span><span class="p">)[</span><span class="mi">3</span><span class="p">][</span><span class="o">-</span><span class="mi">16</span><span class="p">:</span><span class="o">-</span><span class="mi">12</span><span class="p">]</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="n">sismo</span><span class="p">[</span><span class="s1">&#39;profundidad&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datos</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&amp;nbsp;&#39;</span><span class="p">)[</span><span class="mi">4</span><span class="p">][</span><span class="o">-</span><span class="mi">6</span><span class="p">:]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">datos</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&amp;nbsp;&#39;</span><span class="p">)[</span><span class="mi">5</span><span class="p">][</span><span class="o">-</span><span class="mi">11</span><span class="p">:</span><span class="o">-</span><span class="mi">8</span><span class="p">]</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="n">sismo</span><span class="p">[</span><span class="s1">&#39;latitud&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datos</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&amp;nbsp;&#39;</span><span class="p">)[</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&amp;ordm;&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">9</span><span class="p">:]</span> <span class="o">+</span><span class="n">datos</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&amp;nbsp;&#39;</span><span class="p">)[</span><span class="mi">6</span><span class="p">][</span><span class="o">-</span><span class="mi">10</span><span class="p">:</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="n">linea</span> <span class="o">=</span> <span class="n">datos</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&amp;nbsp;&#39;</span><span class="p">)[</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&amp;ordm;&#39;</span><span class="p">)</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="n">sismo</span><span class="p">[</span><span class="s1">&#39;longitud&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">linea</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">9</span><span class="p">:]</span><span class="o">+</span> <span class="n">linea</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="n">sismo</span><span class="p">[</span><span class="s1">&#39;epicentro&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datos</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&amp;nbsp;&#39;</span><span class="p">)[</span><span class="mi">8</span><span class="p">]</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">        <span class="k">return</span> <span class="n">sismo</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"><span class="k">def</span> <span class="nf">EventoSismoJSON</span><span class="p">():</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="c1">#Devuelve los datos del sismo en formato JSON</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="kn">import</span> <span class="nn">json</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">Sismo</span><span class="p">())</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="nb">print</span> <span class="n">Sismo</span><span class="p">()</span></span></span>
<span class="code-line"><span class="code-line"></span></span>
<span class="code-line"><span class="code-line">    <span class="nb">print</span> <span class="n">EventoSismoJSON</span><span class="p">()</span></span></span>
</pre></div>


<p>A ejecutar el Script devuelve el diccionario con la información del evento sismológico.</p>
<div class="highlight"><pre><span class="code-line"><span class="code-line"><span></span>python sismux_getdata.py </span></span>
<span class="code-line"><span class="code-line">{&#39;hora&#39;: u&#39;16:13 &#39;, &#39;latitud&#39;: u&#39;   11.73 N&#39;, &#39;epicentro&#39;: u&#39;52 Km al sur de Curazao&#39;, &#39;profundidad&#39;: u&#39;  40.6 km&#39;, &#39;fecha&#39;: u&#39;19/05/2017&#39;, &#39;urlref&#39;: u&#39;http://www.funvisis.gob.ve/images/reportes/2017/05/reporte_7415.gif&#39;, &#39;magnitud&#39;: u&#39; 3.0&#39;, &#39;longitud&#39;: u&#39;  -68.93 O&#39;}</span></span>
<span class="code-line"><span class="code-line">{&quot;hora&quot;: &quot;16:13 &quot;, &quot;latitud&quot;: &quot;   11.73 N&quot;, &quot;epicentro&quot;: &quot;52 Km al sur de Curazao&quot;, &quot;profundidad&quot;: &quot;  40.6 km&quot;, &quot;fecha&quot;: &quot;19/05/2017&quot;, &quot;urlref&quot;: &quot;http://www.funvisis.gob.ve/images/reportes/2017/05/reporte_7415.gif&quot;, &quot;magnitud&quot;: &quot; 3.0&quot;, &quot;longitud&quot;: &quot;  -68.93 O&quot;}</span></span>
</pre></div>


<p>El código fuente del script lo pueden ver en el repositorio de <a href="http://gitlab.com/mangoosta/sismux/blob/master/sismux_getdata.py">gitlab</a>.</p>
<p>El siguiente artículo será subir la información en una base de datos mongoDB en mongolab y consultar si el evento sismográfico ya no está registrado.</p>
<h2></h2>
<p>¡Haz tu donativo!
Si te gustó el artículo puedes realizar un donativo con Bitcoin (BTC)
usando la billetera digital de tu preferencia a la siguiente
dirección: 17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV</p>
<p>O Escaneando el código QR desde la billetera:</p>
<p><img alt="17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV" src="./images/17MtNybhdkA9GV3UNS6BTwPcuhjXoPrSzV.png"></p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="http://localhost:8000/en/tag/python.html">Python</a>
      <a href="http://localhost:8000/en/tag/mechanize.html">Mechanize</a>
      <a href="http://localhost:8000/en/tag/beautifulsoup.html">BeautifulSoup</a>
      <a href="http://localhost:8000/en/tag/webscraping.html">Webscraping</a>
    </p>
  </div>


  <div class="neighbors">
  </div>


    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="pub-0261001661746989"
         data-ad-slot="1234566"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https://seraphto.disqus.com';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>&copy; 2022 </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Seraph's Blog ",
  "url" : "http://localhost:8000/en",
  "image": "//s.gravatar.com/avatar/7fab2070e149e57fe99da94d7ccbad6b?s=120",
  "description": " Software Libre, Ciencia de Datos y Python"
}
</script>


</body>
</html>